{{Header}}
{{#seo:
|description=Fully verifying Bitcoin wallet. Based on the original reference code by Satoshi Nakamoto.
|image=https://www.{{project_clearnet}}/w/images/4/42/Bitcoin234234234.jpg
}}
[[image:120px-Bitcoin.png|200px]]
[[File:BC Logo .png|thumb|Bitcoin Logo|200px]]

== Bitcoin Core ==

=== Introduction ===

Bitcoin Core is the client software directly descended from the original Bitcoin software client first released by Satoshi Nakamoto. Bitcoin Core consists of both "full-node" software which can fully validate the blockchain, as well as a Bitcoin wallet. <ref>
https://bitcoincore.org/en/about
</ref> The official open source project that maintains and releases the software can be found [https://bitcoincore.org/ here] ([http://6hasakffvppilxgehrswmffqurlcjjjhd76jgvaqmsg6ul25s7t3rzyd.onion/ .onion]). The project also maintains related software such as cryptographic libraries on GitHub.

There can be no blanket recommendation for all users which Bitcoin wallet should be used. It depends on:

* Technical skill.
* Personal risk assignment.
* Financial value in Bitcoin.
* Time.
* And probably other factors as well.

While other bitcoin wallets (such as [[electrum|Electrum]]) have better usability (are easier to use), these have issues (such as [[Electrum#Warnings|Electrum Warnings]]). However, for best security, the official Bitcoin client (Bitcoin Core) should be seriously considered for balances of Bitcoin representing serious financial value. Reasons:

* Developed by Bitcoin developers.
* Most peer reviewed.
* Most conservative, security focused development.
* Reproducible builds.<ref>https://bitcoinbinary.org/ - a repository of Reproducible Build Proofs for Bitcoin Projects</ref>
* Full validating node.
** Transactions are validated against the complete blockchain. Lower probability of of servers lying to the client. Client has higher probability of seeing its true Bitcoin balance.
* Higher privacy.
** All blocks are downloaded. The locally running node will not tell servers which wallet addresses belong to the node.

It unfortunately takes a very long time to download and verify the blockchain and a large amount of disk space which may or may not be better manageable by using Bitcoin pruning mode.

Some things are more difficult with Bitcoin Core than Electrum. Such as:

* Simple backups. Bitcoin Core unfortunately does not support mnemonic phrase backup.
* Easily set up a split offline wallet (cold storage) and online watch only wallet.

These things are possibly doable, however [[undocumented]] here. These might be documented elsewhere. <ref>
[[Terms_of_Service#Non-Endorsement| Non-Endorsement]]. Not audited by {{project name}}. Interesting to investigate.

* https://github.com/JWWeatherman/yeticold
* https://github.com/BenWestgate/yeti.Bash
* https://bitcoinsafe.io/
* https://github.com/BlockchainCommons/Airgapped-Wallet-Community/discussions/39
</ref>

{{stub}}

=== Installation ===

Inside {{Workstation product name}} ({{Q project name}}: App Qubes).

{{Box|text=
'''1.''' Signing key retrival.

{{gpg key
|url=scurl-download https://bitcoin.org/laanwj-releases.asc
|source_filename=laanwj-releases.asc
|gpg_fingerprint_output=Key fingerprint = 01EA 5486 DE18 A882 D4C2  6845 90C8 019E 36C2 E964
}}

'''2.''' Download signed hash sum verification file.

{{CodeSelect|code=
scurl-download https://bitcoin.org/bin/bitcoin-core-0.21.1/SHA256SUMS.asc
}}

'''3.''' Download Bitcoin.

{{CodeSelect|code=
scurl-download https://bitcoin.org/bin/bitcoin-core-0.21.1/bitcoin-0.21.1-x86_64-linux-gnu.tar.gz
}}

'''4.''' Verify hash sum digital signature.

{{CodeSelect|code=
gpg --verify SHA256SUMS.asc
}}

<u>If the virtual machine image is correct</u>, the output will include that the signature is good:

<pre>
Good signature
</pre>

This output might be followed by a warning as follows.

{{Template:GnuPG-Warning}}

'''5.''' De-armor the hash sum file. <ref>
To avoid the following confusing output.

<pre>
sha256sum --check --ignore-missing SHA256SUMS.asc 
bitcoin-0.21.1-x86_64-linux-gnu.tar.gz: OK
sha256sum: WARNING: 20 lines are improperly formatted
</pre>
</ref>

{{CodeSelect|code=
gpg --decrypt SHA256SUMS.asc > SHA256SUMS
}}

'''6.''' Hash sum check.

{{CodeSelect|code=
sha256sum --check --ignore-missing SHA256SUMS
}}

Expected output.

<pre>
bitcoin-0.21.1-x86_64-linux-gnu.tar.gz: OK
</pre>

'''7.''' Extract.

{{CodeSelect|code=
tar xzf bitcoin-0.21.1-x86_64-linux-gnu.tar.gz
}}

'''8.''' Done.

Download, digital signature verification and extraction of Bitcoin Core has been completed.
}}

=== Add a bitcoin-qt Start Menu Entry ===

Creating a <code>bitcoin-qt</code> start menu entry.

This step is optional.

{{Box|text=
Inside {{Workstation product name}} ({{Q project name}}: App Qubes).

'''1.''' Create folder <code>~/.local/share/applications</code>.

{{CodeSelect|code=
mkdir -p ~/.local/share/applications
}}

'''2.''' Open file <code>~/.local/share/applications/bitcoin.desktop</code> in an editor as a regular, non-root user.

{{CodeSelect|code=
mousepad ~/.local/share/applications/bitcoin.desktop
}}

'''3.''' Paste the following contents.

{{CodeSelect|code=
[Desktop Entry]
Name=bitcoin-qt
Comment=bitcoin-qt
Exec=bash -c '~/bitcoin-*/bin/bitcoin-qt'
Terminal=false
Type=Application
Icon=money-manager-ex
StartupWMClass=bitcoin
MimeType=x-scheme-handler/bitcoin;
Categories=Finance;
}}

'''4.''' Save.

'''5.''' {{Q project name}}: perform platform-specific steps.

In <code>dom0</code>, refresh Qubes' appmenu: <code>VM settings</code> &rarr; <code>Applications</code> &rarr; <code>Refresh Applications</code> &rarr; <code>Add desktop shortcut</code>.

'''6.''' Done.

The <code>bitcoin-qt</code> start menu entry available should be avaialble.
}}

=== Autostart bitcoin-qt ===

Automatically starting <code>bitcoin-qt</code>.

This step is optional.

{{Box|text=
Inside {{Workstation product name}} ({{Q project name}}: App Qubes).

'''1.''' Apply instructions [[#Add a bitcoin-qt Start Menu Entry|Add a bitcoin-qt Start Menu Entry]] first.

'''2.''' Create folder <code>~/.config/autostart</code>.

{{CodeSelect|code=
mkdir -p ~/.config/autostart
}}

'''3.''' Create a symlink from <code>~/.local/share/applications/bitcoin.desktop</code> to <code>~/.config/autostart/bitcoin.desktop</code>.

{{CodeSelect|code=
ln -s ~/.local/share/applications/bitcoin.desktop ~/.config/autostart/bitcoin.desktop
}}

'''4.''' Done.

<code>bitcoin-qt</code> will be automatically started the next time the VM is started.
}}

=== Start from Command Line ===

To start <code>bitcoin-qt</code> (part of Bitcoin Core) from command line, run:

{{CodeSelect|code=
~/bitcoin-*/bin/bitcoin-qt
}}

=== Enable Stream Isolation ==
To enable [[Stream_Isolation|Stream Isolation]] in the client:

* navigate to the settings in the client
* locate the Network tab
* enable the SOCKS proxy as follows: 
** Host: <code>10.152.152.10</code>
** Port: <code>9111</code>
** Proxy: <code>SOCKS5</code>

=== Creating a Watch-Only Wallet ===

# Start <code>bitcoin-qt</code>.
# <code>Window</code> &rarr; <code>Console</code>
# Import address.

Note: replace <code>address</code> with the actual address to be watched.

{{CodeSelect|code=
importaddress address
}}

= See Also =
* [[Bitcoin]]

= Donations =
After installing a Bitcoin client, please consider making a [[Donate|donation]] to {{project name}} to help keep it running for many years to come.

{{Pay Bitcoin Specific}}

= Footnotes =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
