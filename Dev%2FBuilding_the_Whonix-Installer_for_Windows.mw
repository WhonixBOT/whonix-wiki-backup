{{Header}}
{{forkme}}
{{#seo:
|description=How to build the {{project_name}}-Windows-Installer from source code.
}}

= Introduction =

The {{project_name}}-Windows-Installer for Windows is a simple and fast way to set-up {{project name}} on a system running Microsoft Windows.

= Compiling the {{project_name}}-Windows-Installer yourself =

The following instructions will tell you how to build the {{project_name}}-Windows-Installer using the source code provided via Github, as well as the required {{project name}} and VirtualBox files.

= What you'll need =

* The {{project_name}} VirtualBox XFCE ova found here: [[VirtualBox/XFCE]] <ref>
[[VirtualBox/CLI]] unsupported.
</ref>
* The newest build of the VirtualBox-Installer found here under <code>Windows hosts</code>: https://www.virtualbox.org/wiki/Downloads?replytocom=98578
* <code>7zSD.sfx</code> which you may obtain under <code>7-Zip 9.20 Extra</code> here: http://www.7-zip.org/download.html
* <code>7za.exe</code> which you may obtain under <code>7-Zip 16.04 Extra</code> here: http://www.7-zip.org/download.html
* The newest version of Inno Setup Unicode, a tool for easily creating installers, found here: http://www.jrsoftware.org/isdl.php
* {{project_name}}-Windows-UI, which can be built from source via this guide: [[Dev/Building {{project_name_short}}-UI for Windows]]
* The Source for the installer, the logo, the license text, configuration files and the batch file handling the compilation, found here: https://github.com/{{project_name_short}}/{{project_name_short}}-Windows-Installer

= Preparing the files =

1) Install Inno Setup Unicode on your system.

2) Now, we may continue by "taking" the VirtualBox-Installer <code>.exe</code> "apart". This is necessary because the <code>.exe</code> actually contains the Microsoft Software Installation (<code>.msi</code>) based Installers for x64 systems, as well as a compressed <code>.cab</code> file. To separate these files, we have to run the following command on the command line.

<pre>
VirtualBox[Characters based on your version].exe -extract
</pre>

Once this has been finished, a window will open telling you where these three files (<code>VirtualBox[Characters based on your version]amd64.msi</code>, <code>common.cab</code>) have been extracted in.

3) Rename <code>VirtualBox[Characters based on your version]amd64.msi</code> to <code>virtualbox_x64.msi</code> and save all of them in a folder, because they will be needed later.

4) Put the {{project_name}} ova image in the same folder and rename it to <code>whonix.ova</code>.

5) Put the source files (<code>{{project_name_short}}.iss</code>, <code>logo.ico</code>, <code>license.txt</code>, <code>MakeInstaller.bat</code>, <code>config.txt</code>) inside the same folder as the other files.

6) Include {{project_name}}-Windows-UI (<code>{{project_name_short}}.exe</code>), as well as <code>7zSD.sfx</code> and <code>7za.exe</code>.

Now, you should have the following files in the folder:

* <code>{{project_name_short}}.exe</code>
* <code>virtualbox_x64.msi</code>
* <code>common.cab</code>
* <code>whonix.ova</code>
* <code>{{project_name_short}}.iss</code>
* <code>logo.ico</code>
* <code>license.txt</code>
* <code>7zSD.sfx</code>
* <code>7za.exe</code>
* <code>MakeInstaller.bat</code>
* <code>config.txt</code>

With this, the preparation is finished and we can get on to building the Installer.

= Building the Installer =

Building the installer itself is very easy once everything has been properly set up. All you need to do is launch <code>MakeInstaller.bat</code>. Now, the compilation via InnoSetup, the packaging and the combination of all files via 7-Zip, as well as any other required steps are handled automatically. The result is going to be named <code>Install {{project_name_short}}.exe</code>.

This concludes the guide to building the {{project_name}}-Installer for Windows from source.

= The deprecated Installer =

There used to a version of this installer based on NSIS which has been discontinued, due to stability and a host of other issues. It may still be found here: https://github.com/{{project_name_short}}/{{project_name_short}}-Windows-Installer-deprecated

{{Footer}}

[[Category:Development]]
