<!--
Copyright:

   Whonix Tor Browser wiki page Copyright (C) Amnesia <amnesia at boum dot org>
   Whonix Tor Browser wiki page Portions Copyright (C) 2012 adrelanos <adrelanos at riseup dot net>
   
   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 3 of the License, or
   (at your option) any later version.
         
   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
      
   You should have received a copy of the GNU General Public License
   along with this program; if not, write to:

    Free Software Foundation, Inc. 
    51 Franklin St, Fifth Floor
    Boston, MA 02110-1301, USA.

On Debian GNU/Linux systems, the complete text of the GNU General Public
License can be found in the /usr/share/common-licenses' directory.

The complete text of the GNU General Public License can also be found online on gnu.org <https://www.gnu.org/licenses/gpl.html>, in Whonix virtual machine images in /usr/share/common-licenses/GPL-3 file or on Github <https://github.com/Whonix/Whonix/blob/master/GPLv3>.
-->
<!--
The Whonix Tor Browser wiki page is forked from the Tails Browsing the web with Iceweasel page, from this exact source <http://git.immerda.ch/?p=amnesia.git;a=blob;f=wiki/src/doc/anonymous_internet/iceweasel.mdwn;hb=c65e9614d6df9784072ac1e506e2fc83b062f2b0>.
-->
{{Header}}
[[Image:torbrowser.png|400px|Tor Browser, privacy by design. Fighting web fingerprinting and linkability.|thumb]]
= Introduction =
It is recommended<ref>Reasons? See below.</ref>, that you use only Tor Browser for browsing the web in Whonix.

Tor Browser<ref>https://www.torproject.org/projects/torbrowser.html.en</ref> is a fork<ref>https://en.wikipedia.org/wiki/Fork_(software_development)</ref> of the Mozilla Firefox<ref>http://www.mozilla.com/firefox/</ref> web browser, optimized<ref>https://www.torproject.org/projects/torbrowser/design/</ref> and designed<ref>https://www.torproject.org/torbutton/en/design/</ref> for anonymity, developed by The Tor Project<ref>https://www.torproject.org/</ref>. Given Firefox's popularity, many of you have probably used it before and its user interface is like any other modern web browser.

Here are a few things worth mentioning in the context of Whonix.

= Anonymity vs Pseudonymity =
When you were to use other browsers than Tor Browser, your IP/DNS would still be protected by Whonix, but you wouldn't profit from Tor Browser's the protocol level cleanup. Using other browser would be [[DoNot#Do_not_confuse_Anonymity_with_Pseudonymity.|pseudonymous rather than anonymous]].

Tor Browser in comparison to other browser is optimized for anonymity, it contains privacy enhancing patches<ref>https://www.torproject.org/projects/torbrowser/design/#firefox-patches</ref> and add-ons<ref>See below.</ref>. There are no other browsers other than Tor Browser capable of protocol level cleanup. When you use Tor Browser, you will blend in and share the [[Fingerprint]] of other Tor Browser users, which is a good thing.

= HTTPS Encryption =

Using HTTPS instead of HTTP encrypts your communication while browsing the web.

All the data exchanged between your browser and the server you are visiting are encrypted. It prevents the [[Warning#Tor_exit_nodes_can_eavesdrop_on_communications|Tor exit relay to eavesdrop on your communication]].

HTTPS also includes mechanisms to authenticate the server you are communicating with. But those mechanisms can be flawed, [[Warning#Man-in-the-middle_attacks|as explained on our warning page]].

For example, here is how the browser looks like when we try to log in an email account at lavabit.com<ref>http://lavabit.com/</ref>, using their interface<ref>https://lavabit.com/apps/webmail/src/login.php webmail</ref>:

[[Image:lavabit.png]]

Notice the small area on the left of the address bar saying "lavabit.com" on a blue background and the address beginning with "https://" (instead of "http://"):

[[Image:address-bar.png]]

These are the indicators that an encrypted connection using HTTPS<ref>https://en.wikipedia.org/wiki/HTTP_Secure</ref> is being used.

You should try to only use services providing HTTPS when you are sending or retrieving sensitive information (like passwords), otherwise it's very easy for an eavesdropper to steal whatever information you are sending or to modify the content of a page on its way to your browser.

= HTTPS Everywhere =

[[Image:https-everywhere.jpg|HTTPS Everywhere logo|thumb]]

HTTPS Everywhere<ref>https://www.eff.org/https-everywhere</ref> is a Firefox extension shipped in Tor Browser and produced as a collaboration between The Tor Project<ref>https://torproject.org/</ref> and the Electronic Frontier Foundation<ref>https://eff.org/</ref>. It encrypts your communications with a number of major websites. Many sites on the web offer some limited support for encryption over HTTPS, but make it difficult to use. For instance, they may default to unencrypted HTTP, or fill encrypted pages with links that go back to the unencrypted site. The HTTPS Everywhere extension fixes these problems by rewriting all requests to these sites to HTTPS.

To learn more about HTTPS Everywhere you can see:

* the [https://www.eff.org/https-everywhere HTTPS Everywhere homepage]
* the [https://www.eff.org/https-everywhere/faq/ HTTPS Everywhere FAQ]

= Torbutton =

Tor alone is not enough to protect your anonymity and privacy while browsing the web. All modern web browsers, such as Firefox, support JavaScript<ref>https://en.wikipedia.org/wiki/JavaScript</ref>, Adobe Flash<ref>https://en.wikipedia.org/wiki/Adobe_Flash</ref>, cookies<ref>https://en.wikipedia.org/wiki/HTTP_cookie</ref> and other features which have been shown to be able to defeat the anonymity <ref>[[DoNot#Do_not_confuse_Anonymity_with_Pseudonymity.]].</ref> provided by the Tor network.

In Tor Browser all such features are handled from inside the browser, because it's a modified version of Firefox Patches<ref>https://trac.torproject.org/projects/tor/wiki/doc/TorifyHOWTO/WebBrowsers</ref> and it contains an extension called Torbutton<ref>https://www.torproject.org/torbutton/</ref>. These do all sorts of things to prevent the above type of attacks. But that comes at a price: since this will disable some functionalities and some sites might not work as intended. Don't worry too much about this, the vast majority of websites works very well.

To learn more about Torbutton you can see:

* [https://www.torproject.org/torbutton/ the Torbutton homepage]
* [https://www.torproject.org/torbutton/torbutton-faq.html.en the Torbutton FAQ]

To learn more about Data Collection Techniques, Fingerprinting you can see:

* [[Data Collection Techniques]]

= Protection against dangerous JavaScript =

Having all JavaScript disabled by default would disable a lot of harmless and possibly useful JavaScript and render unusable many websites. This would scare away lots of potential users "because it just doesn't work". Torbutton disables all potentially dangerous JavaScript. On the other hand, having a big user base is important for good anonymity as this very interesting mail by Roger Dingledine explains.<ref>http://www.mail-archive.com/liberationtech@lists.stanford.edu/msg00022.html</ref>

That's why '''JavaScript is enabled by default''' in Tor Browser. We consider this as a necessary compromise between security and usability and as of today we are not aware of any JavaScript that would compromise Whonix anonymity.

For more technical details you can refer to the Torbutton design document.<ref>https://www.torproject.org/torbutton/en/design/</ref> Another related discussion justifying why JavaScript is enabled by default in Tor Browser was on tor-talk, "Tor Browser disabling Javascript anonymity set reduction".<ref>https://lists.torproject.org/pipermail/tor-talk/2012-May/024227.html</ref>

= NoScript =

[[Image:noscript.png|NoScript logo|thumb]]

NoScript also comes with Tor Browser and provides many protections, even thought JavaScript is enabled by default. You shouldn't mess with NoScript settings in Tor Browser unless you exactly know what you are doing.

For more information you can refer to the NoScript [http://noscript.net/ website] and [http://noscript.net/features features].

= Tips =
It [https://trac.torproject.org/projects/tor/ticket/7255 might] be better not to maximize the Tor Browser window.

= Tor Browser in Whonix differences =
== Introduction ==
The regular Tor Browser Bundle and Tor Browser in Whonix slightly differ. Tor Browser has been slightly modified by Whonix to work behind the Whonix-Gateway. The network and browser fingerprint however, is the same.

Tor Browser's internal update check mechanism is untouched and works fine. Default homepage is untouched and still https://check.torproject.org.

== New Identity Button ==
The New Identity button om Tor Browser isn't perfect yet (NOT a Whonix issue), there are open bugs.<ref>See [https://trac.torproject.org/projects/tor/query?status=accepted&status=assigned&status=needs_information&status=needs_review&status=new&status=reopened&order=priority&col=id&col=summary&col=keywords&col=status&col=owner&col=type&col=priority&keywords=tbb-linkability tbb-linkability] and [https://trac.torproject.org/projects/tor/query?status=accepted&status=assigned&status=needs_review&status=needs_revision&status=new&status=reopened&order=priority&col=id&col=summary&col=keywords&col=status&col=owner&col=type&col=priority&keywords=tbb-fingerprinting tbb-fingerprinting].</ref>

== Whonix Proxy Settings ==
'''Short''':
You don't need to change any proxy settings in Tor Browser.

'''Long''':
There is no Tor over Tor in Whonix, which would be [[DoNot#Prevent_Tor_over_Tor_scenarios.|recommended against]].

Whonix 6 and above do not modify Tor Browser's defaults (apart from the start-tor-browser script).

== More than one Tor Browser in Whonix ==
For better isolation of different identities. For advanced users. Moved to the [[Advanced_Security_Guide#More_than_one_Tor_Browser_in_Whonix|Advanced Security Guide]].

= Update Tor Browser =

== Introduction ==

There is no auto-update feature for Tor Browser. You will be notified about new Tor Browser versions by [[whonixcheck]]. Additionally, Tor Browser's built in stock update notification mechanism also works in Whonix. Additionally it might be also wise to subscribe to https://blog.torproject.org for news.

== Updating ==
[[File:Tor Browser Update Check_001.png|Tor Browser Updater (Whonix) checking for updates.|thumb]]
[[File:Tor Browser Update Check_002.png|Tor Browser Updater (Whonix) Update Notification|thumb]]
[[File:Tor Browser Update Check_003.png|Tor Browser Updater (Whonix) downloading.|thumb]]
[[File:Tor Browser Update Check_004.png|Tor Browser Updater (Whonix) update done.|thumb]]
[[File:Tor Browser Update Check_005.png|Tor Browser Updater (Whonix) in Terminal|thumb]]

'''Short''':<br />
Tor Browser version check and update (after confirmation) in Whonix can be done with:

<pre>torbrowser -update</pre>

A future update of Tor Browser by The Tor Project might make Tor Browser running in Whonix-Workstation unusable. In case Tor Browser inside Whonix-Workstation breaks, a news with instructions on how to fix the issue will be posted within a few days. If not, the Whonix developers are not aware of the issue.

If the Tor Browser update script is ever broken, you are advised to update manually, see [[Manually_Updating_Tor_Browser]].

'''Long''':<br />
If you update Tor Browser in Whonix and there won't be [[DoNot#Prevent_Tor_over_Tor_scenarios.|Tor over Tor, which is recommended against]]. You can use either (choose one):

* Whonix's {{Code|torbrowser}} updater which comes with Whonix <ref>Because it patches the start-tor-browser script.</ref>
* [[Manually Updating Tor Browser]] instructions <ref>Because it explains how to patch the start-tor-browser script.</ref>
* TBB 3.x (still Alpha) and above <ref>Because it includes tor-launcher, a Vidalia replacement as browser extension. To prevent Tor over Tor, the TOR_SKIP_LAUNCH=1 variable is set in /etc/profile.d/20_torbrowser.sh.

<pre>
## https://trac.torproject.org/projects/tor/ticket/6009
## https://gitweb.torproject.org/tor-launcher.git
export TOR_SKIP_LAUNCH=1
</pre>
</ref>

= Browser Plugins / Flash / Java =

See [[Browser Plugins]].

= Browser Language =
If you want the browser interface in a different language than English, see [[Language]].

= Remove Proxy Settings =
'''This is an advanced topic. You most likely only need it for advanced tunneling scenarios.'''

You could either:

* Use Tor Button's settings dialog to set it to any other proxy or,
* For an alternative method, not using the Tor Button graphical user interface, see footnote <ref>
If you want to set it to no proxy, you could either:

* additionally add in ~/tor-browser_en-US/start-tor-browser below "#!/bin/sh".

<pre>export TOR_TRANSPROXY=1</pre>

* Or add to /etc/environment

<pre>TOR_TRANSPROXY=1</pre>

and reboot.
</ref>.

= Footnotes / References =
<references />

= License =

<pre>Whonix Tor Browser wiki page Copyright (C) Amnesia <amnesia at boum dot org>
Whonix Tor Browser wiki page Portions Copyright (C) 2012 adrelanos <adrelanos at riseup dot net>

This program comes with ABSOLUTELY NO WARRANTY; for details see the wiki source code.
This is free software, and you are welcome to redistribute it
under certain conditions; see the wiki source code for details.</pre>

{{Footer}}

[[Category:Documentation]]
