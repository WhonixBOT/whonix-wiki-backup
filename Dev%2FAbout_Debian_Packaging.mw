__FORCETOC__
{{Header}}
{{#seo:
|description=Debian Packaging of {{project name}} Design Documentation / Recommends vs Depends / --no-install-recommends / Files in Home Folder / Files in /etc/skel
}}

= Recommends vs Depends =
This is about <code>Recommends:</code> vs <code>Depends:</code> in context of <code>debian/control</code>.

<code>debian/control</code>: There are separate [https://github.com/Whonix/anon-meta-packages/blob/master/debian/control meta packages] for dependencies and recommended packages. For example:

* <code>anon-shared-packages-dependencies</code>
* <code>anon-shared-packages-recommended</code>

The reason for this is, because if we used the <code>Recommends:</code> field for {{project name}} meta packages (those who pull the required Debian upstream packages for creating Whonix), we could not install them using <code>apt-get</code> with <code>--install-recommends</code>, which is <code>apt-get</code>'s default option, because that would also install packages recommend by any dependency we install.

On the other hand, if we installed using apt-get <code>--no-install-recommends</code>, the packages Whonix's meta packages recommends, will not get installed.

Therefore splitting them into packages suffixed <code>*-dependencies</code> or <code>*-recommended</code> which both use <code>Depends:</code> and installing them using <code>--no-install-recommends</code> appeared to be the only solution.

Otherwise it would install packages such as <code>virtuoso</code>, <code>soprano</code> and <code>vlc</code>, which are not useful '''in context of''' Whonix-Gateway.

The <code>Recommends:</code> and <code>Suggests:</code> field is still being used but this is mostly useful for one package advertising related packages users using <code>apt-cache show package-name</code> and [[{{project name short}} Packages for Debian Hosts]].

See also [[{{project name short}}_Debian_Packages#Technical_Stuff]].

= Files in Home Folder =
* <code>/home</code> is for users. Not for distribution maintainers.
* Leads to a [[{{project name short}}_Configuration_Files#dpkg_interactive_conflict_resolution_dialog]] when package file is updated, in case file gets modified by the user or a program in the home folder, which is a usability issue, which we try to avoid.
* <code>serious</code> <code>lintian</code> error [https://lintian.debian.org/tags/dir-or-file-in-home.html <code>dir-or-file-in-home</code>].
** Makes the package unfit for inclusion into packages.debian.org (very long term goal) (or other distribution archives).
** Looks amateurish in the eyes of Debian packagers.
* For which user? User <code>user</code> only? Inconsistent for multi user use cases.
* Doesn't work / inconsistent in [https://www.qubes-os.org Qubes] TemplateBasedVMs. Since packages are usually upgraded in TemplateVMs, the change never propagates to the home folder of the TemplateBasedVM since it has an independently persistent home folder.
** Special code would be required to handle these cases. Such as a script that runs after boot but in TemplateBasedVMs that are not DispVM-Templates only. Example:
*** https://github.com/Whonix/tb-updater/blob/master/lib/systemd/system/tb-updater-first-boot.service
*** https://github.com/Whonix/tb-updater/blob/master/usr/lib/tb-updater/first-boot-home-population
*** More code to carry around, understand interactions, bugfix, maintain, explain, audit.
* In most cases there are more suitable mechanisms to reach the implementation goal than writing into the user's home folder.
** If not, the lack of such mechanisms should be discussed with / requested from upstream.

= Files in /etc/skel =
* Files in <code>/etc/skel</code> are not as bad as files in [[#Files in Home Folder|<code>/home</code> folder]].
** Works for any user.
* Inconsistencies. Not deployed through <code>/etc/skel</code> mechanism if file is added to a package after a user account was created. I.e. users who upgraded will miss that file.
** Needs special code to handle such cases.
* If the file from <code>/etc/skel</code> is in the user's home folder, it's hard to update it. Updating the file in <code>/etc/skel</code> won't effect the user's version of the file in the user's home folder.
** Needs special code to handle such cases.

{{Footer}}

[[Category:Design]]
