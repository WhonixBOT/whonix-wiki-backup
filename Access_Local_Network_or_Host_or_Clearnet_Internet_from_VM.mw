{{Header}}
{{title|
title=Access Local Network, Host or Clearnet Internet from Virtual Machine (VM)
}}
{{#seo:
|description=Connections from inside a VM to a service running on the host, inside the local area network (LAN) or clearnet internet. (Esoteric Documentation)
|image=https://www.whonix.org/w/images/4/44/Localaccessnet1163108640.jpg
}}
{{mbox
| type    = notice
| image   = [[File:Ambox_notice.png|40px|alt=Info]]
| text    = This is very esoteric and you probably do not need it! Advanced users only!
}}

= Introduction =
[[File Transfer]] might be a much easier alternative.

= Prerequisite Knowledge =
* [[Stream_Isolation/Easy|stream isolation basic knowledge]]
* [[Stream_Isolation/Disable_Easy|disable stream isolation]]

= Instructions =
The following example uses ssh. It could be replaced with anything else.

If using ssh, how to setup ssh on the host such as public key setup are out of scope for this documentation and considered prerequisite knowledge. This wiki page is focused on connectivity and not on server configuration details.

* These instructions only apply to {{gateway product name}}.
* [[Undocumented]] for {{workstation product name}}. It would probably require a complex setup with a high risk of clearnet leaks. See footnote. <ref>
It would probably require

* A) (worse) enabling IP forwarding inside {{gateway product name}} or,
* B) ("better") to open [[{{gateway product name short}} Firewall|Open an Incoming Port on {{gateway product name}} Firewall]] and running some sort of proxy software under {{Gateway product name}} under user <code>clearnet</code> that permits forwarding to host, local area network or clearnet internet.
</ref> Instead consider [[File_Transfer#SSH_into_{{gateway product name}}|SSH / sshfs (ssh file system) into {{gateway product name}}]], [[File_Transfer#SSH_into_{{workstation product name}}|SSH / sshfs into {{workstation product name}}]] and [[sshfs into Whonix-Workstation]].

== On the Host ==
Install the server software. Note: <code>ssh</code> is an example. Can be replaced.

{{Install Package
|package=ssh
}}

== Inside the VM ==
Install the client software. Note: <code>openssh-client</code> is an example. Can be replaced.

{{Install Package
|package=openssh-client
}}

Create a persistent home folder for user <code>clearnet</code>. (Optional.)

{{Box|text=
{{CodeSelect|code=
sudo usermod -d /home/clearnet clearnet
}}

{{CodeSelect|code=
sudo mkhomedir_helper clearnet
}}
}}

Open a shell under user <code>clearnet</code>.

{{CodeSelect|code=
sudo -u clearnet bash
}}

Permanently disable stream isolation or temporarily circumvent stream isolation.

Syntax:

{{CodeSelect|code=
client-software ip-address
}}

Example:

Note:

* Replace <code>ssh</code> with the desired client software.
* Replace the IP <code>192.168.1.0</code> with the actual local LAN IP of the host.
* Drop <code>.anondist-orig</code> if the command is not uwt wrapped by default.

{{CodeSelect|code=
ssh.anondist-orig 192.168.1.0
}}

= Troubleshooting =
* The host firewall if any might block connections to the service.

= See Also =
* [[Hosting a %28private%29 %28obfuscated%29 bridge or %28exit%29 relay|Hosting a (private) (obfuscated) bridge or (exit) relay]]
* [[Ports]]

= Footnotes =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
