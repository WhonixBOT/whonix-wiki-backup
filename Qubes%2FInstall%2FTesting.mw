{{Title|
title=HowTo: Install the Testers-Only Version of Qubes-Whonix
}}
{{Header}}
{{#seo:
|description=HowTo: Install the Testers-Only Version of Qubes-Whonix
|image=https://www.whonix.org/w/images/5/55/Qubes-logo-icon.png
}}
__NOTOC__
== Introduction ==

{{Testing}}

<u>'''To install the stable version of [[Qubes-Whonix]], see [[Qubes/Install|HowTo: Install the Stable Version of Qubes-Whonix]].'''</u>

{{Qubes Install Introduction}}

== Remove Old Versions ==
{{Qubes Remove Old Versions}}

== Update dom0 ==
=== All Qubes Versions ===
{{Qubes_upgrade_dom0}}

== Configure salt using Qubes dom0 Community Testing Repository ==
Testers only.

The following command will configure Qubes dom0 salt to use Qubes' community-testing-repository for downloading Whonix.  <ref>
* [https://github.com/QubesOS/updates-status/issues/623 qubes-mgmt-salt-dom0-virtual-machines v4.0.13 (r4.0)]
* [https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/pull/15 Qubes-Whonix salt - allow choice of repository / don't hardcode repository]
* [https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/pull/15  whonix: Add pillar file for easily enabling templates testing repository]
</ref>

{{CodeSelect|code=
sudo qubesctl top.enable qvm.whonix-testing pillar=true
}}

== Community Templates Testing Repository ==
Testers only.

View the [https://github.com/QubesOS/qubes-installer-qubes-os/blob/master/qubes-release/qubes-templates.repo <code>/etc/yum.repos.d/qubes-templates.repo</code>] file.

{{CodeSelect|code=
cat /etc/yum.repos.d/qubes-templates.repo
}}

Ensure the file contains <code>[qubes-templates-community-testing]</code>. The following text should be included.

<pre>
[qubes-templates-community-testing]
name = Qubes Community Templates repository
#baseurl = https://yum.qubes-os.org/r$releasever/templates-community-testing
metalink = https://yum.qubes-os.org/r$releasever/templates-community-testing/repodata/repomd.xml.metalink
enabled = 0
fastestmirror = 1
gpgcheck = 1
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-qubes-$releasever-templates-community
</pre>

If the <code>[qubes-templates-community-testing]</code> section is missing, then the user has probably already modified the file. In this case <code>dnf</code> <ref>Which is invoked by <code>qubes-dom0-update</code>.</ref> preserves user changes by saving updates to <code>/etc/yum.repos.d/qubes-templates.repo.rpmnew</code> <ref>Note the file extension <code>.repo.rpmnew</code>.</ref> instead of overwriting the file. Since the <code>.repo.rpmnew</code> file is ignored by <code>qubes-dom0-update</code>, users must manually update the <code>.repo</code> file.

Either:

* Manually add the changes from <code>.repo.rpmnew</code> to the <code>.repo</code> file; or
* Overwrite the <code>.repo</code> file with the <code>.repo.rpmnew</code> file:
** {{CodeSelect|code=
sudo cp /etc/yum.repos.d/qubes-templates.repo.rpmnew /etc/yum.repos.d/qubes-templates.repo
}}
** And then manually add back necessary changes. If the command fails because <code>/etc/yum.repos.d/qubes-templates.repo.rpmnew</code> does not exist, then the user probably has <code>[qubes-templates-community-testing]</code> already.

== Download Whonix Templates and Configure sys-whonix and anon-whonix ==
{{Qubes Download Install}}

== Qubes R4 Only: Optional Whonix DVM Template VM ==
{{Qubes Install DVM}}

== Optional: Updates over Tor ==
{{Qubes Install Updates over Tor}}

== Optional: Enable AppArmor ==
{{Qubes_AppArmor}}

== Update and Launch Applications ==
{{Qubes Install Update and Launch Applications}}

== Additional Information ==  
<div class="toccolours mw-collapsible mw-collapsed">
If you are interested, click on Expand on the right.
<div class="mw-collapsible-content">
* {{Post Install Advice}}
* [[#Stay tuned|Stay tuned]]!

== Footnotes ==
{{reflist|close=1}}
{{Footer}}
[[Category:Documentation]]

== Known Bugs ==
{{Known_bugs}}

==  Stay Tuned ==
{{Stay_tuned}}
</div>
</div>
{{reflist|close=1}}
{{Footer}}
[[Category:Documentation]]
