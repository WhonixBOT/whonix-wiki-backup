{{Header}}
{{Title|
title=Using corridor, a Tor traffic whitelisting gateway with Whonix
}}
{{#seo:
|description=Using corridor, a Tor traffic whitelisting gateway with Whonix
}}
__forcetoc__

= Introduction =
corridor is a Tor traffic whitelisting gateway. It is a filtering gateway. Not a proxying gateway.

https://github.com/rustybird/corridor

It can also be used as a [https://trac.torproject.org/projects/tor/wiki/doc/TorifyHOWTO/BridgeFirewall BridgeFirewall].

= Connecting to corridor before Tor =
== Introduction ==
'''UNFINISHED'''

Testers only!

It is possible to configure Whonix-Gateway (sys-whonix) to use corridor as <u>local</u> proxy to establish the following tunnel:<br />
'''User -> corridor -> Tor -> Internet'''

This is not necessarily more anonymous. It is an additional fail-save Tor traffic whitelisting firewall that would protect from accidental clearnet leaks (hypothetical clearnet leak bugs in Whonix). As [https://github.com/rustybird/corridor corridor's project description] states, quote "it cannot prevent malware on a client computer from finding out your clearnet IP address". corridor is mostly useful for developers and auditors of Whonix, perhaps also for advanced users who would like to have an additional safety net.

It does not increase the tunnel length, i.e. it does not add more relays between you and the destination, if you are interested in that, see [[Tunnels/Introduction]].

If you want to do this, apply the following instructions.

[[Qubes-Whonix]] only! [[Non-Qubes-Whonix]] is [[unsupported]].

== Get the Signing Key ==
'''This chapter is recommended for better security, but not strictly required.''' (See [[Trust]])

Get the signing key.

<code>
gpg --recv-keys "84B5 9BCF C62B 129F E1B0  6D04 469D 78F4 7AAF 2ADF"
</code>

Verify the key using this fingerprint:

<code>
gpg --fingerprint "84B5 9BCF C62B 129F E1B0  6D04 469D 78F4 7AAF 2ADF"
</code>

Should show:

<pre>
pub   4096R/7AAF2ADF 2014-02-13
      Key fingerprint = 84B5 9BCF C62B 129F E1B0  6D04 469D 78F4 7AAF 2ADF
uid       [ unknown] Rusty Bird <rustybird@openmailbox.org>
sub   4096R/763DE63E 2014-02-13
</pre>

== Install git ==
{{Install git}}

== Download corridor ==
Credits: The author of corridor is [https://github.com/rustybird rustybird]. Not [https://github.com/adrelanos Patrick Schleizer].

Git clone corridor from Patrick Schleizer's repository. (Because [https://github.com/rustybird/corridor/issues/9 there are no releases of corridor yet] and because that is the version which was used to write the following guide.)

<pre>
git clone https://github.com/adrelanos/corridor.git
</pre>

== Change Directory ==
<pre>
cd corridor
</pre>

== OpenPGP Verify the Source Code ==
TODO: document

== Install corridor ==
<pre>
sudo make install
</pre>

== TODO ==
sudo apt-get install ipset

<pre>
sudo systemctl enable corridor-data
sudo systemctl enable corridor-init-forwarding 
sudo systemctl enable corridor-init-logged 
sudo systemctl enable corridor-init-snat
</pre>

<pre>
sudo systemctl start corridor-data
sudo systemctl start corridor-init-forwarding 
sudo systemctl start corridor-init-logged 
sudo systemctl start corridor-init-snat
</pre>

<pre>
sudo systemctl status corridor-data
sudo systemctl status corridor-init-forwarding 
sudo systemctl status corridor-init-logged 
sudo systemctl status corridor-init-snat
</pre>

= Footnotes =
<references/>

{{Footer}}

[[Category:Documentation]]
