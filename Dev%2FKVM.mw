{{Header}}

= Links =
* [[Special:AWCforum/st/id306/]]
* [[KVM]]
* [https://github.com/Whonix/Whonix/issues/121 KVM Support github ticket]

= Blockers =
== How to disable KVMClock? ==
How to adjust KVM to have clock=vm on host.

See http://www.linux-kvm.org/page/KVMClock

http://libvirt.org/formatdomain.html#elementsTime

https://www.redhat.com/archives/libvir-list/2010-March/msg01293.html

https://doc.opensuse.org/products/draft/SLES/SLES-kvm_sd_draft/cha.qemu.running.html#cha.qemu.running.gen_opts.rtc

ls /sys/devices/system/clocksource/clocksource0/current_clocksource


To ensure that you have successfully isolated the vm clock form the host's you must run this in the vm:

sudo chmod -x /etc/init.d/sdwdate

You should verify then that no time changes on the host affect the vm.

== Instructions include how to set clock to UTC? ==
How to use -rtc clock=vm ?

== Weaker warning against KVM in whonixcheck ==
As soon as all blockers have been sorted out. We could recommend using [[KVM]] instructions.

= Non-Blockers =
== SPICE security implications ==
http://lists.freedesktop.org/archives/spice-devel/2013-December/015810.html

http://lists.freedesktop.org/archives/spice-devel/2014-January/015815.html

== Enable virtio by default? ==
Probably yes?

https://wiki.debian.org/DebianKVMGuests

== Do [[KVM]] instructions need changes to activate virtio? ==

== How to get virtio running for storage? ==
http://wiki.libvirt.org/page/Virtio

What is http://www.linux-kvm.org/page/Boot_from_virtio_block_device good for? Required?

== How to check if virtio storage access is in use or an eventually existing fallback driver? ==

== How to check if virtio network is really in use or an eventually existing fallback driver? ==
/sys/devices/virtio-pci/0/net/eth0/statistics/rx_bytes seems not to exist on Debian Wheezy.

== How to enable AppArmor / SELinux for KVM on Debian? ==

== How to add a random time offset? ==
Having a small random offset (similar to [[Advanced_Security_Guide#Network_Time_Synchronization]]) would be a good thing.

== Is it possible to add 64, 128 or even more MB to the virtual graphics card using the command line to boost graphics performance? ==

Yes. Can be realised by virsh command as per the steps in here:
http://serverfault.com/questions/346301/how-to-increase-video-memory-in-libvirt-kvm-gui

== Script/automate creation of VM description files? ==
So not following manual instructions is required anymore, but copy/paste some commands end up with the correct VM configuration.

== Script/automate creation and upload of qcow2 images? ==

== Script/automate creation and upload of raw images? ==
Because raw images have better performance than raw images? http://www.linux-kvm.org/page/Qcow2

== Verifiable Builds for qcow2 images==
[[Verifiable Builds]] not implemented yet. The https://github.com/Whonix/Whonix/blob/master/help-steps/analyze_image requires support for qcow2 images.

== Set cluster_size 512 - 2MB for better performance? ==
HulaHoop1 wrote: The qcow2 defaults seem fine to me, however the one parameter of interest we should play with is image's : 'cluster_size' 512 - 2MB the larger the size the better performance but the size is bigger. I think we should try the largest and see if the image size stays reasonable.

= Answered Questions =
== Leak Tests? ==
[[HulaHoop1]] sorted that out in [[Special:AWCforum/st/id306/]].

== Hardware serials? ==
[[HulaHoop1]] sorted that out in [[Special:AWCforum/st/id306/]].

== whonixcheck KVMClock ==
Whonixcheck should check if /sys/devices/system/clocksource/clocksource0/current_clocksource is kvm-clock and warn if it does.

Implemented: https://github.com/Whonix/Whonix/commit/2584c3bdcd9a98181c7535f963a615d257e0fefd

= Footnotes =
<references />

{{Footer}}

[[Category:Documentation]]
