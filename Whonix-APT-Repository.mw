{{Header}}
{{#seo:
|description=Whonix stable / testers / developers APT Repository. How to change from one suite to another? How to disable Whonix's APT Repository?
|image=https://www.whonix.org/w/images/d/d8/Changerepositorygui234234.png
}}

[[File:Whonix_Repository_Wizard_install_updates.png|Whonix Repository Tool|thumb]]
= Whonix APT Repository Overview =

Whonix currently provides four repository choices:

* '''Whonix stable APT repository:''' Recommended for most users. The production level packages focus on providing the most reliable Whonix experience. <ref>If possible, users are requested to run a separate testers-only Whonix-Gateway (<code>sys-whonix</code>) and Whonix-Workstation (<code>anon-whonix</code>) that has the testers repository enabled. If too few people test Whonix, undiscovered issues might migrate to the stable repository.</ref>

* '''Whonix stable-proposed-updates APT repository:''' After testing by a wider audience, these packages migrate to the stable repository. <ref name=rollback>Users are recommended to make a VM clone for this repository just in case it breaks. That way changes can be rolled back if necessary.</ref>

* '''Whonix testers APT repository:''' Recommended for testers, since it is only briefly tested by Whonix developers. It could break apt-get during an upgrade, requiring terminal commands to rectify the problem. <ref name=rollback/>

* '''Whonix developers APT repository:''' As above, except it includes untested changes. These changes ''may'' eventually migrate to the testers repository if the Whonix team is confident these changes will not break the update system. It is not recommended, unless the user is in touch with the development team.


Due to the Whonix design, a user's security is unlikely to be materially affected by preferring the "beta" (stable-proposed-updates) or "alpha" (testers) repositories over the default stable one. <ref>The terms alpha and beta are avoided because they have generally lost their meaning in the software field; many applications remain in alpha or beta status for years, even though they work perfectly well.</ref>

= Change Whonix APT Repository =

It is easy for users to switch between Whonix repositories.

<div class="toccolours mw-collapsible mw-collapsed" style="width:800px">
If you are using [[Qubes-Whonix]], please press expand on the right.
<div class="mw-collapsible-content">
<code>Qubes App Launcher (blue/grey "Q")</code> -> <code>Template: whonix-gw or whonix-ws</code> -> <code>Whonix-Repository</code>

'''Figure:''' ''Wizard Repository Selection'' 

[[File:Whonix_Repository_Wizard_select_repo.png|border]]

'''Figure:''' ''Wizard Auto-update Configuration'' 

[[File:Whonix_Repository_Wizard_install_updates.png|border]]
</div>
</div>

<div class="toccolours mw-collapsible mw-collapsed" style="width:800px">
If you are using [[Non-Qubes-Whonix]], please press expand on the right.
<div class="mw-collapsible-content">
<code>Start Menu</code> -> <code>Applications</code> -> <code>System</code> -> <code>Whonix Repository</code> -> <code>chose either "testers" or "stable" repository</code>

'''Figure:''' ''Start Menu''

[[File:changerepositorygui1.png|600px]]

'''Figure:''' ''System Folder''

[[File:changerepositorygui2.png|600px]]

'''Figure:''' ''Whonix Repository Tool''

[[File:changerepositorygui3.png|600px]]
</div>
</div>

Afterwards, the following window will appear.

'''Figure:''' ''Auto-update Configuration''

[[File:changerepositorygui4.png|600px]]

'''Figure:''' ''Repository Selection''

[[File:changerepositorygui5.png|600px]]

== Command Line Interface ==

<div class="toccolours mw-collapsible mw-collapsed" style="width:800px">
If you are a terminal user, please press expand on the right.
<div class="mw-collapsible-content">

In Konsole, run.

{{CodeSelect|code=
sudo whonix_repository
}}

'''Figure:''' ''Launch Konsole''

[[File:change_repository_terminal1.png|600px]]

'''Figure:''' ''Run whonix_repository''

[[File:change_repository_terminal2.png|600px]]

Choose one of the following repositories based on personal preferences.

<pre>
sudo whonix_repository --enable --repository stable
</pre>

<pre>
sudo whonix_repository --enable --repository stable-proposed-updates
</pre>

<pre>
sudo whonix_repository --enable --repository testers
</pre>

<pre>
sudo whonix_repository --enable --repository developers
</pre>
</div>
</div>

To use the repository, follow the [[Security_Guide#Updates|usual update instructions]].

= Disable Whonix APT Repository =

== Introduction ==

For [[Trust]] reasons some users may prefer not to use Whonix APT Repository. In that case, it is necessary to  [[Dev/BuildDocumentation|update Debian packages in Whonix from source code]], which is inconvenient.

== Whonix Built from Source Code ==

If a user [[Dev/Build Documentation|builds Whonix]] from source code, Whonix APT Repository is not added by default. The only exception is if users [[Template:Build Documentation Whonix APT Repository|opt in]] using a build configuration. It is also possible to [[#Verify Disabled Whonix APT Repository|verify]] that it is already disabled.

== Whonix Default-Download-Version ==
Whonix APT repository is already enabled, it can be disabled via the GUI or terminal Whonix repository tool.

'''Qubes-Whonix'''

<code>Qubes App Launcher (blue/grey "Q")</code> -> <code>Template: whonix-gw or whonix-ws</code> -> <code>Whonix-Repository</code> -> <code>"No, I will manually update from source code."</code>

'''Non-Qubes-Whonix'''

<code>Start Menu</code> -> <code>Applications</code> -> <code>System</code> -> <code>Whonix Repository</code> -> <code>"No, I will manually update from source code."</code>

'''Command Line Interface'''

To disable it in a terminal, run.

{{CodeSelect|code=
sudo whonix_repository --disable
}}

Users can [[#Verify Disabled Whonix APT Repository|optionally verify]] Whonix APT repository is disabled after this procedure.

== Verify Whonix APT Repository is Disabled ==

To check if Whonix APT repository was successfully disabled, run the following tests.

Use {{Code2|apt-key}}.

{{CodeSelect|code=
sudo apt-key finger
}}

This test should not show any Whonix-specific keys, such as [[Patrick Schleizer|Patrick Schleizer's OpenPGP key]].

Next check if {{Code2|/etc/apt/sources.list.d/whonix.list}} exists. If it does not exist, the procedure was successful. Extra cautious users should also refer to the following footnote. <ref>
The following is not strictly necessary, since the whonix_repository tool has never written another sources.list file other than {{Code2|/etc/apt/sources.list.d/whonix.list}}.

Examine the {{Code2|/etc/apt/sources.list}} file.

{{CodeSelect|code=
cat /etc/apt/sources.list
}}

It should not include the Whonix APT Repository.

Next examine the {{Code2|/etc/apt/sources.list.d/}} folder as well.

{{CodeSelect|code=
cat /etc/apt/sources.list.d/*
}}
</ref>

= Advanced =
== Repository Location URI ==

To set the default Whonix repository URI, choose one of the following. 

Default http URI.

{{CodeSelect|code=
sudo whonix_repository --baseuri http://deb.whonix.org --enable --repository stable
}}

Experimental https URI.

{{CodeSelect|code=
sudo whonix_repository --baseuri https://deb.whonix.org --enable --repository stable
}}

Onion URI. See also [[Onionizing Repositories]].

{{CodeSelect|code=
sudo whonix_repository --baseuri tor+http://deb.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion --enable --repository stable
}}

To undo any changes, just run the [[#Change Whonix APT Repository|Whonix APT Repository Tool]] again.

= See Also =
* [[Trust]]
* [[Whonix Debian Packages|Whonix Debian Packages, which ones are safe to remove?]]
* [[Dev/BuildDocumentation|Building/upgrading Whonix's debian packages from source code]]

= Footnotes / References =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
