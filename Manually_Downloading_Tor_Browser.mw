{{Header}}

= Introduction =
The Pre Install Advice page contains a chapter [[Pre_Install_Advice#Tor_Browser_Bundle|recommending]] to learn the basics about torproject.org's TBB before starting with Whonix.

For example at time of writing the recommended way by The Tor Project to update TBB is still to rename your old folder (for example /home/user/tor-browser_en-US to something else) (or delete it) and to extract the newly downloaded version. You won't know about such glitches, if you don't know the basics, namely how to TBB on the host.

General questions like how verification of TBB works, what that's good for etc. are off topic here, since we have to unfortunately regard this as basic knowledge. Whonix isn't a standalone package in that sense and just has a small team while torproject.org has a much wider community and dedicated support staff. Again, you need to imagine you know nothing about Whonix and need to learn basics about TBB in the first place.

If you are experiencing an issue with Tor Browser in Whonix (for example, some page does not load), please check first if you experience the same issue with TBB on your host. If that is the case, Whonix isn't responsible for this error. If you care to see the bug fixed, you are advised to search torproject.org's [http://trac.torproject.org/ bug tracker] and to open a bug upstream if no one else reported the issue yet. When upstream (The Tor Project) fixes the issue, the issue will most likely also get fixed in Whonix.

Sometimes Whonix's Tor Browser Updater breaks, because torproject.org changes the way TBB can be downloaded/verified. Since Whonix's Tor Browser Updater is maintained by the Whonix team, The Tor Project is not responsible for it and it and therefore should be discussed in Whonix's User Help Forum or Whonix's Bug Tracker.

At time of writing, there were never any errors in Tor Browser (such as when a page doesn't load) caused by Whonix.

= Manually updating Tor Browser (TBB stable version) =
(1) Go to https://www.torproject.org/ and/or http://idnxcnkne4qt76tg.onion/ and download the Tor Browser Bundle for Linux 32 bit. Store it in ''/home/user/''.

(2) Read https://www.torproject.org/docs/verifying-signatures.html.en and/or http://idnxcnkne4qt76tg.onion/docs/verifying-signatures.html.en and learn about gpg verification.

(3) Go to https://www.torproject.org/docs/signing-keys.html.en and/or http://idnxcnkne4qt76tg.onion/docs/signing-keys.html.en to get the gpg keys.

(4) Verify the Tor Browser Bundle download.

(5) Go into ''/home/user/'' with the file manger. (Dolphin)

(6) If you still have the old version of TBB opened (because you are probably reading this from the old TBB), close it. (copy the next steps to Kwrite if necessary)

(7) Rename your old TBB /home/user/tor-browser_en-US to something else.

(8) Extract the Tor Browser Bundle. Right click on the downloaded archive -> extract -> extract archive here.

(9) In case you downloaded another version than ''en-US'', rename the tor-browser_''lang'' folder to ''tor-browser_en-US''. This is important, because the paths in the following script are hardcoded.

(10) Go into the ''/home/user/tor-browser_en-US'' folder.

(11) Delete ''start-tor-browser'' or move it to the ''/home/user/tor-browser_en-US/Docs'' folder.

(12) Create a new file within the ''/home/user/tor-browser_en-US/'' folder called ''start-tor-browser'' with the following content.

<pre>
#!/bin/bash
## Whonix Tor Browser start script

export TOR_SKIP_LAUNCH=1
    
cd ~
~/tor-browser_en-US/App/Firefox/firefox --profile ~/tor-browser_en-US/Data/profile
    
## End of Whonix Tor Browser start script
</pre>

(13) Make the ''start-tor-browser'' script executable. Right click on ''start-tor-browser'' -> Properties -> Permissions -> enable the ''Is executable'' box -> ok.

(14) If you want to make 100% sure you never have Tor over Tor, you must shut down Whonix-Gateway while doing the following.

(15) Delete /home/user/my_tor-browser_en-US/App/tor.

(16) If there is '''no''' green Vidalia icon in the task bar, everything is fine.

(17) Start Tor Browser and run

<pre>ps aux | grep tor</pre>

If you see something like.

<pre>109 /usr/sbin/tor</pre>

Or.

<pre>/home/user/my_tor-browser_en-US/App/tor</pre>

Something went wrong and you're running Tor over Tor, which is recommended against.

(18) If the tests results are as expected, everything went fine.

(19) Don't forget to restart Whonix-Gateway, if you shut it down in step (13).

(20) Done.

= General information about Tor Browser in Whonix =
See [[Tor Browser]].

= Manually updating Tor Browser (TBB Alpha version) =
'''Only if you are using the Alpha version of TBB (Tor Browser Bundle 3.0alpha2 and above)!''' If you are using TBB Stable version (below TBB 3.0), please follow the instructions above.

(1) Go to https://www.torproject.org/ and/or http://idnxcnkne4qt76tg.onion/ and download the Tor Browser Bundle for Linux 32 bit. Store it in ''/home/user/''.

(2) Read https://www.torproject.org/docs/verifying-signatures.html.en and/or http://idnxcnkne4qt76tg.onion/docs/verifying-signatures.html.en and learn about gpg verification.

(3) Go to https://www.torproject.org/docs/signing-keys.html.en and/or http://idnxcnkne4qt76tg.onion/docs/signing-keys.html.en to get the gpg keys.

(4) Verify the Tor Browser Bundle download.

(5) Go into ''/home/user/'' with the file manger. (Dolphin)

(6) If you still have the old version of TBB opened (because you are probably reading this from the old TBB), close it. (copy the next steps to Kwrite if necessary)

(7) Rename your old TBB /home/user/tor-browser_en-US to something else. 

(8) Extract the Tor Browser Bundle. Right click on the downloaded archive -> extract -> extract archive here.

(9) In case you downloaded another version than ''en-US'', rename the tor-browser_''lang'' folder to ''tor-browser_en-US''. This is important, because the paths are hardcoded.

(10) Done.

{{mbox
| type       = notice
| image      = [[File:Ambox_notice.png|40px|alt=Info]]
| text       = In case you are wondering if this will result in [[DoNot#Prevent_Tor_over_Tor_scenarios.|Tor over Tor]]... No, because since Whonix version 6, Tor Browser and Whonix play well together.<ref>Technically, rinetd listens on {{Code2|127.0.0.1}} {{Code2|9150}} and {{Code2|9151}} (TBB's default ports) and forwards them to Whonix-Gateway {{Code2|192.168.0.10 9150}} (where a Tor SocksPort is listening) and {{Code2|9151}} (where [[Dev/CPFP|Control Port Filter Proxy]] is listening). Tor does not get started by {{Code2|[https://gitweb.torproject.org/tor-launcher.git torbrowser-launcher]}} because the {{Code2|[https://trac.torproject.org/projects/tor/ticket/6009 TOR_SKIP_LAUNCH]}} environment variable has been set set to {{Code2|1}} in {{Code2|/etc/profile.d/}}. See also [[Dev/Dummy_Tor]].</ref>
}}

= Footnotes =
<references />

{{Footer}}

[[Category:Documentation]]
