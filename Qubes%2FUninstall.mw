{{DISPLAYTITLE:Uninstall Qubes-Whonix TemplateVMs}}
{{Header}}
{{#seo:
|description=How to uninstall Qubes-Whonix.
|image=https://www.whonix.org/w/images/5/55/Qubes-logo-icon.png
}}

= Introduction =
{{mbox
| image   = [[File:Ambox_warning_pn.svg.png|40px]]
| text    = These instructions completely remove the Qubes-Whonix TemplateVMs. 
}}


This procedure is useful before a complete re-installation of Qubes-Whonix. <ref>Or if deciding not to use Whonix at all.</ref> Note that removal or recreation of Whonix ProxyVMs (<code>sys-whonix</code>) and AppVMs (<code>anon-whonix</code>) is a separate issue. 

== Unset or Remove Whonix TemplateVM Dependencies ==

If the Whonix TemplateVM is set as the underlying template for any VMs, it cannot be uninstalled. Either:
* Delete the VMs that depend on the Whonix template(s): <code>Qube Manager</code> -> <code>right-click Whonix TemplateVM</code> -> <code><u>D</u>elete qube</code> ; or
* Unset the TemplateVM dependency using Qube Manager: 
** Create a <code>dummy template</code>. <ref>
* https://www.qubes-os.org/doc/reinstall-template/
* https://github.com/QubesOS/qubes-issues/issues/4437
</ref>

{{CodeSelect|code=
mkdir /var/lib/qubes/vm-templates/dummy
}}
{{CodeSelect|code=
touch /var/lib/qubes/vm-templates/dummy/{root.img,private.img}
}}
{{CodeSelect|code=
qvm-add-template dummy
}}

** Shut down the Whonix TemplateVM: <code>Qube Manager</code> -> <code>right-click Whonix TemplateVM</code> -> <code><u>S</u>hutdown qube</code>
** Set the dummy template: <code>right-click VM</code> -> <code>Qube s<u>e</u>ttings</code> -> <code>Template: <dummy template></code>

The advantage of the second option is being able to keep any VMs, along with the user storage contents. Note that the root storage will still be lost when uninstalling the TemplateVM, so it is safest to backup anything important first.

== Uninstall Whonix TemplateVMs ==

If the TemplateVM was customized, any changes will obviously be lost when uninstalling it; so consider backups of anything important first.

=== Whonix-Gateway ===

# Open a dom0 terminal: <code>Qubes App Launcher (blue/grey "Q")</code> -> <code>System Tools</code> -> <code>Xfce Terminal</code>
# Uninstall all Qubes-Whonix-Gateway template packages matching <code>qubes-template-whonix-gw*</code>: 

{{CodeSelect|code=
sudo dnf remove qubes-template-whonix-gw*
}}

Review the <code>dnf</code> confirmation output before proceeding.

=== Whonix-Workstation ===

# Open a dom0 terminal: <code>Qubes App Launcher (blue/grey "Q")</code> -> <code>System Tools</code> -> <code>Xfce Terminal</code>
# Uninstall all Qubes-Whonix-Workstation template packages matching <code>qubes-template-whonix-ws*</code>:
{{CodeSelect|code=
sudo dnf remove qubes-template-whonix-ws*
}}

Review the <code>dnf</code> confirmation output before proceeding.

== Remove the Whonix-Workstation DisposableVM Template ==

The <code>{{whonix-ws}}-dvm</code> domain must be manually removed.

Open a dom0 terminal.

{{CodeSelect|code=
qvm-prefs {{whonix-ws}}-dvm default_dispvm ""
}}

{{CodeSelect|code=
qvm-remove {{whonix-ws}}-dvm
}}

= Footnotes =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
