{{Header}}
{{#seo:
|description=Getting Transparent Proxying working for Whonix-Gateway's own traffic.
}}

'''Advanced users only!''' <br />
'''Usually recommended against and unnecessary!'''

{{TorifiedGateway}}

Whonix-Workstation has the transparent proxying feature enabled by default. (You could [[Stream_Isolation#Better_Protection|disable it]] if you wanted to.)

Whonix-Gateway has by default no transparent proxying feature. This article explains how you could enable it. There are no known use cases besides [[Dev/Leak Tests|leak testing]].

On Whonix-Gateway.

For explanation, open {{Code|/etc/whonix_firewall.d/30_user}} and read what the settings {{Code|GATEWAY_TRANSPARENT_TCP}} and {{Code|GATEWAY_TRANSPARENT_DNS}} are about.

<pre>
kwrite /etc/whonix_firewall.d/30_user
</pre>

Create a file {{Code|/etc/whonix_firewall.d/50_user}}.

<pre>
kdesudo kwrite /etc/whonix_firewall.d/50_user
</pre>

Add the following content.

<pre>
GATEWAY_TRANSPARENT_TCP=1
GATEWAY_TRANSPARENT_DNS=1
</pre>

Save.

Reload Whonix's Firewall.

<pre>
sudo whonix_firewall
</pre>

Open {{Code|/etc/tor/torrc}}.

<pre>
kdesudo kwrite /etc/tor/torrc
</pre>

Add the following content.

<pre>
TransPort 127.0.0.1:9041
DnsPort 127.0.0.1:54
</pre>

Reload Tor.

<pre>
sudo service tor reload
</pre>

Test if you wish.

<pre>
curl.whonix-orig --tlsv1 --proto =https -H 'Host: check.torproject.org' -k https://38.229.72.22 | grep IP
</pre>

= See Also =
* [[Whonix-Gateway System DNS|Getting the global system DNS resolver working on Whonix-Gateway (usually recommended against and unnecessary)]]

= Footnotes =
<references />

{{Footer}}

[[Category:Documentation]]
