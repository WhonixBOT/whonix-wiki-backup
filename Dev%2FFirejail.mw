
== General Topics ==

General notes about Firejail settings:

* The master firejail.profile contains global settings.

*  New profiles or tweaked ones that override the default ones go under ~/.config/firejail (path configurable if needed). The default ones exist under /etc/firejail

* Arch guide: https://wiki.archlinux.org/index.php/Firejail#Using_Firejail_by_Default
specifies the ways to set programs to automatically start contained.

* Xpra is not a hard-coded dependency out of consideration for headless systems. TODO: Decide which anon-shared package to add it to.

* Creating symlinks to start programs automatically under firejail is as simple as running <code>sudo firecfg</code>. This covers all software on the system that has a firejail profile.<ref>https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=822693</ref> To list all symlinks: <code>firecfg --list</code> and to reverse this action: <code>firecfg --clean</code>

* To integrate with Firejail, the [https://git.schwanenlied.me/yawning/tor-firejail/src/master/start-tor-browser script] developed by Yawning is meant to replace the one in this path: /home/user/.tb/tor-browser/Browser/start-tor-browser
While the profile can reside under ~/.config/firejail<ref>https://git.schwanenlied.me/yawning/tor-firejail</ref><ref>https://lists.torproject.org/pipermail/tor-dev/2016-May/010947.html</ref>

* A short term workaround until the proposed upstreaming of start-tor-browser <ref>https://trac.torproject.org/projects/tor/ticket/19055</ref> happens:  is to append Firejail to all launcher commands under: /usr/share/applications. Reasoning: TBB folder not visible to users. For a user to accidentally execute Tor Browser without protection, they have to go out of their way to find and launch the start-tor-browser script in the hidden TBB folder. In TBB's use-model we don't have to worry about command line users because TBB is a GUI app first and foremost. Visual indicators further help warn against accidental execution in the unlikely event it happens. If they use command line the might as well put Firejail before the script name. This solution is tested and working and survives TBB upgrades.




=== Integration Roadmap ====

* Firejail should probably get its own Whonix helper package to include custom profiles (Yawning's TBB). Xpra dependency should be coded there.

* Changes to TBB launchers required.

* Wait for version newer than 0.9.40 to hit Debian repos because it resolves Iceweasel profile problems. 

* Decide on whether to introduce pinned packages and sid repos by default to access the newer version ASAP.

* Decide on application launcher paths. Documentation in Arch is contradictory to Debian:

"Some applications use non standard paths. For these you will want to copy the .desktop launchers from /usr/share/applications/*.desktop to ~/.local/share/applications/ and then proceed to include firejail (and possibly seccomp) on the EXEC line. Some applications use non standard paths. For these you will want to copy the .desktop launchers from /usr/share/applications/*.desktop to ~/.local/share/applications/ and then proceed to include firejail (and possibly seccomp) on the EXEC line." <ref>https://wiki.archlinux.org/index.php/Firejail</ref>

There is no  ~/.local/share/applications/ folder in Debian AFAIK. What is the difference between both paths? Shouldn't bother if the workaround works equally well.

== See Also ==

* https://forums.whonix.org/t/firejail-seccomp-more-options-for-program-containment/1030
* https://forums.whonix.org/t/looking-for-firejail-seccomp-maintainer-for-better-security/2211

== Comments ==

Add discussion points here.
