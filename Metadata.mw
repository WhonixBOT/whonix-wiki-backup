{{Header}}
{{#seo:
|description=Anonymize Files - Clear Metadata - Remove Location Tracking - Use the Metadata Anonymisation Toolkit (MAT)
|image=https://www.whonix.org/w/images/9/94/Mat.png
}}

[[File:MATWhonix.png|MAT - Metadata Anonymisation Toolkit|thumb]]

= What is Metadata? =
{{mbox
| image   = [[File:Ambox_warning_pn.svg.png|40px]]
| text       = 
'''Warning:''' Office documents, pictures, videos and other files contain significant information in the meta tags that may de-anonymize the author. Before they are uploaded to the Internet, this metadata should be removed.
}}


For more information about metadata, refer to the [https://mat.boum.org/ Metadata Anonymisation Toolkit] ([http://www.webcitation.org/6dKiSqVyH w]) website. Further information can also be found on the Warning page; see [[Warning#Whonix_does_not_Clear_Document_Metadata|Whonix does not clear Document Metadata]].

= Guidelines =
Metadata cannot be used to de-anonymize the user if the guidelines in this section are followed.

== General Principles ==

* Always think twice before uploading anything.
* Only upload files which were either created or downloaded inside the Whonix-Workstation and personally stripped of metadata.
* Before uploading photos or videos, it is safest to utilize a separate camera that is only used for anonymous purposes (unless the user is an expert).

== Specific File Format Data Leakage ==

* Anonymous photo sharing requires the user to consider both metadata <u>and</u> [[Surfing_Posting_Blogging#Photographs|fingerprintable camera anomalies]].
* Files created by editing software -- such as Microsoft Word, LibreOffice, Excel and so on -- can leak information about incremental edits and updates. Re-saving a final copy of the document might be enough to mitigate this risk, but further research is required.
* If [https://en.wikipedia.org/wiki/JPEG JPEG images] are stored in PDFs in their complete form without modification, EXIF data can be leaked.
* This is an inexhaustive list of file format leak problems and the user should understand that file format specifications are not designed with potential adversaries in mind. <ref name=an-overview-of-pdf-potential-leaks>
https://speakerdeck.com/ange/an-overview-of-pdf-potential-leaks</ref> 

== Scrubbing Metadata ==

Generally speaking, the only reliable way to scrub any type of document and avoid unintended leaks is to first use Imagemagick to convert them to images, then import them into a new PDF before distribution. This technique is reportedly used by advanced adversaries. <ref name=an-overview-of-pdf-potential-leaks /> This recommendation comes with an important caveat: untrusted files that are downloaded cannot be sanitized in this way, since malicious data can be crafted to remain intact even if processed by a format encoder. Therefore, the best way to interact with these files is to utilize the Whonix-Workstation and sanitize them with the pre-installed [https://mat.boum.org/ MAT] program. <ref>Refer to the Metadata Anonymisation Toolkit website for further information. ([http://www.webcitation.org/6dKiSqVyH w])</ref>

Failure to remove metadata does not always lead to de-anonymization, but it still may result in identity correlation to the same pseudonym. Consider the following example: 

* A video is created with media software and uploaded to a popular video portal under pseudonym A.
* Another video is created using the same software and computer and uploaded under pseudonym B.
* An adversary who checks the metadata of both video files would quickly correlate both pseudonyms.

== Warning on Leaking Original Source Documents ==

{{mbox
| image   = [[File:Ambox_warning_pn.svg.png|40px]]
| text       = In recent times, leakers of high-value or high-security source documents have been identified (and jailed) via [http://blog.fastforwardlabs.com/2017/06/23/fingerprinting-documents-with-steganography.html embedded steganographic messages] or the [https://www.zachaysan.com/writing/2017-12-30-zero-width-characters zero-width space (homoglyph substitution)] technique. <ref>In the latter method, the leaker is unable to see additional zero-width or zero-width non-joiner characters which are used to fingerprint text. Even a single type of zero-width character provides enough bits of entropy to fingerprint the relevant text.</ref>
}}


It is highly unlikely that file cleaners will defeat these advanced fingerprinting methods. Persons who are considering leaking valuable, original source documents should adopt a far safer approach to avoid the threat of embedded signatures. Recommendations include: <ref>https://www.zachaysan.com/writing/2017-12-30-zero-width-characters</ref>

* Manually retype the related disclosures in a basic text editor which can easily be stripped of meta-data.
* Only leak short excerpts so the amount of information shared is kept to a minimum.
* At all times, avoid releasing the original documents in their raw form.
* Source the same documents from multiple leakers to confirm the content is identical byte-wise.

Specific cleaning tools do exist that strip non-whitelisted characters from the text. However, this is the least preferred approach for "safely" sharing documents if a user's freedom depends upon it.

= MAT - Metadata Anonymisation Toolkit =

{{mbox
| image   = [[File:Ambox_warning_pn.svg.png|40px]]
| text       = MAT maintenance and development is currently on hold, due to the author's ill health. As a consequence, the current version does not work with Python3 and may have unresolved bugs. Use at your own risk!
}}


At the time of writing, the latest version of MAT currently supports the following file formats: <ref name=MAT>https://mat.boum.org/</ref>

* Portable Network Graphics (.png).
* JPEG (.jpg, .jpeg, …).
* TIFF (.tif, tiff, …).
* Open Documents (.odt, .odx, .ods, …).
* Office OpenXml (.docx, .pptx, .xlsx, …).
* Portable Document Fileformat (.pdf).
* Tape ARchives (.tar, .tar.bz2, …).
* MPEG AUdio (.mp3, .mp2, .mp1, …).
* Ogg Vorbis (.ogg, …).
* Free Lossless Audio Codec (.flac).
* Torrent (.torrent).

Users should carefully note MAT's limitations: <ref name=MAT />

<blockquote>
Why MAT is not the ultimate solution?<br />
<br />
Mat only removes metadata from your files, it does not anonymise their content, nor handle watermarking, steganography, or any overly customized metadata field/system. Also please note that MAT does its best to scrub as much metadata as possible, it is not really efficient at scrubbing embedded media inside complex formats. For examples, images embedded inside PDF may not be cleaned!
</blockquote>

== Use Instructions ==

Start MAT.

{{Box|text=
<u>If you are using [[{{q_project_name_short}}|{{q_project_name}}]]</u>, complete the following steps.

'''1.''' <code>
Qubes App Launcher (blue/grey "Q")</code> -> <code>Domain: Whonix-Workstation AppVM (commonly named anon-whonix)</code> -> <code>Add more shortcuts</code> -> <code>Select MAT from the ''Available'' applications list</code> -> <code>Press the '''>''' button</code> -> <code>OK</code>

'''2.''' <code>Qubes App Launcher (blue/grey "Q")</code> -> <code>Domain: {{Code2|anon-whonix}}</code> -> <code>MAT</code>

<u>If you are using a graphical Whonix-Workstation</u>, complete the following steps.

<code>
Start Menu</code> -> <code>Applications</code> -> <code>Utilities</code> -> <code>Metadata Anonymisation Toolkit
</code>

<div class="toccolours mw-collapsible mw-collapsed">
<u>If you are using a terminal Whonix-Workstation</u>, press on expand on the right.
<div class="mw-collapsible-content">

On the command line, run.

{{CodeSelect|code=
mat
}}

Or for the graphical user interface, run.

{{CodeSelect|code=
mat-gui
}}
</div>
</div>
}}

After starting MAT, add the files to be cleaned to the list. The "dirty" state indicates that the file contains removable metadata. After cleaning, the cleaned files will be created in the same directory as the original files with the extension {{code|.cleaned}}

= Other Tools =
* [https://packages.debian.org/search?keywords=Exiftool Exiftool] - a Perl application for editing metadata in a wide variety of files.
* [https://packages.debian.org/search?keywords=exiv2 exiv2] - a C++ application to manage image metadata.
* [https://packages.debian.org/search?keywords=jhead jhead] - a JPEG header manipulation tool.
* [https://0xacab.org/jvoisin/mat2 mat2] - a metadata removal tool written in python3 which supports a wide range of commonly used file formats.
* [https://github.com/kanzure/pdfparanoia pdfparanoia] - a tool to remove watermarks from academic papers.

= See Also =
* [[Surfing Posting Blogging]]

= Footnotes =
{{reflist|close=1}}

= License =
{{JonDos}} The Metadata page contains content from the JonDonym documentation [https://anonymous-proxy-servers.net/en/help-live-cd/jondo-live-cd9.html Anonymizing Documents and Pictures] page.

{{Footer}}

[[Category:Documentation]]
