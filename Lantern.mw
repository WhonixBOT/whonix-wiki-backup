<languages />
<translate>
<!--T:1-->
{{Header}}
{{Title|
title=Lantern - Alternative Censorship Circumvention Tool
}}
{{#seo:
|description=Alternative Censorship Circumvention. Lantern over Tor. Combining Whonix with Lantern. Connecting to Lantern before Tor (User -> Lantern -> Tor -> Internet ). Alternative to Tor bridges.
}}

<!--T:2-->
__forcetoc__

= Introduction = <!--T:3-->
Lantern is a censorship circumvention tool, an alternative to Tor [[bridges]]. 

<!--T:4-->
TODO: expand

= Connecting to Lantern before Tor = <!--T:5-->
Testers only!

<!--T:6-->
It is possible to configure Tor to use Lantern as proxy to establish the following tunnel:<br />
'''User -> Lantern -> Tor -> Internet'''

<!--T:7-->
If you want to do this, apply the following instructions.

<!--T:8-->
[[Qubes-Whonix]] only! [[Non-Qubes-Whonix]] is [[unsupported]].

<!--T:9-->
In case you want to do that, it is recommended to read the following related wiki article: [[Tunnels/Introduction]]

<!--T:10-->
For current limitations, see also blog post / forum discussion:<br />
https://www.whonix.org/blog/connecting-to-lantern-before-tor

<!--T:11-->
Create a new standalone ProxyVM called Lantern-Gateway based on Debian-8 template.

<!--T:12-->
In Lantern-Gateway ProxyVM, {{Firewall Unload Home Folder}}

<!--T:13-->
IP Forwarding in the Lantern-Gateway ProxyVM could/should be disabled since it is not required.

<!--T:14-->
<pre>
sudo sysctl -w net.ipv4.ip_forward=0
</pre>

<!--T:15-->
Install missing lantern dependency. <ref>
[https://github.com/getlantern/lantern/issues/4836 Lack of a dependency declaration when installing Lantern on Debian]
</ref>

<!--T:17-->
<pre>
sudo apt-get install libappindicator3-1
</pre>

<!--T:18-->
Check if the downloaded deb file is still the right file. Go to https://getlantern.org/ and check for desktop, linux downloads.

<!--T:19-->
<pre>
curl --tlsv1.2 --proto =https https://s3.amazonaws.com/lantern/lantern-installer-beta-64-bit.deb --output ~/lantern-installer-beta-64-bit.deb
</pre>

<!--T:20-->
Install lantern. TODO<ref>
TODO:

<!--T:21-->
Check if there are lantern development tickets for the following tasks. If not, create them. If these exist, link them from the footnote here.

<!--T:22-->
* ask lantern developers for a proper Debian deb package: https://github.com/getlantern/lantern/issues/4836
* ask lantern developers for a Debian APT repository with lantern: https://github.com/getlantern/lantern/issues/4837
* post a Debian lantern [https://wiki.debian.org/RFP RFP (request for packaging)]
* ask lantern developers to add lantern to official Debian repositories: https://github.com/getlantern/lantern/issues/4837
</ref>

<!--T:23-->
<pre>
sudo dpkg -i ~/lantern-installer-beta-64-bit.deb
</pre>

<!--T:24-->
Start lantern while listening on all, not just the internal, network interfaces so it gets reachable from sys-whonix.

<!--T:25-->
<pre>
lantern -addr 0.0.0.0:8788
</pre>

<!--T:26-->
<ref>
In Lantern-Gateway, check if lantern's http port is functional.

<!--T:27-->
<pre>
curl --tlsv1 --proto =https --proxytunnel --proxy 127.0.0.1:8788 https://check.torproject.org
</pre>

<!--T:28-->
In Lantern-Gateway, check if lantern's socks port is functional.

<!--T:29-->
<pre>
curl --tlsv1.2 --proto =https --socks5-hostname socks5h://127.0.0.1:8788 https://check.torproject.org
</pre>
</ref>

<!--T:30-->
Shut down sys-whonix if running. Set sys-whonix NetVM to Lantern-Gateway. Restart sys-whonix.

<!--T:31-->
<ref>
In sys-whonix, test if Tor is able to the http proxy that Lantern is providing.

<!--T:32-->
<pre>
curl.anondist-orig --tlsv1 --proto =https --proxytunnel --proxy 10.137.11.1:8788 https://check.torproject.org
</pre>

<!--T:33-->
In sys-whonix, test if Tor is able to the socks proxy that Lantern is providing.

<!--T:34-->
<pre>
curl.anondist-orig --tlsv1.2 --proto =https --socks5-hostname socks5h://10.137.11.1:8788 https://check.torproject.org
</pre>
</ref>

<!--T:35-->
In sys-whonix. {{Open_/etc/tor/torrc}}

<!--T:36-->
Add the following. 10.137.11.1 is just an example. You need to replace 10.137.11.1 with the IP of your Lantern-Gateway ProxyVM. You could run the following command within sys-whonix to find out the IP of your Lantern-Gateway ProxyVM.
<code>qubesdb-read /qubes-gateway</code>

<!--T:37-->
<pre>
HTTPSProxy 10.137.11.1:8788
</pre>

<!--T:38-->
TODO<ref>
TODO: make it work with socks. According to https://github.com/getlantern/lantern/issues/2075 lantern already does have socks support. Issues opened: https://github.com/getlantern/lantern/issues/4838

<!--T:39-->
<pre>
Socks5Proxy 10.137.11.1:8788
</pre>
</ref>

<!--T:40-->
{{Reload_Tor}}

<!--T:41-->
Done. Tor will use Lantern as proxy.

= Footnotes = <!--T:42-->
<references/>

<!--T:43-->
{{Footer}}

<!--T:44-->
[[Category:Documentation]]
</translate>
