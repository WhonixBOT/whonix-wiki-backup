{{Header}}
{{Title|
title=Lantern - Alternative Censorship Circumvention Tool
}}
{{#seo:
|description=Alternative Censorship Circumvention. Lantern over Tor. Combining Whonix with Lantern. Connecting to Lantern before Tor (User -> Lantern -> Tor -> Internet ). Alternative to Tor bridges.
|image=https://www.whonix.org/w/images/2/20/Lanterns-111003640.jpg
}}

__forcetoc__

= Introduction =
[https://getlantern.org/en_US/index.html Lantern] is a censorship circumvention tool which can provide an alternative to Tor [[bridges]]. The design is similar to a VPN and encrypts all of a user's data through their servers and then proxies blocked sites. Note that Lantern in isolation is not an anonymity tool because it is ''technically'' possible to spy on user activity under this model. Another downside is that bandwidth limits also exist for non-subscribers: <ref>https://getlantern.org/en_US/faq.html</ref>

<blockquote>Lantern is designed to provide you with fast unfettered access to information online. Lantern is secure and encrypts your connection to blocked sites, but it is not an anonymity tool, so if you need or would like to be anonymous online, please use Tor. Otherwise, Lantern will give you faster access to blocked sites. ... To keep our free version running, we implemented a bandwidth limitation of 500 MB/ month. When the bandwidth limit is reached, the connection is slowed down and Free users are prompted to upgrade to Lantern Pro.</blockquote>

After bandwidth limits are reached, the connection slows down to approximately 20KB/s, making Lantern virtually unusable. It is inadvisable to consider paying for 'Lantern Pro' <ref>In early-2019, this costs $32 (USD) for one year, or $48 (USD) for two years.</ref> since the available payment methods cannot be used without damaging user privacy and/or anonymity. Interested readers can learn more at the [https://groups.google.com/forum/#!forum/lantern-users-en Lantern forums] and [https://github.com/getlantern/lantern/wiki/%5Bdevelopers%5D-Questions-and-Answers develeopers Q&A].

= Connecting to Lantern before Tor =
Testers only!

It is possible to configure Tor to use Lantern as proxy to establish the following tunnel:<br />
'''User -> Lantern -> Tor -> Internet'''

If you want to do this, apply the following instructions.

[[Qubes-Whonix]] only! [[Non-Qubes-Whonix]] is [[unsupported]].

In case you want to do that, it is recommended to read the following related wiki article: [[Tunnels/Introduction]]

For current limitations, see also blog post / forum discussion:<br />
https://www.whonix.org/blog/connecting-to-lantern-before-tor

Create a new standalone ProxyVM called Lantern-Gateway based on Debian-8 template.

In Lantern-Gateway ProxyVM, {{Firewall Unload Home Folder}}

IP Forwarding in the Lantern-Gateway ProxyVM could/should be disabled since it is not required.

<pre>
sudo sysctl -w net.ipv4.ip_forward=0
</pre>

Install missing lantern dependency. <ref>
[https://github.com/getlantern/lantern/issues/4836 Lack of a dependency declaration when installing Lantern on Debian]
</ref>

<pre>
sudo apt-get install libappindicator3-1
</pre>

Check if the downloaded deb file is still the right file. Go to https://getlantern.org/ and check for desktop, linux downloads.

{{CodeSelect|code=
curl {{Curl Secure}} https://s3.amazonaws.com/lantern/lantern-installer-beta-64-bit.deb --output ~/lantern-installer-beta-64-bit.deb
}}

Install lantern. <ref>

* proper Debian deb package: https://github.com/getlantern/lantern/issues/4837
* Debian APT repository with lantern: https://github.com/getlantern/lantern/issues/4837
* add lantern to official Debian repositories: https://github.com/getlantern/lantern/issues/4837
* Debian lantern [https://wiki.debian.org/RFP RFP (request for packaging)]: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=828932
</ref>

<pre>
sudo dpkg -i ~/lantern-installer-beta-64-bit.deb
</pre>

Start lantern while listening on all, not just the internal, network interfaces so it gets reachable from sys-whonix.

Let lantern listen for HTTP proxy requests.
<pre>
lantern -addr 0.0.0.0:8787
</pre>
Or let lantern listen for SOCKS5 proxy requests which is preferred.
<pre>
lantern -socksaddr 0.0.0.0:8788
</pre>

<ref>
In Lantern-Gateway, check if lantern's http port is functional.

{{CodeSelect|code=
curl {{Curl Secure}} --proxytunnel --proxy 127.0.0.1:8788 https://check.torproject.org
}}

In Lantern-Gateway, check if lantern's socks port is functional.

{{CodeSelect|code=
curl {{Curl Secure}} --socks5-hostname socks5h://127.0.0.1:8788 https://check.torproject.org
}}
</ref>

Shut down sys-whonix if running. Set sys-whonix NetVM to Lantern-Gateway. Restart sys-whonix.

<ref>
In sys-whonix, test if Tor is able to the http proxy that Lantern is providing.

{{CodeSelect|code=
{{Curl_Plain}} {{Curl Secure}} --proxytunnel --proxy 10.137.11.1:8788 https://check.torproject.org
}}

In sys-whonix, test if Tor is able to the socks proxy that Lantern is providing.

{{CodeSelect|code=
{{Curl_Plain}} {{Curl Secure}} --socks5-hostname socks5h://10.137.11.1:8788 https://check.torproject.org
}}
</ref>

In sys-whonix. {{Open_/usr/local/etc/torrc.d/50_user.conf}}

Add one of the followings according to the proxy type lantern is listening for. <ref>
Socks would be better. According to https://github.com/getlantern/lantern/issues/2075 lantern already does have socks support. Issues opened: https://github.com/getlantern/lantern/issues/4838

<pre>
Socks5Proxy 10.137.11.1:8788
</pre>
</ref> <ref>
Setup will become easier with less need for IP changes as soon as Qubes implements [https://github.com/QubesOS/qubes-issues/issues/1477 optional static IP addresses].
</ref>

10.137.11.1 is just an example. You need to replace 10.137.11.1 with the IP of your Lantern-Gateway ProxyVM. You could run the following command within sys-whonix to find out the IP of your Lantern-Gateway ProxyVM.
<code>qubesdb-read /qubes-gateway</code>

<pre>
HTTPSProxy 10.137.11.1:8787
</pre>

<pre>
Socks5Proxy 10.137.11.1:8788
</pre>

{{Reload_Tor}}

Done. Tor will use Lantern as proxy.

= Footnotes =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
