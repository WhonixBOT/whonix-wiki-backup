{{Header}}
{{#seo:
|description=redirect ports of unix domain socket files from {{gateway_product_name}} localhost to {{workstation_product_name}}
|image=https://www.whonix.org/w/images/2/23/Redirect12123.png
}}

= Introduction =
Socket redirection could be useful for any future applications that expect Tor or the ControlPort to listen on any specific port or unix domain socket file that is not (yet) added to [[Dev/anon-ws-disable-stacked-tor|anon-ws-disable-stacked-tor]] b[https://github.com/Whonix/anon-ws-disable-stacked-tor/blob/master/usr/lib/anon-ws-disable-stacked-tor/systemd-unit-files-generator#L20 uild-ins] or c[https://github.com/{{project_name_short}}/anon-ws-disable-stacked-tor/blob/master/etc/anon-ws-disable-stacked-tor.d/30_anon-dist.conf onfig] by default, or for any other port or unix domain socket file redirections from the workstation to the gateway.

= Instructions =
Inside {{workstation_product_name}}.

Create and extend config file <code>/etc/anon-ws-disable-stacked-tor.d/50_user.conf</code>. <ref>https://github.com/{{project_name_short}}/anon-ws-disable-stacked-tor/blob/master/etc/anon-ws-disable-stacked-tor.d/30_anon-dist.conf</ref>

{{Box|text=
Create folder <code>/usr/local/etc/anon-ws-disable-stacked-tor.d/</code>.

{{CodeSelect|code=
sudo mkdir -p /usr/local/etc/anon-ws-disable-stacked-tor.d
}}

{{Open with root rights|filename=
/usr/local/etc/anon-ws-disable-stacked-tor.d/50_user.conf
}}

Then either add a port redirection.

For example to redirect {{workstation_product_name}} port <code>9100</code> to {{gateway_product_name}} port <code>9050</code>. Note: adjust the port numbers for your needs.

{{CodeSelect|code=
file_port_tuples+=" port#9100:9050 "
}}

Or create a unix domain socket file <code>/var/run/anon-ws-disable-stacked-tor/unix-domain-socket-file.sock</code> and have it forwarded to {{gateway_product_name}} port <code>9050</code>.

{{CodeSelect|code=
file_port_tuples+=" /var/run/anon-ws-disable-stacked-tor/unix-domain-socket-file.sock#9050 "
}}

Save.

Run the <code>systemd-socket-proxyd</code> <code>systemd-unit-files-generator</code>. <ref>
https://github.com/Whonix/anon-ws-disable-stacked-tor/blob/master/usr/lib/anon-ws-disable-stacked-tor/systemd-unit-files-generator
</ref>

{{CodeSelect|code=
sudo /usr/lib/anon-ws-disable-stacked-tor/systemd-unit-files-generator
}}
}}

The process of creating a redirection is now complete.

= Footnotes =
{{reflist|close=1}}
[[Category:Documentation]]
{{Footer}}
