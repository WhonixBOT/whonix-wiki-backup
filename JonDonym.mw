{{Header}}
{{#seo:
|description=Combining {{project name}} with JonDonym. JonDonym over Tor. Connecting to Tor before JonDonym (User &rarr; Tor &rarr; JonDonym &rarr; Internet ) OR Connecting to JonDonym before Tor (User &rarr; JonDonym &rarr; Tor &rarr; Internet ).
|image=https://www.whonix.org/w/images/c/c9/Logo.png
}}
{{title|title=
Combining {{project name}} with JonDonym
}}
= Introduction =

Similar to Tor, JonDonym has a design based on multiple layers of encryption: <ref>https://anonymous-proxy-servers.net/en/help/jondonym.html</ref>

<blockquote>The JonDonym / AN.ON technology is based on the principle of multiple (layered) encryption, distribution and processing. This procedure does not only protect your Internet activities from being observed by third parties (against your access provider, WLAN hackers, advertising services and websites), but also against observation by the individual JonDonym providers themselves.
...
It consists of multiple user selectable mix cascades. A cascade consists of two or three separately encrypted mix servers. These mix servers are operated by independent and non interrelated organizations or private individuals who all publish their identity. The operators have to abide by strict provisions which prohibit saving connection data or exchanging such data with other operators.

Every connection from a user is differently encrypted for every mix server within a cascade and transferred through the cascade to the target, e.g. a website. Thereby no mix operator alone can by himself expose the user. Eavesdroppers on the connections to JonDonym cascades get garbage data only, as the connection to every mix is separately encrypted. Also, since a lot of users surf the anonymization service simultaneously, and thus share the same IP address, all connections of every user are concealed amidst each other: a correlation is not possible any more.</blockquote>

= JonDonym vs Tor Comparison = 

== JonDonym ==

JonDonym is an alternative anonymity network which is briefly compared with [[Tor]]. <ref>This is an informal opinion by lead Whonix developer Patrick Schleizer. Last updated in May, 2020.</ref> It is easy to tunnel JonDonym over Tor inside Whonix-Workstation (<code>anon-whonix</code>), which will be discussed in the next section. In theory, Tor on Whonix-Gateway <code>sys-whonix</code> could be replaced with JonDonym.

The [https://anonymous-proxy-servers.net JonDonym network] is much smaller than the Tor network. 
In 2020, there are 4 premium cascades, 1 free cascade and 2 experimental services. <ref>https://anonymous-proxy-servers.net/en/status/</ref> The size of the network has decreased since [http://www.webcitation.org/6EDKqyxBU February 2012], when a random snapshot at that time revealed there were 5 two hop free mix cascades, 11 three hop premium mix cascades and 1 test/experimental, free one-hop service.

Mix servers are operated by independent and unassociated organizations or private individuals who publish their identity. <ref>https://anonymous-proxy-servers.net/en/help/certificates.html</ref>. All JonDonym operators must abide by strict provisions which prohibit saving connection data or exchanging such data with other operators.

The free two-hop mix cascade currently has a limit of 600 free users, while the premium three-hop mixes have an unlimited amount of users. <ref>In 2012, the random snapshot identified the two-hop free mix cascades had 1940 users with a maximum available capacity of 2750 users. 1367 users were using the test/experimental free one hop service which did not advertise a maximum user capacity. From 16 to 63 users used one of the 11 three-hop premium mix cascades and no maximum user restriction was advertised. There were 350 premium users in total.</ref> Free users also have other restrictions such as a maximum file size for up- and downloads (2 MB), no SOCKS5 support, and a maximum of two different countries in the path. <ref>https://anonymous-proxy-servers.net/en/premium.html</ref> A random snapshot of user data in 2020 showed: <ref>https://anonymous-proxy-servers.net/en/status/index.php</ref>

* 30 premium users active.
* 133 users relying on free cascades.
* 185 users relaying on experimental cascades. <ref>With no advertised limit on the number of users.</ref>

== Tor Network ==

The Jondonym network is tiny in comparison to the Tor network. A snapshot of Tor metrics on the same day in 2020 reveals around 2.1 million users <ref>https://metrics.torproject.org/userstats-relay-country.html</ref>, nearly 7,000 relays and over 1,000 bridges. <ref>https://metrics.torproject.org/networksize.html</ref>. <ref>A similarly large difference was evident in 2012: according to Tor metrics page ([http://www.webcitation.org/6EDLmOK0g on that same day] the Tor network had on that day had around 3,000 relays (approximately 1,000 had the guard flag and around 900 had the entry guard flag). An estimated 500,000 users were using the Tor network [http://www.webcitation.org/6EDMD01pu at that time].</ref>

The path (circuit) chosen by a Tor client is not predictable and changes every 10 minutes, unless a long-lived onion connection is established. In contrast, a JonDonym user relying on a free two-hop mix cascade will have a predictable entry and exit to the network until the user manually changes it; this similarly applies to all other mix cascades. If a network observer  knows the entry or exit, the whole path the client is using through the network is obvious.

The Tor network is run by volunteers from many different countries. Anybody can run a Tor relay -- no formal process or verification of identity is necessary for administrators. The open source software can simply be downloaded, configured and a node volunteered to the network. Due to the open nature of the network, there are obviously both legitimate and malicious nodes. This stands in contrast to JonDonym's small network of known private operators and companies.

A number of attacks have already been performed on the Tor network, such as [[Warning#Tor_Exit_Relays_can_Eavesdrop_on_Communications|sniffing of private usernames and passwords by Tor exit relays]] on unencrypted or SSL-stripped connections. Tor attracts significant interest from researchers, government agencies and adherents due to its popularity and proven track record. Far less attention is given to JonDonym due to the size of the network and user pool which are both serious weaknesses. <ref>For instance, it is likely trivial for advanced adversaries to conduct end-to-end correlation attacks.</ref>

== Summary ==

TODO

== Technical Overview ==

This JonDonym overview is the opinion of lead {{project name}} developer Patrick Schleizer.

JonDonym is an alternative anonymity network which will be compared with [[Tor]] in this Introduction chapter. It is easy to tunnel JonDonym over Tor inside {{workstation_product_name}} which we go into in the next chapter. In theory, Tor on {{gateway_product_name}} could be replaced with JonDo.

The <code>JonDonym network</code><ref>https://anonymous-proxy-servers.net</ref> is much smaller than the Tor network. At time of writing ([http://www.webcitation.org/6EDKqyxBU February 2012], snapshot random week day, random time), there were 5 two hop free mix cascades, 11 three hop premium mix cascades and 1 test/experimental free one hop service.

The two hop free mix cascades had 1940 users with a maximum available capacity of 2750 users. 1367 users were using the test/experimental free one hope service which didn't advertise a maximum user capacity. From 16 to 63 users used one of the 11 three hop premium mix cascades and no maximum user restriction was advertised. There were 350 premium users in total.

In comparison, according to Tor metrics page ([http://www.webcitation.org/6EDLmOK0g on that day] the Tor network had on that day had ~3000 relays. (~1000 had the guard flag and ~900 hard the entry guard flag, i.e. where useable in that position.) ~500.000 users were using the Tor network [http://www.webcitation.org/6EDMD01pu on that day].

The path (circuit), Tor client chooses is non-predictable and changes every 10 minutes while in comparison to JonDonym, for example a user who has chosen the Speedy-Sektor free two hop mix cascade, will have a predictable entry and exit until the user manually changes it. That goes for all mix cascades. If someone knows the entry or exit, the whole path the client is using through the network is known.

The Tor network is run by volunteers from many different countries. There is no formal process to apply as a Tor node and no verification of identity for Tor node admins. Anyone can download the Tor software and volunteer a node. Therefore there are legit and malicious nodes.

In comparison to JonDonym, mix servers are operated by independent and non interrelated organizations or private individuals who all <code>publish their identity</code><ref>https://anonymous-proxy-servers.net/en/help/certificates.html</ref>. The operators have to abide by strict provisions which prohibit saving connection data or exchanging such data with other operators.

While private data such as usernames and passwords have been already sniffed by Tor exit relays on unencrypted or sslstripped connections, no such headline about JonDonym. Tor clearly states, that unencrypted connections can be sniffed by Tor exit relays. ([[Warning#Tor_exit_nodes_can_eavesdrop_on_communications|Exit Nodes Eavesdropping]]) Trusting in JonDonym is more like trusting in their policy and server administration skills. Neither the mix server administration nor the JonDo software can prevent a man-in-the-middle attack between the mix server and the destination server.

JonDonym might be faster than Tor.

Quoted from the JonDonym Law enforcement page <ref>https://anonymous-proxy-servers.net/en/law_enforcement.html ([http://www.webcitation.org/6EDOc3Gfi w])</ref>:

<blockquote>JonDonym does not make it impossible to uncover individual users, as there is no such thing as a 100% security. However, such a disclosure is by magnitudes more difficult than for other VPN or proxy services, as this would require the cooperation of several states and organizations.</blockquote>

<blockquote>JonDonym is no technology for preventing law enforcement on the internet. In very serious cases, it is possible to uncover the abuse of Mix services. User connections may be individually observed, if all operators of a Mix cascade get such an official order, valid in their respective country (in Germany accourding to §100a/b StPO).</blockquote>

<blockquote>A respective legal obligation may moreover force some Mix operators to retain certain connection data. In contrast to surveillance (where this is often not allowed), the operator has to make this transparent to the users of his JonDonym Mixes via JonDo. Usually, such a data retention does neither comprise target addresses (websites) nor contents, but IP addresses of users only. At the moment no JonDonym mix operator retain connection data.</blockquote>

<blockquote>However, the independence of JonDonym operators vastly lowers the danger of an illegitimate law enforcement done by non-democratic states or arbitrary individual public officers. Any disclosure basically needs the cooperation of all operators of a Mix cascade. This was never realized for premium mix cascades in the past.</blockquote>

<blockquote>Surveillance reports</blockquote>

<blockquote>Each year, we will publish a short report of all surveillance actions that were taken and have been reported to us by the operators.</blockquote>

<blockquote>In 2012 there has been one surveillance court order to all German mix operators and JonDos GmbH. It concerned one JonDonym account number which was known to the law enforcement agency before start of surveillance. No premium cascade and no free cascade was able to provide the requested communication data because not all operators of any cascade got a court order.</blockquote>

<blockquote>[...]</blockquote>

<blockquote>If single mix operators inform JonDos GmbH about a surveillance court order then that does not mean JonDonym as a whole has been under surveillance or JonDos GmbH was involved. Rather, single operators had to comply with these orders.</blockquote>

In summary there where surveillance court orders for the last four years, but until now, no JonDonym user has ever been de-anonymized. The Tor network also suffers from legal attacks, there have been some raids of Tor exit servers, which also didn't and couldn't lead to de-anonymization. Both networks, when correctly used, i.e. not de-anonymizing oneself by posting private information, without connecting once without going through the anonymity network, without proxy bypass, without viruses, following documentation and so on, ever had any news headlines about network compromise.

The JonDo developers, although they are selling a product, seem to be honest about their network. They are also generally friendly ({{project_name}} is allowed to re-use their documentation content under Open Source license with or without modification to improve {{project name}} documentation) and are also constructively participating the Tor bug tracker. It will be interesting if and what they answer will be on the thread "[https://anonymous-proxy-servers.net/forum/viewtopic.php?f=10&t=7319 ip-check.info some false values and confuses TBB users]" ([http://www.webcitation.org/6EDOL0OdY w]).

The JonDonym receives much less attention from security researchers compared to Tor.

In some aspects JonDonym is more/less secure than Tor. Depends on your threat model Reading [https://anonymous-proxy-servers.net/en/help/jondonym.html network comparison] and [https://anonymous-proxy-servers.net/en/law_enforcement.html law enforcement] yourself may be worth reading.

Tunneling JonDonym over Tor makes sense in some cases. I wouldn't do it for a longer amount of time, as it adds a permanent exit server. (See [https://trac.torproject.org/projects/tor/wiki/doc/TorPlusVPN Tor plus VPN or proxy] for background.)

Conclusion: if you want to download something, which you can not download over SSL (and if there are also no hash sums or signatures), the JonDo exit might be, in your threat model, more trustworthy than a random Tor exit. However, you could also try to use a specific Tor exit from someone you trust.

== Screenshots ==

'''Figure:''' ''Java Anon Proxy (JonDonym) Client Software in {{project name}}''

[[Image:JonDo.png]]

'''Figure:''' ''JonDonym Client Software Settings''

[[Image:JonDosettings.png]]

== Advanced Adversary Analysis ==

Intelligence disclosures in recent years have revealed the assessment of JonDonym by government agencies. <ref>https://search.edwardsnowden.com/docs/InternetAnonymity20112014-12-28nsadocs</ref>

<blockquote>
(S//REL) Open Source Multi-Hop Networks

(S//REL) Jondo Anonymous Proxy (JAP)

(S//REL) Championed by German University (Dresden)

(S//REL) (Mostly?) Open source software - some Docs in German
(S//REL) Uses a technology known as Cascades

* (S//REL) Each cascade is set of 2 or 3 Mixes

* (S//REL) All internal traffic encrypted

* (S//REL) Free service AN.ON: 5 Cascades

* (S//REL) Premium service JonDoNym: 10 Cascades

(S//REL) Countries: BG, CA, CH, CZ, DE, DK, FR, GB, IT, LU, US,
(S//REL) Less than 50 mixes total

(S//REL) Open Source Multi-Hop Networks

(S//REL) Jondo Anonymous Proxy (JAP)

(S//REL) Comparison with Tor

• (S//REL) Not nearly as well studied

* (S//REL) Much smaller contained development community

• (S//REL) More centralized structure (all mixes centrally approved)

• (S//REL) Not as diverse geographically or scalable

* (S//REL) Not as well used or publicized

(S//REL) Not analyzed in great detail here at NSA (or FVEY?)
(TS//SI//REL) Much better chance for Global Adversary (SIGINT :-))

* (TS//SI//REL) Sessionization of DNI still would be a problem 
</blockquote>

== Q&A ==

According JonDo, it is safe to tunnel JonDonym over Tor: <code>User</code> &rarr; <code>Tor</code> &rarr; <code>JonDonym</code> &rarr; <code>Internet</code>.

Quoted from the JonDonym network comparison page<ref>https://anonymous-proxy-servers.net/en/help/jondonym.html</ref>:

<blockquote>[...] making surfing considerably slower but, in some individual cases, even more secure than with JonDonym alone.
</blockquote>

According to the JonDonym page, chapter <code>Access to the Tor network with JonDo</code><ref>https://anonymous-proxy-servers.net/en/help/services_tor.html</ref>, JonDo natively supports to get tunneled over Tor. This also implies, that the JonDo developers do '''not''' argue, that tunneling JonDo through Tor is any less safe. Having such an option helps JonDo users to tunnel through Tor: <code>User</code> &rarr; <code>Tor</code> &rarr; <code>JonDonym</code> &rarr; <code>Internet</code>. You won't need this option in {{project_name}}, since all traffic originating from {{workstation_product_name}}, will be tunneled through Tor first in any case. Enabling that JonDo option is inside {{workstation_product_name}} is discouraged, since it would lead in [[DoNot#Prevent_Tor_over_Tor_scenarios.|Tor over Tor]].

= Connecting to Tor before JonDonym =
== Introduction ==

It is possible to run JonDonym inside {{workstation_product_name}}: <code>User</code> &rarr; <code>Tor</code> &rarr; <code>JonDonym</code> &rarr; <code>Internet</code>

If this tunnel configuration is desired, it is suggested to first read the following two related wiki entries:

* [[Tunnels/Introduction|Combining Tunnels with Tor]]
* [[Tunnels/Connecting_to_Tor_before_a_proxy|Connecting to Tor before a Proxy]]

By tunneling JonDonym over Tor, this might be useful in circumventing Tor bans. However, this configuration will also [[Tunnels/Introduction#Connecting_to_Tor_before_a_Tunnel-link_.28Proxy.2FVPN.2FSSH.29|add a permanent exit relay]], which is harmful to anonymity. <ref>See also: [https://trac.torproject.org/projects/tor/wiki/doc/TorPlusVPN Tor Plus VPN or Proxy].</ref> Other [[Tunnels/Introduction#Comparison_Table|negative impacts]] include the loss of stream isolation, a worsened browser fingerprint, and unavailability of Tor onion services connections.

The instructions below install [https://anonymous-proxy-servers.net/en/software.html JonDo - the IP changer] software package (GUI version) manually by hand; a console version is also available. If installation from the JonDonym GNU/Linux repository is preferred, follow the relevant steps [https://anonymous-proxy-servers.net/en/help/firststeps2.html here]. At the time of writing, the JonDonym repository does not appear to support Debian buster which {{project name}} is based on; also see footnote. <ref>In the section stating "The repository is signed with the OpenPGP key 0x2B3CAA3E", it is unrecommended to download the key from a keyserver with <code>apt-key</code>, using only the short key fingerprint. Instead, it is more secure -- equivalent to using the long key fingerprint -- to download the signing key over https with your browser: <br />
1. Right-click on 0x2B3CAA3E and "Save Link As..." <br />
2. Save the key in the home folder <br />
3. Run <code>gpg --import 0x2B3CAA3E</code></ref>

== JonDo IP Changer Proxy Tool Installation ==

{{mbox
| type    = notice
| image   = [[File:Ambox_notice.png|40px|alt=Info]]
| text    = <u>Note</u>:
* Non-Qubes-Whonix only.
* If packages are installed by hand, it is not possible to update the software automatically. You will receive a notice later on if new software versions are ready for download. In this case, the new deb package must be downloaded and installed again manually.
* Perform the following steps in {{workstation_product_name}} terminal. It is recommended to clone the {{workstation_product_name}} beforehand, as numerous dependencies are installed during this procedure.
}}

{{Box|text=
'''1.''' Download the signing key. <ref>Alternatively use Tor Browser to download the signing key [https://anonymous-proxy-servers.net/en/jondo.html here].</ref>

{{CodeSelect|code=
scurl-download https://anonymous-proxy-servers.net/downloads/Software_JonDos_GmbH.asc
}}

Note: All PGP signature files were created with the OpenPGP key <code>0x2B3CAA3E</code>.

'''2.''' Display the fingerprint without importing anything.

{{CodeSelect|code=
gpg --keyid-format long --import --import-options show-only --with-fingerprint Software_JonDos_GmbH.asc
}}

'''3.''' Verify the output.

The output should be identical to the following.

<pre>
pub   rsa4096/2146D0CD2B3CAA3E 2014-10-20 [SC] [expires: 2024-10-17]
      Key fingerprint = 6899 5C53 D2CE E11B 0E41  82F6 2146 D0CD 2B3C AA3E
uid   JonDos GmbH (Software Signing Key) <software@jondos.de>
sub   rsa4096/435B56FDF9115DBF 2014-10-20 [E] [expires: 2024-10-17]
</pre>

'''4.''' Import the key.

{{CodeSelect|code=
gpg --import Software_JonDos_GmbH.asc
}}

The output should confirm the key was imported.

<pre>
gpg: key 0x2146D0CD2B3CAA3E: public key "JonDos GmbH (Software Signing Key) <software@jondos.de>" imported
gpg: Total number processed: 1
gpg:               imported: 1
</pre>

'''5.''' Download the JonDo Debian package (<code>jondo_all.deb</code>). <ref>Alternatively use Tor Browser to download the package from [https://anonymous-proxy-servers.net/en/jondo.html here].</ref>

{{CodeSelect|code=
scurl-download https://anonymous-proxy-servers.net/downloads/jondo_all.deb
}}

'''6.''' Download the package signature (<code>jondo_all.deb.asc</code>). <ref>Alternatively use Tor Browser to download the signature from [https://anonymous-proxy-servers.net/en/jondo.html here]. Right-click and select "Save Page As..." to save the signature.</ref>

{{CodeSelect|code=
scurl-download https://anonymous-proxy-servers.net/downloads/jondo_all.deb.asc
}}

'''7.''' Verify the JonDo Debian package.

{{CodeSelect|code=
gpg --verify jondo_all.deb.asc
}}

The output should show.

<pre>
gpg: Signature made Mon 06 Feb 2017 10:14:57 AM UTC
gpg:                using RSA key 0x2146D0CD2B3CAA3E
gpg: Good signature from "JonDos GmbH (Software Signing Key) <software@jondos.de>" [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: 6899 5C53 D2CE E11B 0E41  82F6 2146 D0CD 2B3C AA3E
</pre>

'''8.''' Install the JonDo deb package.

{{CodeSelect|code=
sudo dpkg -i jondo_all.deb
}}

'''9.''' Install all unmet dependencies.

{{CodeSelect|code=
sudo apt-get -f install
}}
}}

== Launch JonDonym ==

After installation a placeholder for JonDonym should appear in the application menu. If it does not appear, it can simply be launched from the terminal.

{{CodeSelect|code=
jondo
}}

== Free vs Premium Accounts ==
Free accounts can connect only to ports 80 and 443 and provide only a https proxy interface, no socks. <ref>https://anonymous-proxy-servers.net/en/help/otherApplications.html</ref> Premium accounts to any port and support socks. Full comparison: https://anonymous-proxy-servers.net/en/premium.html

=== JonDo Https Proxy Test ===
This works also with JonDo free accounts.

{{CodeSelect|code=
{{Curl Plain}} {{Curl Secure}} --proxytunnel --proxy 127.0.0.1:4001 https://check.torproject.org
}}

=== JonDo Socks Proxy Test ===
This requires JonDo premium, a paid account.

Try this test command.
{{CodeSelect|code=
{{Curl Plain}} {{Curl Secure}} --socks5-hostname socks5h://127.0.0.1:4001 https://check.torproject.org
}}

If you see the following, it indicates, that the local JonDo has not opened a listener. Probably you have not started JonDo yet or configured it to use a non-default port?
<pre>
curl: (7) couldn't connect to host
</pre>

If you see the following, you likely are only using a free account. Therefore socks is not available to you.
<pre>
curl: (7) Unable to receive initial SOCKS5 response.
</pre>

== JonDoFox vs Tor Browser ==
You must make an informed decision, if you prefer to use JonDoFox or the Tor Browser.

A quick thought tells me, that blending in with JonDo users, i.e. using JonDoFox in this case would make more sense - could be wrong. No special settings would be required in this case.

If you want to use the Tor Browser for surfing &rarr; user &rarr; Tor &rarr; JonDonym &rarr; destination server, you have to change the proxy settings in Tor Button. start Tor Browser, open Tor Button settings, choose custom proxy settings, http 127.0.0.1 port 4001 and leave all other fields expect no proxy for 127.0.0.1 free. You can check http://ip-check.info/ if it is working.

== Future Integration ==
If you are interested in a development discussion about JonDo(Fox) getting pre-installed on {{project_name}}, see [[Dev/JonDo]].

{{Anchor|Connecting_to_JonDo_before_Tor}}

= Connecting to JonDonym before Tor =

== Introduction ==

{{mbox
| type    = notice
| image   = [[File:Ambox_notice.png|40px|alt=Info]]
| text    = <u>Note</u>:
* Testers only!
* [[{{q project name short}}|{{q project name}}]] only! [[{{non q project name short}}|{{non q project name}}]] is [[FAQ#What_do_you_mean_by_unsupported.3F|unsupported]].
}}

It is possible to configure Tor to use JonDonym as a proxy to establish the following tunnel: <code>User</code> &rarr; <code>JonDonym</code> &rarr; <code>Tor</code> &rarr; <code>Internet</code>

A JonDonym premium account is not required; this configuration is functional with JonDonym free. If this tunnel configuration is desired, it is recommended to first read the following two related wiki entries:

* [[Tunnels/Introduction|Combining Tunnels with Tor]]
* [[Tunnels/Connecting_to_a_proxy_before_Tor|Connecting to Proxy before Tor]]

The anonymity effects are disputed when tunneling Tor over JonDonym; see [[Tunnels/Introduction#Comparison_Table|here]] for further information. The instructions below also have a number of current limitations: <ref>https://forums.whonix.org/t/connecting-to-jondonym-before-tor-user-jondonym-tor-internet</ref>

* JonDonym is installed in a separate ProxyVM behind <code>sys-whonix</code>. <ref>The motivation behind this is better security. JonDonym is not installable from Debian, but instead is a package from the anonymous-proxy-servers.net website / Debian apt repository. In theory, Tor should not be compromised if JonDonym is compromised. Also, if JonDonym is compromised to begin with or more easily exploited than Tor, then it is desirable to run it in a separate ProxyVM for better isolation.</ref>
* This configuration is very impractical. Since Qubes does not yet support static IP addresses, the Tor configuration setting <code>/etc/tor/torrc</code> 'HTTPSProxy 10.137.10.1:4001' is not stable. When the JonDonym ProxyVM has its IP changed, connectivity breaks and <code>/etc/tor/torrc</code> in <code>sys-whonix</code> needs a manual update.
* It would be preferable to increased usability by documenting how to run JonDonym directly in <code>sys-whonix</code> -- under user tunnel with TUNNEL_FIREWALL=true etc. -- however, this would mean less isolation.
* This configuration does not yet autostart JonDonym.

== Installation and Configuration ==

{{Box|text=
'''1.''' Create a new standalone ProxyVM called <code>JonDo-Gateway</code>.

'''2.''' Install JonDonym in the new <code>JonDo-Gateway</code> ProxyVM. 

Follow [https://anonymous-proxy-servers.net/en/help/firststeps2.html these instructions] to install JonDonym from JonDonymn's Debian APT repository. The {{Code2|Using the repository at command line}} chapter is recommended for installation.

'''3.''' Test if JonDonym's https proxy is functional.

{{CodeSelect|code=
curl {{Curl Secure}} --proxytunnel --proxy 127.0.0.1:4001 https://check.torproject.org
}}

<ref>
Socks proxy test - premium accounts only.

{{CodeSelect|code=
curl {{Curl Secure}} --socks5-hostname socks5h://127.0.0.1:4001 https://check.torproject.org
}}
</ref>

'''4.''' Enable the extended view.

<pre>
Config &rarr; user interface &rarr; extended view.
</pre>

'''5.''' Configure JonDonymn to listen on all interfaces so it will be reachable from <code>sys-whonix</code>. 

Under network, <u>un</u>check:<br />
<code>[ ] Allow access to JAP/JonDo from localhost only (recommended)</code>

'''6.''' In <code>JonDo-Gateway</code> ProxyVM, {{Firewall Unload Home Folder}}

'''7.''' Disable IP Forwarding in the <code>JonDo-Gateway</code> ProxyVM.

IP Forwarding could/should be disabled, since it is not required. TODO: document how.

'''8.''' Shut down <code>sys-whonix</code>. 

* Next set the <code>sys-whonix</code> NetVM to <code>JonDo-Gateway</code>. 
* Restart <code>sys-whonix</code>.

'''9.''' Add the IP address of <code>JonDo-Gateway</code>.

In <code>sys-whonix</code>: {{Open_/usr/local/etc/torrc.d/50_user.conf}}

Add the following. 

Note: <code>10.137.10.1</code> is just an example and needs to be replaced with the IP address of the <code>JonDo-Gateway</code> ProxyVM. To discover the IP address of the <code>JonDo-Gateway</code> ProxyVM, run the following command in <code>sys-whonix</code>:
<code>qubesdb-read /qubes-gateway</code>

<pre>
HTTPSProxy 10.137.10.1:4001
</pre>

Save.

'''10.''' {{Reload Tor}}

'''11.''' In <code>sys-whonix</code>, test if Tor is able to use the https proxy that JonDonym is providing.

{{CodeSelect|code=
{{Curl Plain}} {{Curl Secure}} --socks5-hostname socks5h://127.0.0.1:9050 https://check.torproject.org
}}

The procedure is complete and Tor will use JonDonym as a proxy.
}}

= JonDoBox: Substituting Tor with JonDonym =

This was just a development idea with some limited progress. Interested readers can review the material [[Dev/Inspiration|here]].

= License =

{{JonDos}} The "{{project_name}} JonDonym" wiki page contains content from the JonDonym documentation [https://anonymous-proxy-servers.net/en/help/jondonym.html Network] page.

= Footnotes / References =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
