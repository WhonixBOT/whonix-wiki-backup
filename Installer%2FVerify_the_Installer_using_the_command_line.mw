<!--
Copyright:

   Copyright (C) Amnesia <amnesia at boum dot org>
   Copyright (C) 2012 - 2018 ENCRYPTED SUPPORT LP <adrelanos@riseup.net>
   Copyright (C) 2017 Ego <ego-superego-id@protonmail.com>
   
   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 3 of the License, or
   (at your option) any later version.
         
   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
      
   You should have received a copy of the GNU General Public License
   along with this program; if not, write to:

    Free Software Foundation, Inc. 
    51 Franklin St, Fifth Floor
    Boston, MA 02110-1301, USA.

On Debian GNU/Linux systems, the complete text of the GNU General Public
License can be found in the /usr/share/common-licenses' directory.

The complete text of the GNU General Public License can also be found online on gnu.org <https://www.gnu.org/licenses/gpl.html>, in {{project name}} virtual machine images in /usr/share/common-licenses/GPL-3 file or on Github <https://github.com/{{project_name_short}}/{{project_name_short}}/blob/master/GPLv3>.
-->
<!--
This wiki page is a fork of the Tails Trusting Tails signing key page, from this exact source <http://git.immerda.ch/?p=amnesia.git;a=blob;f=wiki/src/doc/get/trusting_tails_signing_key.mdwn;hb=63b68fb4970361131cbd1713b40521244e88c204>.
-->
{{Header}}
{{#seo:
|description=Verify {{project name}} Windows Installer using gpg. GnuPG signature check. Get Ego's OpenPGP signing key.
}}
= Introduction =

You'll need GPG which you may find here: https://www.gpg4win.org

The releases of the Whonix-Installer have been signed by Ego which is why it is necessary to import his signing key to verify the Installer.

This page is strongly related to the [[Trust]] page.

= Download the key =
<!--
EDITORS NOTES:
- Not recommending 'scurl': Because these instructions are done on the host. Perhaps by users that are not yet {{project name}} users. 'scurl' is not available to them.
- Not recommending curl: Because it may not be installed on their host. Perhaps Windows users are looking at these instructions.
- Instructions target regular users. Not from-source-builders.
-->

1. Download Ego's [[OpenPGP]] key:<br />
[https://download.whonix.org/windows/ego.asc ego.asc]

2. Store ego.asc in a folder you will remember.

3. Open the command line by pressing the Windows-Key and R simultaneously and executing cmd.exe.

4. Change into the folder you stored ego.asc in by typing the following into the window you just opened:

{{CodeSelect|code=
cd /Foldername/
}}

5. Check fingerprints/owners without importing anything by using the following.

{{CodeSelect|code=
gpg --keyid-format long --with-fingerprint ego.asc
}}

6. Verify it shows the following. 

<pre>
pub  4096R/584A8DF9FBB8E862 2016-08-12 Ego <ego-superego-id@protonmail.com>
Key fingerprint = 2B72 83C9 D382 4D7F 9D11  8364 584A 8DF9 FBB8 E862
sub  4096R/B63EEBBFD6D1BAA7 2016-08-12
</pre>

7. Import the key by typing.

{{CodeSelect|code=
gpg --import ego.asc
}}

The output should tell you that the key was imported:

<pre>
gpg: key FBB8E862: public key "Ego <ego-superego-id@protonmail.com>" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)
</pre>

'''If you had already imported Ego's signing key in the past''', the output should tell you that the key was not changed:

<pre>
gpg: key FBB8E862: "Ego <ego-superego-id@protonmail.com>" not changed
gpg: Total number processed: 1
gpg:              unchanged: 1
</pre>

'''If you are shown the following message''' at the end of the output:

<pre>
gpg: no ultimately trusted keys found
</pre>

Analyse the other messages as usual: this extra message doesn't relate to Ego's signing key that you downloaded and usually means that you didn't create an OpenPGP key for yourself yet, which is of no importance to verify the virtual machine images.

= Verifying the Installer =

Now, download the cryptographic (OpenPGP) signature and save it in the same folder as the Installer:

[https://download.whonix.org/windows/Install%20Whonix.exe.asc Install Whonix.exe.asc]

Then, start the cryptographic verification, which may take several minutes by typing the following.

<pre>
cd [the directory in which you downloaded the Installer and .asc files]
</pre>
<pre>
gpg --verify-options show-notations --verify "Install Whonix.exe.asc" "Install Whonix.exe"
</pre>

If the Virtual Machine image is '''correct''' the output will tell you that the signature is good:

<pre>
gpg: Signature made Sun Jan 6 11:55:22 PM 2017 CET using RSA key ID FBB8E862
gpg: Good signature from "Ego <ego-superego-id@protonmail.com>" [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: 2B72 83C9 D382 4D7F 9D11  8364 584A 8DF9 FBB8 E862
</pre>

This might be followed by a warning saying:

<pre>
gpg: WARNING: This key is not certified with a trusted signature!
gpg: There is no indication that the signature belongs to the owner.
</pre>

This doesn't alter the validity of the signature according to the key you downloaded. This warning rather has to do with the trust that you put in Ego's signing key and the [[OpenPGP#The_OpenPGP_Web_of_Trust|Web of Trust]]. To remove this warning you would have to personally sign Ego's signing key with your own key.

If all checks out, the Installer hasn't been tampered with and can be used safely.


If the Virtual Machine image is not correct the output will tell you that the signature is bad:

<pre>
gpg: Signature made Sun Jan 6 11:55:22 PM 2017 CET
gpg: using RSA key FBB8E862
gpg: BAD signature from "Ego <ego-superego-id@protonmail.com>"
</pre>

In this case do '''NOT''' use the Installer! Please download it instead again!

= See Also =
* [[Trust]]
* [[OpenPGP|OpenPGP key distribution strategies]]

= License =
<pre>
Whonix Installer/Verify the Installer using the command line wiki page Copyright (C) Amnesia <amnesia at boum dot org>
Whonix Installer/Verify the Installer using the command line wiki page Copyright (C) 2012 - 2018 ENCRYPTED SUPPORT LP <adrelanos@riseup.net>
Whonix Installer/Verify the Installer using the command line wiki page Copyright (C) 2017 Ego <ego-superego-id@protonmail.com>

This program comes with ABSOLUTELY NO WARRANTY; for details see the wiki source code.
This is free software, and you are welcome to redistribute it
under certain conditions; see the wiki source code for details.
</pre>

{{Footer}}

[[Category:Documentation]]
