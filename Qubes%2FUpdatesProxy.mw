{{DISPLAYTITLE:Fixing dom0 Qubes-Whonix UpdatesProxy Settings}}
{{Header}}
{{#seo:
|description=How to Fix dom0 Qubes-Whonix UpdatesProxy Settings. How to fix "WARNING: Execution of $uwtwrapper_parent prevented by $BASH_SOURCE because no torified Qubes updates proxy found."
}}
<!--EDITORS NOTE:
https://github.com/Whonix/qubes-whonix/blob/master/usr/share/uwt/qubes_torfied_dom0.txt links to this wiki page.
-->
If you see the following warning...

<pre>
WARNING: Execution of /usr/bin/apt-get prevented by /etc/uwt.d/40_qubes.conf because no torified Qubes updates proxy found.
</pre>

If this warning message is transient, it can be safely ignored. Otherwise try the fix below.

== Update dom0 ==
{{Qubes_upgrade_dom0}}

= Salt Fix =
Use <code>salt</code> for dom0 settings setup. <ref>
[[Dev/Qubes#salt]]
</ref>

{{CodeSelect|code=
sudo qubesctl state.sls qvm.anon-whonix
}}

Try if it works now. If not, try manual fix below.

= Manual Fix =
Please make sure Whonix-Gateway (commonly called sys-whonix) is running.

* If you are using <u>Qubes R3.2</u>: The NetVM of this TemplateVM should be set to Whonix-Gateway (commonly called sys-whonix).

* If you are using <u>Qubes R4 or higher</u>: Check your '''dom0''' <code>/etc/qubes-rpc/policy/qubes.UpdatesProxy</code> settings.

At the very top of that file you should see the following.

{{CodeSelect|code=
$tag:whonix-updatevm $default allow,target=sys-whonix
}}

If it is not there, add it.

<div class="toccolours mw-collapsible mw-collapsed">
If you are using [[Multiple_Whonix-Workstations#Multiple_Qubes-Whonix_TemplateVMs|Multiple Qubes-Whonix TemplateVMs]] (such as if you made a clone of a Whonix TemplateVM), please press on expand on the right site.
<div class="mw-collapsible-content">
Should have the following syntax:

<pre>
Name-Of-Whonix-TemplateVM $default allow,target=Whonix-Gateway-TemplateBased-ProxyVM
</pre>

Example entry for Whonix-Gateway TemplateVM:

{{CodeSelect|code=
{{whonix-gw}} $default allow,target=sys-whonix
}}

Example entry for Whonix-Workstation TemplateVM:

{{CodeSelect|code=
{{whonix-ws}} $default allow,target=sys-whonix
}}
</div>
</div>

To see if it is fixed, try running in Whonix TemplateVM:

{{CodeSelect|code=
sudo systemctl restart qubes-whonix-torified-updates-proxy-check
}}

= Reinstall Fix =

If it still does not work try to [[Qubes/Reinstall]].

= Footnotes =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
