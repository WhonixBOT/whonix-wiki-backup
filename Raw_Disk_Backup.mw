{{Title|title=Full Raw Disk Backup}}
{{Header}}
{{#seo:
|description=1 to 1 disk backup
}}

{{stub}}

= Information Gathering =
== Qubes Users Recommendations ==
It is useful to run from the Qubes installation which should backed up as full raw disk backup.

Tested in Qubes R4.0 only. In later Qubes versions with untrusted storage domain, these instructions might need changes.

gparted is a disk partitioning tool which will be used as an easy way to find out how many hard drives the system has and what size they have.

In dom0, install gparted.

{{CodeSelect|code=
sudo qubes-dom0-update gparted
}}

In dom0, run gparted.

{{CodeSelect|code=
sudo --set-home gparted
}}

Make notes. For example.

Note: Modify these notes according to what can be seen in gparted.

<pre>
/dev/sda (476.91 GiB)
</pre>

Check the button below the <code>X/</code> (which would close the window) if there are multiple disks.

Obviously easiest if there is only 1 disk. Assuming there is only 1 disk.

Users of USBVM would only non-USB connected disks there.

= Overview =

= Recommendations =
USB boot operating system should have a graphical diff viewer such as meld installed.

After booting the operating system from USB.

{{Install Package|
package=meld lxsudo
}}

= Instructions =

Start with one external disk attached only (boot disk).

{{CodeSelect|code=
sudo fdisk -l > old
}}

Attach backup external disk.

{{CodeSelect|code=
sudo fdisk -l > new
}}

{{CodeSelect|code=
diff old new
}}

{{CodeSelect|code=
meld old new
}}

Check with gparted

{{CodeSelect|code=
lxsudo gparted
}}

Check disk size of boot drive.

{{CodeSelect|code=
df -h
}}

Qubes internal disk 476.91 GIB
Debian external boot disk 931.42 GiB
Backup external disk 931.41 GiB

Another way to find out which disk was being booted from.

{{CodeSelect|code=
sudo blkid
}}

Or viewing contents of file <code>/etc/fstab</code>.

{{CodeSelect|code=
cat /etc/fstab
}}

{{CodeSelect|code=
time dd bs=64K conv=noerror,sync status=progress if=/dev/XXX of=/dev/YYY
}}

<ref>
It is not possible to compare. <code>diff /dev/sda /dev/sdc</code> not possible because of different partition table and disk id.
</ref>

= Footnotes =
<references />

{{Footer}}

[[Category:Documentation]]
