{{Header}}
{{Title|
title=Browsing {{project name}} Documentation Offline
}}
{{#seo:
|description=Reading documentation without internet connection.
|image=https://www.{{project_clearnet}}/w/images/5/5a/Offline-2342342354.png
}}
[[image:Offline-2342342354.png|thumb|250px]]
{{mbox
| type    = notice
| image   = [[File:Ambox_notice.png|40px|alt=Info]]
| text    = At time of writing, there no easy way with good usability to use {{Project name}} documentation offline. ([https://forums.whonix.org/t/offline-documentation-discussion/413/81 development discussion])
}}

= Installation =
{{CodeSelect|code=
sudo apt-get update && sudo apt-get install --no-install-recommends git
}}

{{CodeSelect|code=
git clone --depth=1 https://github.com/WhonixBOT/whonix-wiki-html.git
}}

= Usage =
{{CodeSelect|code=
x-www-browser ~/whonix-wiki-html/Documentation.html
}}

= Warning =
NOTE: Users who wish to avoid internet connections.

No special measures where taken to enforce not using the internet. When clicking external links, the internet will be used. Browsing offline documentation pages might in theory result in external internet connections. If no external content must be load, disable networking of the virtual machine or the host computer.

= Wiki Database Dump =
'''A)''' [https://gitlab.com/{{project_name_short_lowercase}}/WhonixWikiBackups {{project name}} wiki as <code>mediawiki XML</code> database dump <u>not</u> including full history <code>dumpContent.xml</code> but including all wiki images] (using <code>git</code>, on gitlab) (ugly binary file, restoration possible in new mediawiki) (<code>rsync://{{project_clearnet}}/{{project_name_short_lowercase}}/{{project_name_short_lowercase}}developermetafiles/{{project_name_short_lowercase}}-wiki-backup-dump-content-current</code>)

'''B)''' [https://download.{{project_clearnet}}/{{project_name_short_lowercase}}developermetafiles/{{project_name_short_lowercase}}-wiki-backup-dump-content-full/dumpContent.xml {{project name}} wiki as <code>mediawiki XML</code> database dump including full history but <code>not</code> including wiki images <code>dumpContent.xml</code>] ([https://download.{{project_clearnet}}/{{project_name_short_lowercase}}developermetafiles/{{project_name_short_lowercase}}-wiki-backup-dump-content-full/dumpContent.xml.sha512sum <code>dumpContent.xml.sha512sum</code>]) (not using <code>git</code> because file size to big) (ugly binary file, restoration possible in mediawiki) (<code>rsync://{{project_clearnet}}/{{project_name_short_lowercase}}/{{project_name_short_lowercase}}developermetafiles/{{project_name_short_lowercase}}-wiki-backup-dump-content-full</code>)

Hints:

* Best to combine the two downloads above (full history '''A''' + all wiki images '''B''').
* Possible to [[Hosting_a_{{project_name_short}}_Mirror#rsync_from_{{project_clearnet}}|rsync from {{project_clearnet}}]].

Recommended steps to restore in a new mediawiki installation:

'''1)''' Restore full wiki history.

{{CodeSelect|code=
sudo -u www-data php /var/www/w/maintenance/importDump.php --uploads --dry-run /path/to/{{project_name_short_lowercase}}-wiki-backup-dump-content-full/dumpContent.xml
}}

* Path to mediawiki maintenance script <code>importDump.php</code> will likely be different.
* drop: <code>--dry-run</code>
* Probably also drop (likely broken) <code>--uploads</code> (not important)

'''2)''' Restore all wiki images.

{{CodeSelect|code=
sudo -u www-data php /var/www/w/maintenance/importImages.php /path/to/wiki/wiki-backup-dump-content-current/mediafiles
}}

* Path to mediawiki maintenance script <code>importImages.php</code> will likely be different.
* Check permissions. Folder to import from must be readable by user www-data. To test, run: <code>sudo -u www-data cp -r /path/to/wiki/wiki-backup-dump-content-current/mediafiles /tmp/delete</code> or so.

= Alternative Wiki Backup Formats =
* '''C)''' [https://github.com/{{project_name_short}}BOT/{{project_name_short}}-wiki-backup {{project name}} wiki as <code>mediawiki markdown</code>] (looks nicer but no automated path to restoration) <code>rsync://{{project_clearnet}}/{{project_name_short_lowercase}}/{{project_name_short_lowercase}}3developermetafiles/{{project_name_short_lowercase}}-wiki-backup</code>
* '''D)''' [https://github.com/{{project_name_short}}BOT/{{project_name_short_lowercase}}-wiki-html {{project name}} wiki as <code>HTML</code>] (no automated path to restoration anywhere else)

== Footnotes ==
{{reflist|close=1}}
[[Category:Documentation]]
{{Footer}}
