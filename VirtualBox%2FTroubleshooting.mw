{{Header}}
{{#seo:
|description=Whonix in VirtualBox - Troubleshooting
|image=https://www.whonix.org/w/images/8/81/Troubleshooting-114197640.jpg
}}

= Troubleshooting =

== Whonix does not Start? ==

=== PAE Crash ===

# Modify this setting in Whonix-Gateway: <code>Virtual Box</code> -> <code>Right-click on Whonix-Gateway</code> -> <code>Settings</code> -> <code>System</code> -> <code>Processor</code> -> <code>Uncheck the ''Enable PAE/NX'' Box</code> -> <code>OK</code>
# Afterwards, repeat these steps in Whonix-Workstation.
# Read the [[#Boot Options| Boot Options]] chapter and use the 486 kernel.

=== VERR_VMX_MSR_VMXON_DISABLED ===

# Modify this setting in Whonix-Gateway: <code>Virtual Box</code> -> <code>Right-click on Whonix-Gateway</code> -> <code>Settings</code> -> <code>System</code> -> <code>Acceleration</code> -> <code>Uncheck the "Enable VT-x/AMD-V" Box</code> -> <code>OK</code>
# Afterwards, repeat these steps in Whonix-Workstation.
# Read the [[#Boot Options| Boot Options]] chapter and use the 486 kernel.

If it still doesn't work, change the following setting:<br />
<code>Virtual Box</code> -> <code>Right-click on Whonix-Gateway</code> -> <code>Settings</code> -> <code>System</code> -> <code>Acceleration</code> -> <code>Uncheck the "Enable Nested Paging" Box</code> -> <code>OK</code>

=== VERR_SSM_FIELD_NOT_CONSECUTIVE ===

If the "{{Code2|Failed to load unit 'PATM' (VERR_SSM_FIELD_NOT_CONSECUTIVE).}}" error appears, {{Code2|VT-x}} must be enabled in BIOS settings. <ref>For basic instructions, see: https://www.wikihow.com/Change-Computer-BIOS-Settings</ref>

=== Kernel Panic ===

Kernel panics are often caused by similar issues that result in the [[#PAE crash|PAE crash]] and {{Code2|VERR_SSM_FIELD_NOT_CONSECUTIVE}} errors discussed above. 

If possible, enable {{Code2|VT-x}} in BIOS settings. If this option is unavailable, then disable PAE/NX in VirtualBox; see [[#PAE crash|PAE crash]] above for instructions. Finally, read the [[#Boot Options| Boot Options]] chapter and use the 486 kernel.

=== VT-x is disabled in BIOS ===

If the following error message appears.

<pre>
Failed to open a session for the virtual machine Whonix-Gateway.

VT-x is disabled in the BIOS.
(VERR_VMX_MSR_VMXON_DISABLED).
</pre>

Or.

<pre>
AMD-V is disabled in the BIOS (or by the host OS).
(VERR_SVM_DISABLED).
</pre>

Then enable {{Code2|VT-x}} in BIOS settings.

=== Error In supR3HardenedWinReSpawn ===
[[File:VirtualBox_supR3HardenedWinReSpawn.png|400px]]<br />
Do not update whilst the VMs are running, otherwise [[VirtualBox]] must be reinstalled.

=== Other Reasons ===

Before seeking advice in the forums, please first read the [[VirtualBox|VirtualBox]] page. It contains instructions on how to properly download and verify the Whonix virtual machine images. There is also help available in the form of screenshots and video instructions.

If none of these steps work, please visit the [https://forums.whonix.org Whonix User Help Forum] for further advice.

== Boot Options ==

When the grub boot menu appears, the boot options are available for two seconds. Two kernels are installed by default:

* The default 686-pae kernel.
* A 486 kernel for compatibility.

<b>If Whonix works out of the box, no changes are necessary.</b> In that case, it is recommended to use the default 686-pae kernel.

If a user needs to [[#PAE_crash| disable PAE]], then use the 486 kernel instead.

== Virtual Box Disk Images ==
=== INCONSISTENCY BETWEEN GRAIN TABLE AND BACKUP GRAIN TABLE ===

If this error appears, sometimes it helps to:

# Try and convert the vmdk to vdi.
# Remove the old vmdk from the VM.
# Attach the new vdi.

=== Import Whonix Images ===

Using the VirtualBox GUI to import Whonix images should work well in most cases. If not, follow the steps below. 

'''1.''' Check if there is enough free disk space. 

'''2.''' Refer to the Whonix [[Install|Install Screenshots]] and/or [[Videos|Video Tutorials]].

'''3.''' Delete any half-imported or otherwise broken virtual machine images.

'''4.''' Use the VBoxManage command line tool and copy the output.

<pre>
VBoxManage unregistervm "Whonix-Gateway" --delete
</pre>

<pre>
VBoxManage unregistervm "Whonix-Workstation" --delete
</pre>

'''5.''' Navigate to the folder where Whonix was downloaded and import Whonix-Gateway and Whonix-Workstation by using the VBoxManage command line tool.

<pre>
VBoxManage import Whonix-Gateway.ova
</pre>

<pre>
VBoxManage import Whonix-Workstation.ova
</pre>

'''6.''' Clean (anonymize) the output.

<pre>
# Remove operating system user name or any problematic paths.
</pre>

'''7.''' [[Contact|Contact lead Whonix developer]] Patrick Schleizer and send the output.

= Footnotes =

{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
