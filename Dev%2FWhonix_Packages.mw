

= Survey of Whonix Packages =

== Introduction ==

This page is an updated listing of Whonix packages and their functionality to help potential adopters.

=== Generic Packaging ===

Files in `etc/...` in root source folder will be installed to `/etc/...`, files in `usr/...` will be installed to `/usr/...` and so forth. This should make renaming, moving files around, packaging, etc. very simple. Packaging of most packages looks very similar.

=== How to use outside of Debian or derivatives ===

Although probably due to generic packaging not very hard. Still, this requires developer skills. [Ports](https://en.wikipedia.org/wiki/Porting) welcome!

=== How to Build deb Package ===

See comments below and [instructions](https://www.whonix.org/wiki/Dev/Build_Documentation/apparmor-profile-torbrowser).

* Replace `apparmor-profile-torbrowser` with the actual name of this package (equals the root source folder name of this package after you git cloned it).
* You only need [config-package-dev](https://packages.debian.org/wheezy/config-package-dev), when it is listed in the `Build-Depends:` field in `debian/control`.
* Many packages do not have signed git tags yet. You may request them if desired.
* We might later use a [documentation template](https://www.whonix.org/wiki/Template:Build_Documentation_Build_Package).


How to install in Debian using apt-get:

Binary packages are available in Whonix's APT repository. By no means you are required to use the binary version of this package. This might be interesting for users of Debian and derivatives. **Note, that usage of this package outside of Whonix is untested and there is no maintainer that supports this use case.**

1. Get [Whonix's Signing Key](https://www.whonix.org/wiki/Whonix_Signing_Key).

2. Add Whonix's Signing Key to apt-key.


<pre>
gpg --export 916B8D99C38EAF5E8ADC7A2A8D66066A2EEACCDA | sudo apt-key add -
</pre>

3. Add Whonix's APT repository.

<pre>
echo "deb http://sourceforge.net/projects/whonixdevelopermetafiles/files/internal/ wheezy main" > /etc/apt/sources.list.d/whonix.list
</pre>

4. Update your package lists.

<pre>
sudo apt-get update
</pre>

5. Install this package. Replace `package-name` with the actual name of this package.

<pre>
sudo apt-get install package-name
</pre>

=== Cooperation ===

Most welcome. [Ports](https://en.wikipedia.org/wiki/Porting), distribution maintainers, developers, patches, forks, testers, comments, etc. all welcome.


==== anon-apt-sources-list ====

'''/etc/apt/sources.list.d/debian.list for Anonymity Linux Distributions'''

A question of distribution maintenance strategies. The more standard
way would indeed be populating /etc/apt/sources.list at install or build time
and leaving /etc/apt/sources.list.d alone. The idea of managing
/etc/apt/sources.list.d/debian.list for the user is, the anonymity
distribution maintainers can decide when it is a better "change stable to
oldstable", "keep wheezy as long as needed to work out [eventual!] issues
that would break during upgrade to jessie" and such.

==== anon-base-files ====

'''base files for Anonymity Distributions'''

Anonymized operating system user name "user", /etc/hostname, /etc/hosts,
/var/lib/dbus/machine-id, which should be shared among all anonymity
distributions. See also:
* https://mailman.boum.org/pipermail/tails-dev/2013-January/002457.html
* https://labs.riseup.net/code/issues/5655
* http://lists.autistici.org/message/20140627.215105.24023267.en.html

Adds user "user" to the group "debian-tor", so user "user" can access Tor's
control port.

Provides /usr/lib/pre.bsh which if available, gets sourced by other
maintainer scripts. pre.bash implements an improved error log. Implements
trap ERR if function errorhandlergeneral does not exist. Runs silent by
default. Write xtrace to temporary log. Show full xtrace on unexpected
non-zero exit code. Shows exit code on unexpected non-zero exit code.
Enables xtrace (-x) for maintainer script when DEBDEBUG environment variable
is set to 1. Provides SKIP_SCRIPTS environment variable to skip scripts by
name. Provides provide color function.

==== anon-gpg-tweaks ====

'''/etc/skel/.gnupg/gpg.conf for Anonymity Distributions'''

Security and privacy enhancements for gnupg's config file /etc/skel/.gnupg/gpg.conf.

See also: https://raw.github.com/ioerror/torbirdy/master/gpg.conf https://github.com/ioerror/torbirdy/pull/11

==== anon-gw-anonymizer-config ====

'''Tor Configuration and Tweaks for Anonymity Distributions'''

Tor config file with distribution defaults (for stream isolation, etc.), example user configurations and other tweaks required. The Tor binary itself does not get modified.

This package is produced independently of, and carries no guarantee from, The Tor Project.

==== anon-gw-base-files ====

'''Base files for Anonymity Distribution Gateways'''

Provides a /usr/share/anon-gw-base-files/gateway marker file, which allows other packages to identify, that this is an anonymity distribution gateway.

Do not remove, unless you no longer wish to use an anonymity distribution gateway.

==== anon-gw-build-upgrade-tor ====

'''Build chroot script for upgrading Tor on Anonymity Distributions'''

Upgrades packages tor, tor-geoipdb, tor-arm and obfsproxy during the build process from The Tor Project's APT repository using /etc/apt/sources.list.d/torproject.list.

APT (timeout) options are supported through the apt_timeout_opts environment variable.

This package is produced independently of, and carries no guarantee from, The Tor Project

==== anon-gw-dhcp-conf ====

'''DHCP config for Anonymity Distribution Gateways'''

Prevents DHCP from modifications of /etc/resolv.conf by shipping a configuration file.

In context of Anonymity Distribution Gateways, it is useful to obtain network configuration for the interface to connect to the internet from a virtual machine or hardware router to avoid usability issues with manual static network configuration. At the same time, Anonymity Distribution Gateways usually do not need a functional system DNS resolver (/etc/resolv.conf), pointing to a clearnet DNS resolver, because ideally all the Gateway's traffic including its own DNS is routed through the anonymity network as well.

Usually the Gateway's firewall should ensure, that the Gateway will not leak it's own DNS requests. However, preventing DHCP from setting /etc/resolv.conf to a functional clearnet DNS resolver is useful as defense in depth. Also in case the Gateways system DNS resolver points to the anonymizer, it is crucial, that it does not get modified by DHCP.

==== anon-gw-dns-conf ====

'''DNS configuration Anonymity Linux Distribution Gateways'''

Pointing /etc/resolv.conf to 127.0.0.1.

Whether a Anonymity Linux Distribution Gateway supports system DNS for its own traffic in the clear or anonymized mainly depends on the Gateway's firewall.

Routing the workstation's system DNS through the anonymizer (also known as Transparent DNS Proxy) or not is up to the Gateway's firewall as well.

==== anon-gw-kde-startmenu ====

'''KDE Start Menu Favorites for Anonymity Distribution Gateways'''

Configures KDE Kickoff favorites.

For better usability.

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== anon-gw-leaktest ====

'''Leak Test for Anonymity Distribution Gateways'''

Integrated leak test.

Needs to be manually run.

See https://www.whonix.org/wiki/Dev/Leak_Tests.

==== anon-iceweasel-warning ====

'''Iceweasel Warning for Anonymity Distributions'''

Shows a local homepage saying "Do not use this browser for anything other than downloading Tor Browser, unless you know what you are doing!" in iceweasel.

For better usability/security.

Safe to remove if you know this.

==== anon-icon-pack ====

'''Icon Pack for Anonymity Distributions'''

Contains icons, that are used by other anonymity distribution specific packages. Others are welcome to use these icons according to their Free licenses as well.

==== anon-kde-streamiso ====

'''Stream Isolation (proxy) settings for KDE apps for Anonymity Distributions'''

Configures global proxy settings, which acts as a fallback if no other proxy settings are set, for KDE applications to socks 10.152.152.10:9122.

Otherwise unconfigured KDE applications would use no proxy settings (Transparent Proxying) if the anonymity distribution features a transparent proxy.

Useful to improve stream isolation.

On the other hand, anonymity distributions not featuring transparent proxying should probably not install this package by default, because then unconfigured KDE applications should by default not be able to connect.

==== anon-meta-packages ====

'''Dependencies for both, Anon-Gateway and Anon-Workstation'''

A metapackage, which installs packages which both, Anon-Gateway and Anon-Workstation, depend on.

Do not remove.

For a full list of dependencies check the README generated from the Debian Control file: https://github.com/Whonix/anon-meta-packages.

==== anon-mixmaster ====

'''Mixmaster over Tor for Anonymity Distribution Workstations'''

Allows tunneling mixmaster though Tor.

Allows running mixmaster-update without sudo for better usability.

Ships Mixmaster config file /etc/skel/.Mix/mix.cfg.

==== anon-shared-build-apt-sources-tpo ====

'''Adds TPO's APT repository to Anonymity Linux Distributions during build'''

Comes with "deb http://deb.torproject.org/torproject.org stable main", The Tor Project's APT signing key, and required chroot scripts.

Chroot scripts include adding The Tor Project's APT signing key to apt-key, updating package lists to include The Tor Project's APT repository and installing The Tor Project's deb.torproject.org-keyring package, which will keep The Tor Project's APT signing key current.

APT (timeout) options are supported through the apt_timeout_opts environment variable.

This package is produced independently of, and carries no guarantee from, The Tor Project.

==== anon-shared-build-ban-nonfree ====

'''Check for nonfree packages during build of Anonymity Distributions'''

Checking, that no packages from the contrib or non-free APT repository have been accidentally installed using a chroot-post.d script, that uses the vrms tool. If any were installed, it would invoke an error during the build process.

This is useful, because redistributing nonfree software is problematic for legal reasons.

Custom, self-made, private builds are free to omit this optional package.

==== anon-shared-build-inst-tb ====

'''Installs Tor Browser in Anonymity Distributions during build using tb-updater'''

Providing a chroot-post.d script to install Tor Browser during the build process of Anonymity Linux Distributions.

This package is produced independently of, and carries no guarantee from, The Tor Project.

==== anon-shared-build-log-build-version ====

'''Logs build version in Anonymity Linux Distributions during build'''

Logs environment variable anon_dist_build_version to /var/lib/anon-dist/build_version using a chroot-post.d script.

This can be useful for other packages to identify the build version and build time stamp of the system they are running in.

Deprecated in Whonix 13 - Replaced by anon-base-files postinst --- Logs build version in Anonymity Linux Distributions during build 

==== anon-shared-build-remember-sources ====

'''Logs GPL sources during build of Anonymity Linux Distributions'''

Using damngpl --source (Outputs snapshot.debian.net deb-src lines) to create /var/lib/anon-dist/gpl/damngpl_source.

Using damngpl --dget (Outputs format "package=1:1.0-1") to create /var/lib/anon-dist/gpl/damngpl_source.

Using damngpl --snapshot (Outputs snapshot.debian.net deb-src lines) to create /var/lib/anon-dist/gpl/damngpl_snapshot.

Using a chroot-post.d script.

This is useful to keep a log of GPL'ed source code that is included in the build, which is required for licensing reasons.

==== anon-shared-build-sanity-checks ====

'''Sanity Tests for Anonymity Linux Distribution builds'''

Providing a chroot-pre.d and a chroot-post.d script running multiple sanity tests. Useful, optional integrity check.

Running "sync", which is a very basic function, which should always succeed.

Running "dpkg --audit", which should exit 0 and output nothing if everything is okay.

Running "dpkg --configure -a" to check if the system is functional and to see, that no packages require manual configuration.

Checking if "sysctcl -p" runs without an error.

Benchmarking 'sudo -u root echo "This is a test echo."' using 'time' for debugging output during run.

Trying to find out if there are packages (or debs) which do not have an MD5 sums file using "debsums --list-missing".

Trying to find out if there are any packages (or debs) with missing files using "debsums --silent".

Listing changed configuration files using "debsums --config --silent" for debugging output during run.

==== anon-shared-build-upgrade-torsocks ====

'''Build chroot script for upgrading Tor on Anonymity Distributions'''

Upgrades packages torsocks during the build process from The Tor Project's APT repository using /etc/apt/sources.list.d/torproject.list.

APT (timeout) options are supported through the apt_timeout_opts environment variable.

This package is produced independently of, and carries no guarantee from, The Tor Project.

==== anon-shared-helper-scripts ====

'''Helper scripts useful for Anonymizing Linux Distributions'''

Library that can be used by other (anonymity related) packages that want to programmatically get information about states of Tor. Common code, that is often required. Includes bash and Python helper scripts.

==== anon-torchat ====

'''/etc/skel/.torchat/torchat.ini for Anonymity Distribution Workstations'''

TorChat config file /etc/skel/.torchat/torchat.ini which prevents Tor over Tor.

See also: https://tor.stackexchange.com/questions/427/is-running-tor-over-tor-dangerous

==== anon-ws-base-files ====

'''Base Files for Anonymity Distribution Workstations'''

Contains a marker file /usr/share/anon-ws-base-files/workstation that allows other applications to identify, that they are running inside an Anonymity Distribution Workstation.

Do not remove, unless you no longer wish to use an Anonymity Distribution Workstation.

==== anon-ws-disable-stacked-tor ====

'''Prevents Tor over Tor in Anonymity Distribution Workstations'''

Supposed to be installed on Workstations, which prevents installing the real Tor package from upstream (ex: Debian, The Tor Project) APT repositories. Its purpose is to prevent, running Tor over Tor.

It allows installation of packages, which depend on Tor, such as TorChat, parcimonie and torbrowser-launcher.

This package uses the "Provides: tor" field[1], which should avoid any kinds of conflicts, in case upstream releases a higher version of Tor. This won't work for packages, which depend on an explicit version of Tor (such as TorChat). This is non-ideal, since for example the torchat package will install Tor, but still acceptable, because of the following additional implementations.

Tor's autostart is disabled in /etc/default/tor (dpkg-diverted using config-package-dev), so even if the tor package gets installed, it won't be automatically started.

Binaries eventually installed (by the tor Debian package) /usr/bin/tor as well as /usr/sbin/tor are replaced with a dummy /usr/lib/anon-ws-disable-stacked-tor/dummytor) that does nothing (dpkg-diverted using config-package-dev).

rinetd (soon to be replaced by socat) listens on Tor's default ports. system Tor's 127.0.0.1:9050, 127.0.0.1:9051 and TBB's 127.0.0.1:9150, 127.0.0.1:9051, which prevents the default Tor Browser Bundle or Tor package by The Tor Project from opening these default ports, which will result in Tor failing to open its listening port and therefore exiting, thus preventing Tor over Tor.

See also: https://tor.stackexchange.com/questions/427/is-running-tor-over-tor-dangerous

[1] See "7.5 Virtual packages - Provides" on http://www.debian.org/doc/debian-policy/ch-relationships.html

This package is produced independently of, and carries no guarantee from, The Tor Project.

==== anon-ws-dns-conf ====

'''DNS configuration Anonymity Linux Distribution Workstations'''

Whether a Anonymity Linux Distribution Gateway supports anonymized system DNS for Workstation's traffic (also known as Transparent DNS Proxy) mainly depends on the Gateway's firewall.

This package is simply installing /etc/resolv.conf which points to 10.152.152.10, where an Anon-Gateway is supposed to provide a DnsPort on port 53.

When you do not wish to use the Transparent DNS features, this package can be removed.

==== anon-ws-kde-startmenu ====

'''KDE Start Menu Favorites for Anonymity Distribution Workstations'''

Configures KDE Kickoff favorites.

For better usability.

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== anon-ws-leaktest ====

'''Leak Test for Anonymity Distribution Workstations'''

Integrated leak test.

Needs to be manually run.

See https://www.whonix.org/wiki/Dev/Leak_Tests.

==== apparmor-profile-anondist ====

'''AppArmor Profile for Anonymity Linux Distributions'''

Displaces /etc/apparmor.d/abstractions/base with a version, that includes additions required for Anonymity Linux Distributions.

Does not depend on AppArmor, so this package can be installed by default on any anonymity distribution by default, without requiring to also have AppArmor installed. Just for the case, AppArmor gets installed later by the user.

==== apparmor-profiles ====

'''AppArmor profiles'''

A collection of AppArmor profiles developed by the Whonix team. Its planned to eventually upstream them to Debian.

Packages currently covered:

* Gwenview
* Icedove
* Okular
* Pidgin
* Sdwdate
* Timesync
* Tor Browser
* VirtualBox
* Whonixcheck
* Xchat


==== bootclockrandomization ====

'''Randomizes clock when systems boots'''

Randomizes clock at boot time. Moves clock a few seconds and nanoseconds to past or future. Useful in context of anonymity/privacy/Tor.

This is useful to enforce the design goal, that the host clock and Gateway/Workstation clock should always slightly differ (even before secure timesync succeeded!) to prevent time based fingerprinting / linkablity issues.

Runs before Tor / sdwdate (if installed).

See also: https://www.whonix.org/wiki/Dev/TimeSync

==== control-port-filter-python ====

'''Whitelisting filter for dangerous Tor control protocol commands'''

Filters out Tor control protocol commands that are dangerous for anonymity such as GETINFO ADDRESS using a whitelist. Acts as a proxy between the client application and Tor.

For example it allows using Tor Browser's New Identity feature on Anonymity Distribution Workstations, fixes Tor Browser's about:tor default homepage and Tor Button status indicator without exposing commands that are dangerous for anonymity.

This package is supposed to be installed on Anonymity Distributions.

It seamlessly integrates if the anon-ws-disable-stacked-tor package is installed on a Anonymity Distribution Workstations. For example it then allows running a unmodified Tor Browser Bundle from The Tor Project without Tor over Tor and with functional New Identity and about:tor.

This control-port-filter is written in Python. The original Python code was forked from the Tails version of control port filter.

For more design information see: https://www.whonix.org/wiki/Dev/CPFP 

This package is produced independently of, and carries no guarantee from, The Tor Project.

==== curl-scripts ====

'''Scripts for curl'''

Contains a script for curl progress bar in terninal. Includes another script to convert curl exit codes to curl status messages. Implemented in bash. Common code that is often required by other scripts.

==== damngpl ====

'''Extract source package info from Debian status files'''

damngpl will parse a Debian-style /var/lib/dpkg/status file and extract source package information about installed packages. This information can be used in several ways, usually to download source packages.

Multiple input files can be specified on the command line, or piped into standard input if no files are specified. Results are returned to standard output.

The name damngpl was chosen as a tongue-in-cheek description of its purpose (downloading Debian sources for the Finnix project to remain GPL compliant). Please do not send hate mail to the author, thinking he is anti-GPL. He's not.

See also: http://blog.finnix.org/2011/08/21/finnix-and-gpl-compliance/

==== genmkfile ====

'''Generic Makefile for Scripts'''

Makes packaging scripts simpler. No more need to manually maintain 'make install' targets or distribution specific install files such as debian/pkg-name.install.

Files in etc/... in root source folder will be installed to /etc/..., files in usr/... will be installed to /usr/... and so forth. This should make renaming, moving files around, packaging, etc. very simple. Packaging of most packages can look very similar.

Provides common make targets such as 'make install'. Very extensible through file ./make-helper-overrides.bsh or folder ./make-helper-overrides.d. By using overrides, any make target can be easily extended using pre or post hooks or replaced.

Contains a minimal Makefile while the heavy lifting is done by a bash script make-helper.bsh.

==== gpg-bash-lib ====

'''GPG Bash Wrapper library'''

GPG file verification bash library, addresses comprehensive threat model, that covers file name tampering, indefinite freeze, rollback, endless data attacks.

==== gpl-sources-download ====

'''Downloads GPL'ed source code of all installed packages'''

Used damngpl to get a list of all GPL'ed packages, then downloads them using apt-get source.

APT (timeout) options are supported through the apt_timeout_opts environment variable.

==== grub-enable-apparmor ====

'''Enables AppArmor in Grub Settings'''

Ships a /etc/default/grub.d/30_apparmor.cfg configuration file, that injects "apparmor=1 security=apparmor" into the GRUB_CMDLINE_LINUX_DEFAULT variable.

For better security/usability.

==== grub-output-verbose ====

'''Enables verbose output during boot'''

Ships a /etc/default/grub.d/30_output_verbose.cfg configuration file, that removes "quiet" from the GRUB_CMDLINE_LINUX_DEFAULT variable.

For better usability, so it doesn't look like boot hangs on slow systems and to ease debugging in case of issues.

==== grub-screen-resolution ====

'''Sets 1024x768 as boot screen resolution'''

Ships a /etc/default/grub.d/30_screen_resolution.cfg configuration file, that injects "vga=0x0317" into the GRUB_CMDLINE_LINUX_DEFAULT variable.

For better usability.

==== ipv4-forward-disable ====

'''Deactivates IPv4 forwarding using /etc/sysctl.d/'''

IPv4 forwarding is not required for a Tor based Anonymity Distribution Gateways. Deactivating it as defense in depth to prevent leaks.

For better security.

==== ipv6-disable ====

'''Deactivates IPv6 using /etc/sysctl.d/'''

There are no IPv6 Anonymity Distribution Gateways featuring an IPv6 firewall yet. Therefore deactivating it to prevent leaks.

For better security.

==== kde-apper-no-autoupdate ====

'''Deactivates automatic updates for Package Manager Apper'''

Useful in context of networks with limited traffic quota, slow networks and anonymity distributions.

In latter case, the default automatic updates interval would be too predictable (expectable amount of traffic every X), thus eventually be vulnerable for traffic fingerprinting.

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== kde-common-resolution ====

'''Sets resolution to 1366x768 in KVM and VirtualBox'''

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== kde-dolphin-menubar-enable ====

'''Enables Menubar in Dolphin by default'''

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== kde-kdm-autologin ====

'''Enables passwordless Autologin in KDM by default'''

This package is most useful in virtual machines, because there it makes less sense to use a password for desktop login (better used on the host).

Also if you are using full disk encryption and are the only user of that machine, the password required for full disk encryption is enough and you may wish not to have an unnecessary extra login screen for the desktop.

==== kde-kgpg-tweaks ====

'''KGpg tweaks for Anonymity Linux Distributions'''

Deactivates KGpg's first run wizard. Uses hkp://qdigse2yzvuglcix.onion as default keyserver. Disables tip of the day. Disables KGpg's systray.

By KDE default, KGpg starts in systray without any foreground window. Also by KDE default, KGpg's tray icon is hidden. This is very confusing for users, because when they start KGpg, they neither see a foreground window nor a tray icon. Therefore this package deactivates KGpg's tray icon, so KGpg gets started in foreground without tray icon. Users are free to change this setting.

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== kde-konsole-unlim-scrollback ====

'''Sets Unlimited Scrollback in Konsole'''

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== kde-lowfat ====

'''Low Fat Settings for KDE'''

Low Fat Settings for KDE - for better performance.

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== kde-mouse-doubleclick ====

'''Double click instead of single click in KDE'''

Double click instead of single click in KDE for more windows-like usability.

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== kde-no-move-max-win ====

'''Deactivate maximize windows when moved to the top'''

In context of anonymity it might be better not to maximize the browser window (https://trac.torproject.org/projects/tor/ticket/7255).

To prevent users from accidentally maximizing their browser window, it is better when KDE's feature to maximize windows when moved to the top is disabled.

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== kde-privacy ====

'''Deactivates klipper autostart'''

Delete klipper contents on exit - for better security

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== kde-sounds-off ====

'''Icon Pack for Anonymity Distributions'''

Deactivates KDE's system sounds - Making less noise. Getting less attention in public places.

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== kmix-disable-autostart ====

'''Deactivates kmix autostart'''

A metapackage, that deactivates kmix autostart.

Workaround to fix Klipper (and others?) autostart. Working around bug http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=630617 by using workaround http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=630617#79.

==== knetattach-hide ====

'''Hides knetattach start menu entry'''

This metapackage hides the start menu entry of knetattach.

knetattach is part of the kdebase-runtime Debian package. Whonix developers are not aware of any reviews of this application with respect to anonymity/privacy.

==== ksm ====

'''KSM init.d script for Debian GNU/Linux'''

Enable kernel shared memory for KVM on Debian or Ubuntu (not installed by default in Whonix)

==== msgcollector ====

'''Notification System for X and Terminal'''

Collects messages by applications using this system and dispatches them in X and in terminal.

Without having either notify-send (package libnotify-bin) or having kdialog (package kde-baseapps-bin) installed, passive popups will not be supported.

==== open-link-confirmation ====

'''Asks for confirmation before opening links'''

Asks before a link is (accidentally) opened in a browser. Links are opened in x-www-browser.

Currently only the Tor Browser starter from the tb-starter package (by Whonix developers) supports using open-link-confirmation. Shell wrappers could be written to support other browsers as well.

On an Anonymity Gateway (when the anon-gw-base-files package is installed), it honors the $EDITOR environment variable (falls back to kwrite if unset), asks if a file should be opened in an editor before opening it and informs, that opening links on a Gateway is unsupported for security reasons.

This package is produced independently of, and carries no guarantee from, The Tor Project.

==== pidgin-improved-privacy ====

'''Improves Pidgin's Privacy'''

A metapackage that deactivates protocols, that are not suited in context of anonymity distributions, because those do not support authenticated/encrypted connections to the server, i.e. all protocols besides jabber and irc.

TODO: https://tails.boum.org/contribute/design/#index42h3

==== pkg-manager-longer-timeouts ====

'''Longer Timeouts for Package Manager APT'''

Raising timeout and retries using configuration snippet. Useful in context of slow networks and anonymity distributions.

Ships a configuration file /etc/apt/apt.conf.d/90longer-timeouts to configure apt-get.

==== pkg-manager-no-autoupdate ====

'''Deactivates automatic updates for Package Manager APT'''

Useful in context of networks with limited traffic quota, slow networks and anonymity distributions.

In latter case, the default automatic updates interval would be too predictable (expectable amount of traffic every X), thus eventually be vulnerable for traffic fingerprinting.

==== power-savings-disable-in-vms ====

'''Disables power savings when run inside a virtual machine'''

It is not useful to open a screensaver or to power down the desktop for operating systems that are run inside VMs. There is no real display that could be saved and no real power that could be saved. From usability perspective it also is counter intuitive when looking at the VM window and only seeing a black screen. Therefore it makes sense to disable power savings in VMs.

When not run inside VMs, this package does nothing.

==== poweroff-passwordless ====

'''Allow powering off machine in console without requiring root password'''

Allow powering off or reboot by typing "sudo poweroff" or "sudo reboot".

This is useful in context of graphical desktop environments (which allow to reboot / power off without a password anyway as well as in virtual machines (where password protection for the desktop makes much more sense to be applied on the host).

Implemented by providing a /etc/sudoers.d/poweroff-passwordless snippet.

==== python-guimessages ====

'''Translatable GUI Messages'''

Generic modules guimessage.py and translations.py. Called with two parameters: .yaml file path and yaml section. Return translations according to distribution local language (Python 'locale').

==== qubes-whonix ====

'''Qubes Configuration for Whonix-Gateway and Whonix-Workstation'''

This package contains all the scripts and configuration options to be able to run Whonix-Gateway and Whonix-Workstation within a Qubes environment.

Whonix-Gateway should run as a ProxyVM.

Whonix-Workstation should run as an AppVM.

Template updates over Tor.

==== qxl-xorg-enhance ====

'''Improve QXL Rendering Performance'''

This package optimizes the QXL Xorg driver in VMs.

Technically speaking, this package creates the configuration file 50-qxl.conf in /usr/share/X11/xorg.conf.d/

==== rads ====

'''RAM Adjusted Desktop Starter'''

If there is more than X MB RAM in total, the desktop environment will be started.

If less than X MB RAM in total (for example, only 128 MB RAM in total), no desktop environment will be started.

This should be quite convenient, because users with low RAM could reduce Y MB and even if they sometimes wanted to configure/check something, they could assign 512 RAM and automagically boot into the graphical desktop. There are also many settings in /etc/rads.d/ (stackable) to configure this feature, so if you want, you can also add a lot RAM, but not boot into a desktop environment, or use different display managers and so on.

Most useful in virtual machines.

==== scurl ====

'''SSL curl wrapper'''

Simple wrapper called scurl, that adds "{{Curl Secure}}" in front of all invocations of "curl" when running "scurl".

For better security/usability.

Safe to remove if you are not using this.

==== sdwdate ====

'''Secure Distributed Network Time Synchronization'''

Time keeping is crucial for security, privacy, and anonymity. Sdwdate is a Tor friendly replacement for rdate and ntpdate that sets the system's clock by communicating via onion encrypted TCP with Tor onion webservers.

At randomized intervals, sdwdate connects to a variety of webservers and extracts the time stamps from http headers (RFC 2616). Using sclockadj option, time is gradually adjusted preventing bigger clock jumps that could confuse logs, servers, Tor, i2p, etc.

Plugins are supported via hooks. These hooks include pre-connect, pre-fetch, post-fetch, post-success, post-failure, and progress. Sdwdate comes without a GUI, but is available as a plugin called timesync.

This package contains the sdwdate time fetcher and daemon. No installation on remote servers required. To avoid conflicts, this daemon should be not be enabled together with ntp or tlsdated.

==== sdwdate-gui ====

'''Sdwdate Monitor'''

sdwdate-gui is a systray icon monitor for sdwdate: checks sdwdate's status and modify the tray icon accordingly. In addition, it allows the user to restart sdwdate and view the log.

==== sdwdate-plugin-anon-shared-con-check ====

'''Sdwdate Connection Checker Plugin for Anonymity Distributions'''

In context of Anonymity Distributions, that route all traffic through an anonymizer, sdwdate should wait until the anonymizer is ready to establish anonymous connections.

This plugin integrates with sdwdate, checks if Tor is enabled (on Gateway only), checks that there is currently no packager manager running, and checks that Tor is ready to establish connections.

==== sdwdate-plugin-anon-shared-streamiso ====

'''Sdwdate Stream Isolation Plugin for Anonymity Distributions'''

Plugin for sdwdate.

Sets sdwdate's proxy settings to socks 10.152.152.10:9108.

For better stream isolation (better anonymity/privacy).

==== security-misc ====

'''enhances misc security settings'''

* deactivates previews in Dolphin
* deactivates previews in Nautilus

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== shared-folder-help ====

'''Makes setting up a shared folder for virtual machines a bit easier'''

A metapackage, that creates a folder /mnt/shared with chmod 777, adds a group "vboxsf", adds user "user" to group "vboxsf". Facilitates auto-mounting of shared folders.

Currently only helps using shared folders with VirtualBox a bit easier (as in requiring fewer manual steps from the user). Might in future make use of other virtual machine's shared folders easier.

==== swap-file-creator ====

'''Adds encrypted swap file to the system'''

On every boot, creates a new encrypted swapfile with a random password.

Useful for systems with low RAM such as inside virtual machines.

Has an option to shred the swapfile on shutdown.

==== swappiness-lowest ====

'''Let the kernel only swap if it is absolutely necessary using /etc/sysctl.d'''

Sets vm.swappiness to the lowest possible value, which is 0. Experience has shown, that in virtual machines have better performance when using this setting.

==== tb-default-browser ====

'''Configures system to use /usr/bin/torbrowser as default browser'''

Sets /usr/bin/x-www-browser to /usr/bin/torbrowser.

Sets /usr/bin/gnome-www-browser to /usr/bin/torbrowser.

Sets BROWSER environment variable to /usr/bin/x-www-browser by using /etc/profile.d/ and /etc/X11/Xsession.d/ hooks.

Registers of MIME type handlers to 'torbrowser'.

Sets KDE's default browser to x-www-browser. This only takes effect for newly created user accounts. Not for existing user accounts. This is most useful to help Linux distribution maintainers setting divergent defaults.

See also: The Default Browser on Linux Debacle http://blog.codef00.com/2011/02/18/the-default-browser-on-linux-debacle/

This package is produced independently of, and carries no guarantee from, The Tor Project.

==== tb-starter ====

'''Tor Browser Starter'''

Provides a Tor Browser Starter start menu entry and /usr/bin/torbrowser starter.

Starts /home/user/tor-browser_*/start-tor-browser depending on language selection.

Uses open-link-confirmation if available.

This package is produced independently of, and carries no guarantee from, The Tor Project.

==== tb-updater ====

'''Tor Browser Downloader by Whonix developers'''

Automates download and verification of Tor Browser from The Tor Project's website. Useful for initial installation of Tor Browser, clean re-installations of Tor Browser and keeping newly created Qubes AppVMs inherited from updated Qubes TemplateVMs can ship up to date versions of Tor Browsers.

Incapable of preserving of updating and preserving user data. Use Tor Browser's internal updater for that purpose. Notifies about already exiting installations of Tor Browser. Renamed rather than deletes old versions of Tor Browsers to avoid user data loss.

Has a cli and a gui mode. Can auto detect latest version numbers or use user configured version numbers. Comes with a download confirmation screen that lets users choose which version to download. [1] Has a installation confirmation screen [2] that enables users to detect indefinite freeze and rollback attacks.

Integrates well with tb-starter, tb-default-browser and open-link-confirmation package as well as with Qubes.

Without the curl-scripts package installed, the GUI will not move the progress bar.

If you have the curl-scripts package installed, it will show a nicer progress bar when run in terminal and more meaningful curl exit code messages, when curl failed.

When having the anon-shared-helper-scripts package installed (recommended for Anonymity Distributions), Tor Browser Downloader will check, that Tor is enabled, that no package manager is currently running and that Tor finished bootstrapping before download attempts.

This package is produced independently of, and carries no guarantee from, The Tor Project.

[1] https://www.whonix.org/wiki/Tor_Browser#Download_Confirmation_Screen 
[2] https://www.whonix.org/wiki/Tor_Browser#Installation_Confirmation_Screen

==== tcp-timestamps-disable ====

'''Disabled TCP-Timestamps'''

TCP time stamps (rfc 1323) allow for tracking clock information with millisecond resolution. This may or may not allow an attacker to learn information about the system clock at such a resolution, depending on various issues such as network lag. This information is available to anyone who monitors the network somewhere between the attacked system and the destination server. It may allow an attacker to find out how long a given system has been running, and to distinguish several systems running behind NAT and using the same IP address. It might also allow to look for clocks that match an expected value to find the public IP used by a user.

Hence, this package disables this feature by shipping the /etc/sysctl.d/tcp_timestamps.conf configuration file.

Note that TCP time stamps normally have some usefulness. They are needed for:

* the TCP protection against wrapped sequence numbers; however, to trigger a wrap, one needs to send roughly 2^32 packets in one minute: as said in rfc 1700, "The current recommended default time to live (TTL) for the Internet Protocol (IP) [45,105] is 64". So, this probably won't be a practical problem in the context of Anonymity Distributions.

* "Round-Trip Time Measurement", which is only useful when the user manages to saturate their connection. When using Anonymity Distributions, probably the limiting factor for transmission speed is rarely the capacity of the user connection.

==== timesanitycheck ====

'''Checks if the system clock is sane between build timestamp and expiration date'''

Reports, if clock is sane and not slower than build timestamp or faster than expiration date (configurable, default currently set to 17 MAY 2033 10:00:00).

This should catch situations, where the host's clock is too much off (CMOS battery defect, user mistakenly set a very wrong date, etc.), resulting in network time synchronization tools (such as sdwdate) no longer being able to correct the clock; catch eventual bigger bugs in network time synchronization tools; and some types of attacks on network time synchronization.

Since notifications in terminal during boot messages are not well visible and since manually running timesanitycheck before and after running network time synchronization is inconvenient, it is recommended to install the timesync package as well, which will automate running timesanitycheck before and after running sdwdate and inform the user in case the clock is not sane with messages in X as well as in tty1.

==== timesync ====

'''Sdwdate Monitor and User Interface Plugin'''

Timesync is a monitor and user interface for sdwdate, bootclockrandomization and timesanitycheck. Notifications are dispatched in X and/or tty0 depending on availability. Checks bootclockrandomization's status; runs timesanitycheck before and after running sdwdate; checks sdwdate's status.

After boot, sdwdate runs in startup mode. When sdwdate is still in progress when X gets available, a progress bar will be shown. Timesync informs with an active popup in X if any error has been detected. Otherwise a passive popup in X will notify success.

If sdwdate is still in progress when tty0 gets available, if sdwdate failed or succeeded, notifications will be send to tty0.

These are important information for the user, because a correct clock is crucial for security, anonymity and privacy.

To prevent the user from getting irrelevant information, unless timesync gets manually run, later on, when sdwdate runs in daemon mode, no more progress bars or success notifications will shown. Only failures will be notified then.

In other words:

* sdwdate startup mode: show progress bar if necessary, show failure or success messages.
* sdwdate daemon mode: don't show progress bar or success messages, show failure messages
* sdwdate manual mode: show progress bar, show failure or success messages.

==== timezone-utc ====

'''Sets timezone to UTC'''

A metapackage, that sets timezone to UTC.

This is recommended for Anonymity Distributions.

For better privacy/anonymity.

==== tor-ctrl ====

'''Tor control port command line tool'''

Commandline tool for executing Tor ControlPort commands.

https://www.torproject.org/svn/trunk/doc/spec/control-spec.txt

This package is produced independently of, and carries no guarantee from, The Tor Project.

==== usability-misc ====

'''Misc usability improvements'''

Creates user "user" if it does not already exist.

Adds user "user" to group libvirt as well as to group kvm.

Ships a file /etc/sudoers.d/user-passwordless that contains comments and "#user ALL=(ALL:ALL) NOPASSWD:ALL". Lets user "user" easily run all commands without password. Disabled (out commented) by default.

==== uwt ====

'''Use Applications over Tor with Stream Isolation and Time Privacy'''

Can add "torsocks" and/or "timeprivacy" before invocation of applications when configured to do so. For example, when simply typing "apt-get" instead of "torsocks apt-get", "apt-get" can still be routed over Tor.

Uwt is a hack, which can be used to add stream isolation support to torsocks as long as torsocks does not feature native stream isolation support.

The uwt package comes with the following applications pre-configured to use uwtwrapper, Tor and stream isolation:

* apt-get
* aptitude-curses
* curl
* git
* gpg
* mixmaster-update
* rawdog
* ssh
* wget
* yum

To circumvent a uwt wrapper on a by case base, you append ".anondist-real" to the command, for example "apt-get.anondist-real". You can also deactivate specific or all uwt wrappers by using the stackable .d-style configuration folder /etc/uwt.d.

Uwt can only work only as good as torsocks. If torsocks is unable to route all of an application’s traffic over Tor, ex. if there is an leak, there will also be one when using uwt. For that reason, it is recommended to use Anonymity Distributions, that prevent such leaks.

If an applications has native support for socks proxy settings, those should be preferred over uwt. Also refer to the TorifyHOWTO and your distribution's documentation.

Timeprivacy can keep your time private. You can create wrappers for applications and timeprivacy will feed those applications with a fake time, which obfuscates at which time you really used that applications (such as when you made the git commit or when you signed that document). It does NOT set your time zone to UTC. (You could manually set your timezone to UTC or install the timezone-utc package.)

This package is probably most useful for Anonymity Distributions.

This package is produced independently of, and carries no guarantee from, The Tor Project.

==== vbox-disable-timesync ====

'''Disables VirtualBox guest addition's time synchronization feature'''

When VirtualBox guest additions are installed in a VirtualBox Virtual Machine (VM), VirtualBox will set the VM's time to the host's time. In most cases, this is a useful feature, but not in context of anonymity/privacy, where the VM's clock is supposed to differ from the host's clock.

VirtualBox's feature would interfere with other network time synchronization mechanisms, such as sdwdate or bootclockrandomization.

This package contains an init script, that disables this VirtualBox feature.

==== whonix-base-files ====

'''Whonix base system miscellaneous files'''

This package contains several important miscellaneous files, such as /etc/issue, /etc/motd, /etc/dpkg/origins/whonix, /etc/skel/.bashrc, /usr/bin/whonix, and others.

Sets the WHONIX environment variable to 1 as well.

==== whonix-developer-meta-files ====

'''whonix-developer-meta-files'''

Scripts for managing Whonix's offical repository and Whonix News; debug scripts; developer documentation and deprecared code https://github.com/Whonix/Whonix

==== whonix-gw-desktop-shortcuts ====

'''Desktop Icons for Whonix-Gateway'''

A metapackage, that creates shortcuts on the desktop, which are useful for Whonix-Gateway.

For better usability.

Safe to remove.

==== whonix-gw-firewall ====

'''Whonix-Gateway's Firewall'''

iptables rules script and firewall configuration file for Whonix-Gateway.

Features:

* transparent proxying
* stream isolation
* reject invalid packages
* fail closed mechanism
* optional VPN-Firewall
* optional isolating proxy
* optional incoming flash proxy
* optional Tor relay

Do not remove, unless you no longer wish to use Whonix.

==== whonix-gw-kde-desktop-conf ====

'''KDE Desktop Settings for Whonix-Gateway'''

Enables KDE folderview (allows desktop shortcuts) and sets Whonix-Gateway specific wallpaper.

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== whonix-gw-network-conf ====

'''Network Configuration for Whonix-Gateway'''

Includes /etc/network/interfaces for Whonix-Gateway.

Sets up two network interfaces, an external one eth0 and an internal one eth1.

Loads Whonix's firewall using pre-up hook. Fails closed.

==== whonix-host-firewall ====

'''Whonix-Host's Firewall'''

iptables rules script and firewall configuration file for Whonix-Host.

Supposed to be installed on Whonix Hosts.

Do not remove, unless you no longer wish to use Whonix.

==== whonix-initializer ====

'''Implements Whonix's Verifiable Builds feature and initializes Whonix'''

Contains a chroot-scripts-post.d script, that cleans up temporary files, logs, and removed non-deterministic files using existing Debian prerm and postrm maintainer scripts. This helps auditors verifying binary builds of Whonix to check for backdoors and integrity.

On first boot, all packages that were previously deconfigured, are reinstalled to restore full functionality of the system.

==== whonix-legacy ====

'''Prepare older Build Versions of Whonix for Upgrade'''

Applies fixes required for upgrading from for example Whonix 8.x to Whonix 9.x etc.

Upgrades from Whonix 7.x or older versions is unsupported.

Safe to remove.

==== whonix-libvirt ====

'''Whonix Libvirt XML Files for KVM'''

Libvirt XML files for Whonix-Gateway, Whonix-Workstation, Whonix-Custom-Workstation and Whonix's internal network.

See also:

* https://www.whonix.org/wiki/KVM


==== whonix-repository ====

'''Whonix APT Repository Tool'''

This tool can always be used to enable either Whonix's stable, testers or developers repository or to disable Whonix's repository.

Whonix's APT Repository is not enabled by default. Some users prefer this for trust/security reasons.

On first boot of Whonix, the Whonix Repository Tool gets automatically started by whonixsetup. The user is free to either leave Whonix's repository disabled or to configure it as desired.

Technically speaking, this tool creates or deletes /etc/sources.list.d/whonix.list and adds or deletes Whonix's signing key from apt-key.

==== whonix-setup-wizard ====

'''First Time Connection Setup'''

When Whonix starts for the first time, it won't automatically connect to the public Tor network. This is useful for users who want to hide Tor from their ISP. whonixsetup is automatically started, which educates about different methods to connect (public Tor network, bridges, etc.).

Also automatically starts the Whonix Repository Tool (if installed), so the user can decide whether to use Whonix's Repository and if yes, choose which one.

==== whonix-welcome-page ====

'''Local Browser Homepage for Whonix'''

Whonix specific browser homepage used in Tor Browser.

Contains Whonix logo and Whonix links.

Safe to remove, if you know what you are doing.

==== whonix-ws-desktop-shortcuts ====

'''Desktop Icons for Whonix-Workstation'''

A metapackage, that creates shortcuts on the desktop, which are useful for Whonix-Workstation.

For better usability.

Safe to remove.

==== whonix-ws-firewall ====

'''Whonix-Workstation's Firewall'''

This is a second, extra firewall for Whonix-Workstation. Experts should read the design notes in man whonix_firewall and make an informed decision.

==== whonix-ws-irc-chat-support ====

'''Shortcut to join the Whonix user-to-user Support Channel'''

Joins #Whonix on irc.oftc.net. Creates a start menu entry and desktop icon.

For better usability.

Safe to remove.

==== whonix-ws-kde-desktop-conf ====

'''KDE Desktop Settings for Whonix-Workstation'''

Enables KDE folderview (allows desktop shortcuts) and sets Whonix-Workstation specific wallpaper.

For better usability.

This package only takes effect for newly created user accounts. Not for existing user accounts. This package is most useful to help Linux distribution maintainers setting divergent defaults.

==== whonix-ws-network-conf ====

'''Network Configuration for Whonix-Workstation'''

Includes /etc/network/interfaces for Whonix-Workstation.

Sets up an internal one eth0.

Loads Whonix's firewall using pre-up hook. Fails closed.

==== whonix-ws-start-menu-additions ====

'''Extra Start Menu Entries for Whonix-Workstation'''

Contains start menu entries for the following links:

* contribute
* donate
* forum
* mailinglist
* documentation
* featureblog
* importantblog

==== whonixcheck ====

'''Anonymity and security check'''

Checks many important aspects of Whonix for better security.

Only checks things. Does not change things.

Safe to remove.

==== whonixsetup ====

'''First Time Connection Setup'''

When Whonix starts for the first time, it won't automatically connect to the public Tor network. This is useful for users who want to hide Tor from their ISP. whonixsetup is automatically started, which educates about different methods to connect (public Tor network, bridges, etc.).

Also automatically starts the Whonix Repository Tool (if installed), so the user can decide whether to use Whonix's Repository and if yes, choose which one.

==== xchat-improved-privacy ====

'''Anonymity and security check'''

As per https://trac.torproject.org/projects/tor/wiki/doc/TorifyHOWTO/XChat.

Moves the following files:

/usr/lib/xchat/plugins/python.so
/usr/lib/xchat/plugins/tcl.so
/usr/lib/xchat/plugins/perl.so to /usr/share/xchat-improved-privacy, so these plugins get disabled by default.
