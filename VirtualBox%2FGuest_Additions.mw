{{Header}}
{{#seo:
|description=Instructions for installing VirtualBox Guest Additions in Whonix. Shared Folders, Mouse Integration, etc.
|image=https://www.whonix.org/w/images/d/de/Cd-699786640.jpg
}}

== Clipboard Sharing ==
Bidirectional clipboard sharing is enabled default in the VirtualBox VMs. There are {{Code2|security reasons}}<ref> to disable clipboard sharing, such as preventing accidentally copying something (non-)anonymous and pasting it in its (non-)anonymous counter part (browser etc.), which would lead to identity correlation.
</ref>. For Whonix-Gateway, one directional clipboard sharing from host to Whonix-Gateway is not {{Code2|insecure}}<ref>
Since Whonix-Gateway is not supposed to be used as a workstation. No internet facing client application are being used there. Whatever "leaked" to Whonix-Gateway stays there and since conceptually users do not use browsers or similar on Whonix-Gateway, it cannot leak anywhere.
</ref>.

To change clipboard sharing:

1) Power off the virtual machine.<ref name=poweroff>Because otherwise you cannot change VirtualBox VM settings.</ref>

2) Go to {{Code2|VirtualBox machine settings -> General -> Advanced -> Shared Clipboard -> }}.

3) Power on the virtual machine again.

4) Done.

== Shared Folder ==
=== Whonix-Custom-Workstation ===
{{Anchor|For Whonix versions below 14:}}
<div class="toccolours mw-collapsible mw-collapsed">
<u>If you are using a [[Other Operating Systems|Whonix-Custom-Workstation]]</u> you need to do this manually, please click on expand on the right.
<div class="mw-collapsible-content">
1) Power off the virtual machine.<ref name=poweroff />

2) Go to {{Code2|VirtualBox -> Machine -> Settings -> Shared Folder -> choose a folder ->   folder name '''shared'''}}. Choose {{Code2|mount automatically}}. Press {{Code2|OK}}.

3) Create the shared folder.

{{CodeSelect|code=
sudo mkdir -p /mnt/shared
}}

4) Set required access rights.

{{CodeSelect|code=
sudo chmod 777 /mnt/shared
}}

5) Inside the virtual machine, use the following commands to mount the folder.

{{CodeSelect|code=
sudo mount -t vboxsf -o uid=1000,gid=1000 shared /mnt/shared
}}

If you run into a '''Protocol Error''' try using a different name, do not use ''share'', use something else, anything, for example, '''shared'''. 

6) After reboot, you have to repeat the mount command. If you want to mount the folder automatically...

{{Open with root rights|filename=
/etc/rc.local
}}

Add '''before''' ''exit 0''.

{{CodeSelect|code=
sudo mount -t vboxsf -o uid=1000,gid=1000 shared /mnt/shared
}}

Save.

7) Done. Files you drop into {{Code2|/mnt/shared}} in the virtual machine will end up in your chosen host shared folder and vice versa.

<ref>
For alternatives, have a look at the [https://help.ubuntu.com/community/VirtualBox/SharedFolders source] of that information.
</ref>
</div>
</div>

{{Anchor|For Whonix 14 and above}}
=== Whonix-Default ===
Shared folders configured within {{Code2|Settings -> Shared Folders}} will be mounted under /media/. 

1) Power off the virtual machine.<ref name=poweroff />

2) Go to {{Code2|Settings}} for your virtual machine and select {{Code2|Shared Folder}}. Click the icon that looks like a folder with a + in the upper right. Navigate to the folder you want to share with {{Code2|Folder Path}} and keep or rename {{Code2|Folder name}}. Check "Make Permanent" and "Auto-mount". Check "Read-only" if you don't want to write to that folder from within the guest. Press {{Code2|OK}}.

3) Power on the virtual machine.

----
== Security ==
The article [http://www.phoronix.com/scan.php?page=news_item&px=OTk5Mw The VirtualBox Kernel Driver Is Tainted Crap] <ref>http://www.webcitation.org/6HqJVN0br</ref> is talking about the kernel driven (on the host), not guest additions. Opposite statements: [http://lists.debian.org/debian-devel/2013/08/msg00112.html one] / [http://lists.debian.org/debian-devel/2013/08/msg00116.html two].

== Installed by Default ==
Beginning from Whonix 10 and above, VirtualBox Guest Additions are already installed by default. (Package [https://packages.debian.org/jessie/virtualbox-guest-x11 virtualbox-guest-x11] from Debian's apt repository.)

<font size=-3>
For technical information:<br />
See blog post, [https://forums.whonix.org/t/installing-virtualbox-guest-addition-by-default/700 Installing VirtualBox Guest Addition by Default?]
</font>

== Old instructions for Ubuntu Precise ==
Moved to [[Ubuntu Tips]].

== Installation from VirtualBox CD ==
Discouraged until [https://phabricator.whonix.org/T378 make vbox-disable-timesync compatible with guest additions from virtualbox CD] gets implemented.

== Alternatives ==
* For file exchange with Whonix without installing guest additions, see [[File Transfer]].
* To get a higher screen resolution without installing guest additions, see [[VirtualBox/Higher Screen Resolution without installing VirtualBox Guest Additions]]
* To get mouse integration without installing guest additions, use USB tablet in VirtualBox settings. Recommended against, because it requires adding USB controller to VirtualBox. (VirtualBox -> Right click on Virtual Machine -> Settings -> System -> Enable absolute pointing device)

== Temporary disable Guest Additions ==
'''This solution is incomplete!''' In case you want to temporarily disable VirtualBox guest additions, you can try this. A safer solution would be to uninstall them.

Find out which VirtualBox kernel modules are load.

{{CodeSelect|code=
cat /proc/modules | grep vbox
}}

Create a new config file for module blacklisting.

{{CodeSelect|code=
sudo nano /etc/modprobe.d/vbox.conf
}}

And add:

{{CodeSelect|code=
blacklist vboxvideo
blacklist vboxsf
blacklist vboxguest
}}

Safe and reboot. Done.

== See Also ==
[[Dev/Virtualization_Platform#VirtualBox]]

= Footnotes =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
