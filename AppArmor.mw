{{Header}}
{{#seo:
|description=AppArmor profiles (Security Hardening) for Whonix and other Linux. TBB, Pidgin, more soon.
}}
__FORCETOC__

=== Introduction ===
[https://en.wikipedia.org/wiki/AppArmor AppArmor] profiles. For better security.

=== Installation ===
==== Introduction ====
{{AppArmorProfileWarning}}

The profiles packages are available from the [[Whonix-APT-Repository|Whonix's APT repository]].

It is highly recommend to switch to Whonix's {{Code2|testers}} repository before installing them, because the profiles in the {{Code2|stable}} repository are much older and have some issues.

Enable Whonix's {{Code2|testers}} repository.

<pre>
sudo whonix_repository
</pre>

In Whonix-Workstation as well as on Whonix-Gateway.

Update your package lists.

<pre>
sudo apt-get update
</pre>

==== If you want to install all of them ====
The easiest way to install all of them. You might end up with a few apparmor profiles for software that you have not installed, but then they don't have any effect, so it does not matter.
<pre>
sudo apt-get install apparmor-profiles-whonix
</pre>

==== If you only want to install specific ones ====
<div class="toccolours mw-collapsible mw-collapsed" style="width:800px">
Click on expand on the right side.
<div class="mw-collapsible-content">
Profile for [[Tor Browser]] (installed by [[Tor Browser#Update Tor Browser|tb-updater]] [the one that comes installed by default with Whonix]). Useful in Whonix-Workstation.
<pre>
sudo apt-get install apparmor-profile-torbrowser
</pre>

Profile for the [[Chat#Pidgin|Pidgin]] [[Chat]] client. Useful on Whonix-Workstation.
<pre>
sudo apt-get install apparmor-profile-pidgin
</pre>

Profile for sdwdate. (The network [[Dev/TimeSync|time sync]] that comes installed with Whonix by default.) Useful for Whonix-Gateway and Whonix-Workstation.
<pre>
sudo apt-get install apparmor-profile-sdwdate
</pre>

Profile for timesync. (The network timesync graphical user interface that comes installed with Whonix by default.) Useful for Whonix-Gateway and Whonix-Workstation.
<pre>
sudo apt-get install apparmor-profile-timesync
</pre>

Profile for the [[XChat]] [[Chat]] client. Useful in Whonix-Workstation.
<pre>
sudo apt-get install apparmor-profile-xchat
</pre>

Profile for the [[E-Mail#Mozilla_Thunderbird_with_TorBirdy|Icedove]] (Mozilla Thunderbird) [[E-Mail]] client. Useful in Whonix-Workstation.
<pre>
sudo apt-get install apparmor-profile-icedove
</pre>

Profile for [[whonixcheck]]. Useful for Whonix-Gateway and Whonix-Workstation.
<pre>
sudo apt-get install apparmor-profile-whonixcheck
</pre>

Profile for VirtualBox. Useful on the host - we don't have instructions for that yet. Also useful if you run VirtualBox inside VirtualBox.
<pre>
sudo apt-get install apparmor-profile-virtualbox
</pre>
</div>
</div>

=== Profile Unloading ===
<div class="toccolours mw-collapsible mw-collapsed" style="width:800px">
'''Only in case you want to disable an apparmor profile.'''<br />
Click on expand on the right side.
<div class="mw-collapsible-content">
Once the profile is loaded in the kernel, to remove it to run.

<pre>
sudo aa-disable profile-name
</pre>

This command expect the profile file to be existing. So when the profile file is deleted (manually or after apt-get purge), the only way I know to unload it is rebooting.

Need to know the names of the profiles, have a look above [[#If you only want to install specific ones]].
</div>
</div>

=== AppArmor Warning during Boot ===
See [[Download#AppArmor_Warning_during_Boot|AppArmor Warning during Boot]].

=== Profiles ===
* [[AppArmor/VirtualBox|VirtualBox]]
* [[AppArmor/Tor_Browser_Bundle|Tor Browser Bundle (TBB)]]
* [[AppArmor/Icedove|Icedove (with Enigmail)]]
* [[AppArmor/Pidgin|Pidgin (with OTR)]]
* [[AppArmor/XChat|XChat]]
* [[AppArmor/Okular|Okular]]
* [[AppArmor/Gwenview|Gwenview]]
* [[AppArmor/sdwdate|Whonix sdwdate]]
* [[AppArmor/Timesync|Whonix timesync]]
* [[AppArmor/Whonixcheck|Whonix whonixcheck]]

=== Wishlist ===
* Patrick: Whonix-Gateway's [[Dev/CPFP]] (Automatically started as an /etc/init.d service. Used by Tor Browser. Avoids about:tor error message. Fixes Tor Browser's New Identity feature in Whonix. /usr/bin/controlportfilt and /usr/lib/whonix/cpf-tcpserver)
* Patrick: Whonix-Workstation's [https://github.com/Whonix/anon-ws-disable-stacked-tor anon-ws-disable-stacked-tor], /usr/sbin/rinetd (Automatically started as an /etc/init.d service. Used by Tor Browser. Useful to run stock Tor Browser without need to modify proxy settings.)

=== Additional inspiration ===
* Use [https://en.wikipedia.org/wiki/AppArmor AppArmor] ([http://wiki.debian.org/AppArmor in Debian]):
* http://bazaar.launchpad.net/~apparmor-dev/apparmor-profiles/master/files/head:/ubuntu/14.04/

{{Footer}}

[[Category:Documentation]]
