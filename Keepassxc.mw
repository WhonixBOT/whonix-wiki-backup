{{Header}}
{{Title|
title=keepassxc
}}
{{#seo:
|description=Keepassxc
|image=https://www.whonix.org/w/images/5/51/KeePassXC.png
}}

{{stub}}


{{mbox
| type    = notice
| image   = [[File:Ambox_notice.png|40px|alt=Info]]
| text    = These instructions can be greatly simplified once {{project name}} 15 which is based on Debian buster will be released.
}}

= Installation =
Recommended to be installed inside an offline VM (vault). <ref>
* In [[Qubes]], apt-get package installation could be done in TemplateVM.
* In [[Qubes]], download and verification could be done in a temporary TemplateBased AppVM, ideally [[DispVM]]. Then move to offline vault VM.
* In [[{{non q project name short}}|{{non q project name}}]]: install first, then disconnect internet and never re-enable internet access. TODO document
</ref> When you want to keepassxc as replacement for Google Authenticator (actually TTOP, Time based One Time Password) [[2FA|Two Factor Authentication (2FA)]]) then a Debian based VM is more suitable than a Whonix-Workstation based VM. <ref>
Because accurate time required for TTOP and due to [[Boot Clock Randomization]] and [[sdwdate]] anonymizing time.
</ref>

Yubikey related. Users not using yubikey should skip this.

{{CodeSelect|code=
sudo apt-get install yubikey-personalization yubikey-personalization-gui
}}

Get keepassxc signing key. <ref>https://keepassxc.org/verifying-signatures</ref>

{{CodeSelect|code=
gpg --recv-keys C1E4CBA3AD78D3AFD894F9E0B7A66F03B59076A8
}}

Download keepassxc.

{{CodeSelect|code=
curl --location --remote-name --tlsv1.2 https://github.com/keepassxreboot/keepassxc/releases/download/2.3.4/KeePassXC-2.3.4-x86_64.AppImage
}}

Download keepassxc signature.

{{CodeSelect|code=
curl --location --remote-name --tlsv1.2 https://github.com/keepassxreboot/keepassxc/releases/download/2.3.4/KeePassXC-2.3.4-x86_64.AppImage.sig
}}

Verify keepassxc signature.

{{CodeSelect|code=
gpg --verify KeePassXC*.sig
}}

Should show the following.

<pre>
gpg: assuming signed data in 'KeePassXC-2.3.4-x86_64.AppImage'
gpg: Signature made Thu 23 Aug 2018 01:31:30 PM EDT
gpg:                using RSA key C1E4CBA3AD78D3AFD894F9E0B7A66F03B59076A8
gpg: Good signature from "KeePassXC Release <release@keepassxc.org>" [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: BF5A 669F 2272 CF43 24C1  FDA8 CFB4 C216 6397 D0D2
     Subkey fingerprint: C1E4 CBA3 AD78 D3AF D894  F9E0 B7A6 6F03 B590 76A8
</pre>

Make keepassxc executable.

{{CodeSelect|code=
chmod +x KeePassXC*
}}

<ref>
https://addons.mozilla.org/de/firefox/addon/passifox/
</ref>

Installation is now complete.

= Autostart =
Optional. If you like to autostart keepassxc.

Create folder <code>~/.config/autostart/</code>.

{{CodeSelect|code=
mkdir -p  ~/.config/autostart/
}}

Create a file <code>~/.config/autostart/keepassxc.desktop</code>.

Paste the following content.

{{CodeSelect|code=
[Desktop Entry]
Type=Application
Name=keepassxc
Exec=/home/user/KeePassXC-2.3.4-x86_64.AppImage
}}

Save.

The process is now complete.

= Usage =
To start.

{{CodeSelect|code=
./KeePassXC*
}}

First run question: either answer is ok.

Create a new database.

Default file name <code>Passwords.kdbx</code> is ok.

If you are using [[Full Disk Encryption]] you might want to use a very easy password. Up to you.

Left click one time on <code>root</code>

Then go to menu -> entries -> Add new entry -> any name name as <code>test</code> -> ok

right click on test -> time based on time password -> set up TOTP -> Default -> paste 2FA code -> ok

right click on test again -> time based on time password -> show TOTP

= Time Fix =
[[2FA]] TTOP code changes every 30 seconds. So clock needs to be reasonable correct.

Troubleshoting only. If code does not match.

Set timezone to UTC for simplicity.

{{CodeSelect|code=
sudo cp /usr/share/zoneinfo/Etc/UTC /etc/localtime
}}

Go to https://www.timeanddate.com/worldclock/timezone/utc or any other similar source to find out the time in UTC.

Fix the click. Change the date and time accordingly!

{{CodeSelect|code=
sudo date -s "26 SEPT 2018 11:54:25"
}}

Check if the clock is correct now.

{{CodeSelect|code=
date
}}

= Footnotes =
{{reflist|close=1}}
[[Category:Documentation]]
{{Footer}}
