{{Header}}
{{#seo:
|description=Which ones are safe to remove? What other packages do Whonix meta packages install? Which packages should never be removed? Why is package X installed?
}}

{{mbox
| type      = critical
| image   = [[File:Ambox_warning_pn.svg.png|40px|alt=Whonix first time users warning]]
| text       =  Warning:<br />
Advanced users only!
}}

= Whonix Debian Packages =
{{Anchor|Disadvantage}}
== What is the disadvantage of removing a meta package? ==
Then changes in package dependencies will not be automatically processed by your system when you [[Security_Guide#Updates|upgrade your system]].

For example the {{Code2|anon-workstation-packages-recommended}} meta package depends <ref>{{Code2|Depends:}}</ref> on {{Code2|[https://github.com/Whonix/tb-updater tb-updater]}}. When you do not have the {{Code2|anon-workstation-packages-recommended}} package installed, you would not notice if we [https://github.com/Whonix/Whonix/issues/346 replace] {{Code2|tb-updater}} with [https://github.com/micahflee/torbrowser-launcher {{Code2|torbrowser-launcher}}]. {{Code2|tb-updater}} might become unmaintained, broken or even have unfixed security issues. We'll try to [[Download#Stay_tuned|keep you up to date]] should we deprecate (security relevant) packages. If we do that, you could simply {{Code2|sudo apt-get purge tb-updater}} and consider installing what our meta package recommends as replacement.

See also [[#Technical_Stuff]].

== Which ones are safe to remove? ==
Note the [[#Removal Instructions]] below! When you understood those, feel free to remove the following desktop specific meta packages.

<pre>
whonix-shared-desktop
whonix-shared-desktop-kde
whonix-shared-kde-accessibility
</pre>

Also feel free to remove the following meta packages, which contain a list of recommended (as in useful to have, not necessary to have them for some other reason):

<pre>
whonix-shared-packages-recommended
whonix-gateway-packages-recommended
whonix-workstation-packages-recommended
whonix-workstation-default-applications
</pre>

== Which packages do Whonix meta packages install? ==
See {{Code2|debian/control}} in Whonix [https://github.com/Whonix/anon-meta-packages anon-meta-packages] source code folder or [https://github.com/Whonix/anon-meta-packages/blob/master/debian/control on github] (choose the correct branch!).

Or use for example.

<pre>
apt-cache show whonix-workstation-default-applications
</pre>

== Which packages should never be removed? ==
Do not remove {{Code2|...-dependencies}} packages, unless you really know what you are doing.

* whonix-shared-packages-dependencies
* whonix-gateway-packages-dependencies
* whonix-workstation-packages-dependencies

== Why is package X installed? ==
See developer documentation, packages documentation:

* https://github.com/Whonix/whonix-developer-meta-files/blob/master/package_documentation/Whonix-Shared_packages
* https://github.com/Whonix/whonix-developer-meta-files/blob/master/package_documentation/Whonix-Gateway_packages
* https://github.com/Whonix/whonix-developer-meta-files/blob/master/package_documentation/Whonix-Workstation_packages

== Removal Instructions ==
'''1. Upgrade'''<br />
[[Security_Guide#Updates|Upgrade your system.]]

'''2. Cleanup'''<br />
When you installed and uninstalled some custom packages or dependencies changed in meanwhile, get rid of unneeded dependencies first.

<pre>
sudo apt-get autoremove
</pre>

'''3. Uninstall'''<br />
Let's see how for example the {{Code2|uwt}} package could be uninstalled.

<pre>
sudo apt-get purge uwt
</pre>

You will see something like this.

<pre>
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages were automatically installed and are no longer required:
  anon-banned-packages anon-iceweasel-warning gpl-sources-download knetattach-hide power-savings-disable-in-vms poweroff-passwordless rads scurl shared-folder-help swap-file-creator swappiness-lowest tor-ctrl
Use 'apt-get autoremove' to remove them.
The following packages will be REMOVED:
  anon-shared-packages-recommended* uwt* whonix-shared-packages-recommended*
0 upgraded, 0 newly installed, 3 to remove and 2 not upgraded.
After this operation, 152 kB disk space will be freed.
Do you want to continue [Y/n]? 
</pre>

'''4. Keep'''<br />
Now, there is a small issue. Next time you were to run {{Code2|sudo apt-get autoremove}}, you would also uninstall all packages listed under "{{Code2|The following packages were automatically installed and are no longer required:}}". (Such as {{Code2|[https://github.com/Whonix/rads rads]}} and others.) Since you most likely want to keep the other packages which were installed by the {{Code2|anon-shared-packages-recommended}} and the {{Code2|whonix-shared-packages-recommended}} meta packages, mark them as manually installed, so they do not get removed. You can conveniently do this using {{Code2|aptitude}}. <ref>https://unix.stackexchange.com/questions/166590/what-is-the-apt-get-equvalent-of-aptitude-keep-all</ref> <ref>
Can we safely mix {{Code2|apt-get}} and {{Code2|aptitude}}? Yes, Raphaël Hertzog, dpkg and Debian Developer said already in 2011 that this is no problem anymore.

<blockquote>
First I want to make it clear that you can use both and mix them without problems. It used to be annoying when apt-get did not track which packages were automatically installed while aptitude did, but now that both packages share this list, there’s no reason to avoid switching back and forth.
</blockquote>

Source: [http://raphaelhertzog.com/2011/06/20/apt-get-aptitude-%E2%80%A6-pick-the-right-debian-package-manager-for-you/ apt-get, aptitude, … pick the right Debian package manager for you]
</ref>

<pre>
sudo aptitude keep-all
</pre>

'''5. Done'''<br />
Make sure you understood the [[#Disadvantage]].

== Technical Stuff ==
The underlying technical issues with meta packages are described here:

* http://administratosphere.wordpress.com/2011/11/29/the-metapackage-problem-and-apt-get-autoremove/
* http://tanguy.ortolo.eu/blog/article8/uninstall-meta-package

About meta packages:

* https://www.debian.org/doc/manuals/developers-reference/best-pkging-practices.html#bpp-meta

= See Also =
* [[Whonix-APT-Repository|Whonix's APT Repository, how to enable/disable it?]]
* [[Dev/BuildDocumentation|Building/upgrading Whonix's debian packages from source code]]

= Footnotes =
<references />

{{Footer}}

[[Category:Documentation]]
