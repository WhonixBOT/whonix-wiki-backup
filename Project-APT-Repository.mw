{{Header}}
{{#seo:
|description={{project_name}} stable / testers / developers APT Repository. How to change from one suite to another? How to disable {{project name}} APT Repository?
|image=https://www.whonix.org/w/images/d/d8/Changerepositorygui234234.png
}}

[[File:Whonix_Repository_Wizard_install_updates.png|{{project_name}} Repository Tool|thumb]]
= {{project_name}} APT Repository Overview =

{{project_name}} currently provides four repository choices:

* '''{{project_name}} stable APT repository:''' Recommended for most users. The production level packages focus on providing the most reliable {{project_name}} experience. <ref>If possible, users are requested to run a separate testers-only {{gateway_product_name}} (<code>sys-whonix</code>) and {{workstation_product_name}} (<code>anon-whonix</code>) that has the testers repository enabled. If too few people test {{project_name}}, undiscovered issues might migrate to the stable repository.</ref>
* '''{{project_name}} stable-proposed-updates APT repository:''' After testing by a wider audience, these packages migrate to the stable repository. <ref name=rollback>Users are recommended to make a VM clone for this repository just in case it breaks. That way changes can be rolled back if necessary.</ref>
* '''{{project_name}} testers APT repository:''' Recommended for testers, since it is only briefly tested by {{project_name}} developers. It could break apt-get during an upgrade, requiring terminal commands to rectify the problem. <ref name=rollback/>
* '''{{project_name}} developers APT repository:''' As above, except it includes untested changes. These changes ''may'' eventually migrate to the testers repository if the {{project_name}} team is confident these changes will not break the update system. It is not recommended, unless the user is in touch with the development team.

Due to the {{project_name}} design, a user's security is unlikely to be materially affected by preferring the "beta" (stable-proposed-updates) or "alpha" (testers) repositories over the default stable one. <ref>The terms alpha and beta are avoided because they have generally lost their meaning in the software field; many applications remain in alpha or beta status for years, even though they work perfectly well.</ref>

= Change {{project_name}} APT Repository =

It is easy for users to switch between {{project_name}} repositories.

== {{q_project_name}} ==

<div class="toccolours mw-collapsible mw-collapsed">
If you are using [[{{q project name short}}|{{q project name}}]], please press Expand on the right.
<div class="mw-collapsible-content">
<code>Qubes App Launcher (blue/grey "Q")</code> -> <code>Template:</code> <code>{{whonix-gw}}</code> or <code>{{whonix-ws}}</code> -> <code>Whonix-Repository</code>

'''Figure:''' ''Wizard Repository Selection'' 

[[File:Whonix_Repository_Wizard_select_repo.png|border]]

'''Figure:''' ''Wizard Auto-update Configuration'' 

[[File:Whonix_Repository_Wizard_install_updates.png|border]]
</div>
</div>

== {{non_q_project_name_short}} ==

<div class="toccolours mw-collapsible mw-collapsed">
If you are using [[{{non q project name short}}|{{non q project name}}]], please press Expand on the right.
<div class="mw-collapsible-content">
<code>Start Menu</code> -> <code>Applications</code> -> <code>System</code> -> <code>{{project_name}} Repository</code> -> <code>chose either "testers" or "stable" repository</code>

'''Figure:''' ''Start Menu''

[[File:changerepositorygui1.png|600px]]

'''Figure:''' ''System Folder''

[[File:changerepositorygui2.png|600px]]

'''Figure:''' ''{{project_name}} Repository Tool''

[[File:changerepositorygui3.png|600px]]
</div>
</div>

Afterwards, the following window will appear.

'''Figure:''' ''Auto-update Configuration''

[[File:changerepositorygui4.png|600px]]

'''Figure:''' ''Repository Selection''

[[File:changerepositorygui5.png|600px]]

== Command Line Interface ==

<div class="toccolours mw-collapsible mw-collapsed">
If you are a terminal user, please press Expand on the right.
<div class="mw-collapsible-content">

In Konsole, run.

{{CodeSelect|code=
sudo whonix_repository
}}

'''Figure:''' ''Launch Konsole''

[[File:change_repository_terminal1.png|600px]]

'''Figure:''' ''Run whonix_repository''

[[File:change_repository_terminal2.png|600px]]

Choose one of the following repositories based on personal preferences.

<pre>
sudo whonix_repository --enable --repository stable
</pre>

<pre>
sudo whonix_repository --enable --repository stable-proposed-updates
</pre>

<pre>
sudo whonix_repository --enable --repository testers
</pre>

<pre>
sudo whonix_repository --enable --repository developers
</pre>
</div>
</div>

To use the repository, follow the [[Operating_System_Software_and_Updates|usual update instructions]].

= Disable {{project_name}} APT Repository =

== Introduction ==

For [[Trust]] reasons some users may prefer not to use {{project_name}} APT Repository. In that case, it is necessary to  [[Dev/BuildDocumentation|update Debian packages in {{project_name}} from source code]], which is inconvenient.

== {{project_name}} Built from Source Code ==

If a user [[Dev/Build Documentation|builds Whonix]] from source code, {{project_name}} APT Repository is not added by default. The only exception is if users [[Template:Build Documentation {{project_name}} APT Repository|opt in]] using a build configuration. It is also possible to [[#Verify Disabled {{project_name}} APT Repository|verify]] that it is already disabled.

== {{project_name}} Default-Download-Version ==
{{project_name}} APT repository is already enabled, it can be disabled via the GUI or terminal {{project_name}} repository tool.

=== {{q_project_name}} ===

<code>Qubes App Launcher (blue/grey "Q")</code> -> <code>Template:</code> <code>{{whonix-gw}}</code> <u>or</u> 
<code>{{whonix-ws}}</code> -> <code>Whonix-Repository</code> -> <code>"No, I will manually update from source code."</code>

=== {{non_q_project_name_short}} ===

<code>Start Menu</code> -> <code>Applications</code> -> <code>System</code> -> <code>{{project_name}} Repository</code> -> <code>"No, I will manually update from source code."</code>

=== Command Line Interface ===

To disable it in a terminal, run.

{{CodeSelect|code=
sudo whonix_repository --disable
}}

Users can [[#Verify Disabled {{project_name}} APT Repository|optionally verify]] {{project_name}} APT repository is disabled after this procedure.

== Verify {{project_name}} APT Repository is Disabled ==

To check if {{project_name}} APT repository was successfully disabled, run the following tests.

Use {{Code2|apt-key}}.

{{CodeSelect|code=
sudo apt-key finger
}}

This test should not show any Whonix-specific keys, such as [[Patrick Schleizer|Patrick Schleizer's OpenPGP key]].

Next check if {{Code2|/etc/apt/sources.list.d/whonix.list}} exists. If it does not exist, the procedure was successful. Extra cautious users should also refer to the following footnote. <ref>
The following is not strictly necessary, since the whonix_repository tool has never written another sources.list file other than {{Code2|/etc/apt/sources.list.d/whonix.list}}.

Examine the {{Code2|/etc/apt/sources.list}} file.

{{CodeSelect|code=
cat /etc/apt/sources.list
}}

It should not include the {{project_name}} APT Repository.

Next examine the {{Code2|/etc/apt/sources.list.d/}} folder as well.

{{CodeSelect|code=
cat /etc/apt/sources.list.d/*
}}
</ref>

= Advanced =
== Repository Location URI ==

To set the default {{project_name}} repository URI, choose one of the following. 

Default http URI.

{{CodeSelect|code=
sudo whonix_repository --baseuri http://deb.whonix.org --enable --repository stable
}}

Experimental https URI.

{{CodeSelect|code=
sudo whonix_repository --baseuri https://deb.whonix.org --enable --repository stable
}}

Onion URI. See also [[Onionizing Repositories]].

{{CodeSelect|code=
sudo whonix_repository --baseuri tor+http://deb.{{project_onion}} --enable --repository stable
}}

To undo any changes, just run the [[#Change {{project_name}} APT Repository|{{project_name}} APT Repository Tool]] again.

= Further Reading =
* [[Trust]]
* [[{{project name short}} Debian Packages|{{project_name}} Debian package - which ones are safe to remove?]]
* [[Dev/BuildDocumentation|Building/upgrading {{project name}} Debian packages from source code]].

= Footnotes / References =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
