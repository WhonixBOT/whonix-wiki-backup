= Grub Default Boot Menu Entries =

* <code>PERSISTENT mode USER (For daily activities.)</code>
* <code>LIVE mode USER (For daily activities.)</code>
* <code>PERSISTENT mode ADMIN (For software installation.)</code>
* <code>PERSISTENT mode SUPERADMIN (Be very cautious!)</code>
* <code>Recovery PERSISTENT mode SUPERADMIN (Be very cautious!)</code>

= boot modes considered too unimportant to be added to grub default boot menu =

* <code>LIVE mode ADMIN</code>
* <code>LIVE mode SUPERADMIN</code>
* <code>Recovery LIVE mode SUPERADMIN</code>

I don’t see good use cases for these. But could be convinced otherwise with user feedback.

If anyone cares about these, there could be files in <code>/etc/grub.d/</code> folder that add such entries but these files could be non-executable by default. Thereby <code>update-grub</code> would ignore them. To opt-in into such modes, users could just run <code>sudo chmod +x /etc/grub.d/somenumber_name-of-boot-mode</code>.

Also users who really want something special/custom would be able to add whatever they want to <code>/etc/grub.d/</code> folder / grub boot menu.

Also by using grub boot menu editing (key <code>e</code>) at grub boot menu, kernel parameters can be adjusted and any combination would be possible.

= Use Cases for the Different Boot Modes =

* <code>PERSISTENT mode USER (For daily activities.)</code>: Useful for browsing, e-mail, chat, etc. or just letting an already set up and installed server run. Even upgrading through <code>upgrade-nonroot</code>.
* <code>LIVE mode USER (For daily activities.)</code>: Same as above but without persistence.
* <code>PERSISTENT mode ADMIN (For software installation.)</code>: users could run <code>sudo apt install whatever-software-package</code>, then reboot into USER. Editing <code>/etc/apt/sources.list.d</code> [https://github.com/Whonix/apparmor-profile-everything/blob/master/etc/apparmor.d/abstractions/dangerous-files among many other things] prohibited for better security.
* <code>PERSISTENT mode SUPERADMIN (Be very cautious!)</code>: users could add foreign sources to <code>/etc/apt/sources.list.d</code> or do anything (full freedom), then (optional but advisable) reboot to ADMIN mode, install packages from third party repositories.
* <code>Recovery PERSISTENT mode SUPERADMIN (Be very cautious!)</code>: The usual recovery mode.

= opt-out to get same behavior as old Whonix =

Users who don’t like (any, multiple or all) of the new options...

* <code>PERSISTENT mode USER (For daily activities.)</code> [A]
* <code>LIVE mode USER (For daily activities.)</code> [B]
* <code>PERSISTENT mode ADMIN (For software installation.)</code> [C]

and who want "the old Whonix" "with unrestricted sudo" (<code>PERSISTENT mode SUPERADMIN</code>) back, who don't want to see any of the new options [A], [B], [C]... These could just make these <code>/etc/grub.d</code> folder / grub menu entries gone by running <code>sudo chmod -x /etc/grub.d/somenumber_name-of-boot-mode</code>. (There could be a script to simplify that.)

= /etc/grub.d file names =
<pre>
/etc/grub.d/10_linux                         PERSISTENT mode USER
/etc/grub.d/11_linux_live                    LIVE mode USER
/etc/grub.d/12_linux_admin                   PERSISTENT mode ADMIN
/etc/grub.d/13_linux_admin_live              LIVE mode ADMIN
/etc/grub.d/14_linux_superadmin              PERSISTENT mode SUPERADMIN
/etc/grub.d/15_linux_superadmin_live         LIVE mode SUPERADMIN
/etc/grub.d/16_linux_recovery_mode           PERSISTENT mode SUPERADMIN
/etc/grub.d/17_linux_recovery_mode_live      Recovery LIVE mode SUPERADMIN
</pre>

Should stay below <code>/etc/grub.d/20_</code> because that is already used by an existing script.

Note: some files will not be created in the first iteration (and not sure ever) - those listed in chapter <code>Boot modes considered too unimportant to be added to grub default boot menu:</code> in my post above.

= Implementation =
* https://github.com/Whonix/apparmor-profile-everything/tree/master/etc/grub.d
* https://github.com/Whonix/apparmor-profile-everything

= Related =
* [https://forums.whonix.org/t/disable-newly-all-installed-services-by-default/9381/2 disable newly (all) installed services by default]
* [[Verified Boot]]

= Footnotes=
<references/>

{{Footer}}

[[Category: Design]]
[[Category: Development]]
