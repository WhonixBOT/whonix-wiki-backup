{{Header}}
{{#seo:
|description=Qubes-Whonix Disposable VM
}}

'''Disposable VM usage is still considered experimental since there are various [[#Issues]]!'''

You can use Whonix-Workstation as a [https://www.qubes-os.org/en/doc/dispvm/ Disposable VM]. This is not yet [[Warning#Whonix_is_not_amnesic|amnesic]]. <ref name=amnesic>
{{Anchor|DispVMs_amnesic}}
[https://github.com/QubesOS/qubes-issues/issues/904 DispVMs: support for in-RAM execution only (for anti-forensics)]
</ref>

Open a dom0 terminal.

<code>
Qubes App Launcher (blue/grey "Q") -> System Tools -> Konsole
</code>

Create a DispVM savefile.

<pre>
qvm-create-default-dvm whonix-ws
</pre>

<ref>
If you wanted to customize it, you could run as per [https://www.qubes-os.org/en/doc/dispvm-customization/ DispVM-Customization].

<pre>
qvm-run -a whonix-ws-dvm konsole
</pre>
</ref>

Enable showing your DispVM in Qubes VM Manager.

<code>
dom0 -> Qubes VM Manager -> (menu) View -> enable 'Show/Hide internal VMs'
</code>

<code>
dom0 -> Qubes VM Manager -> enable 'Show/Hide inactive VMs'
</code>

Configure Whonix-Gateway as your NetVM.

<code>
dom0 -> Qubes VM Manager -> right click on 'whonix-ws-dvm' -> VM Settings -> NetVM -> sys-whonix
</code>

<ref>
<pre>
qvm-prefs -s whonix-ws-dvm netvm sys-whonix
</pre>
</ref> <ref>
Starting a DispVM

<pre>
echo konsole | /usr/lib/qubes/qfile-daemon-dvm qubes.VMShell dom0 DEFAULT red
</pre>
</ref>

{{mbox
| image   = [[File:Ambox_warning_pn.svg.png|40px]]
| text       = 
The NetVM of DispVM is inherited from calling VM's {{Code2|netvm}} setting or - if set - from the {{Code2|dispvm_netvm}} setting. So when run {{Code2|Open in DispVM}} from a VM behind {{Code2|sys-whonix}}, that DispVM will also have {{Code2|sys-whonix}} as NetVM. But when you run {{Code2|Open in DispVM}} from a VM behind {{Code2|sys-net}}, it will not be through Tor. If you want that, you can set the {{Code2|dispvm_netvm}} setting of all the VMs to {{Code2|sys-whonix}} to achieve what you want. <ref>
https://github.com/QubesOS/qubes-issues/issues/1954
</ref> Here is an example how to set the {{Code2|dispvm_netvm}} setting of the VM {{Code2|work-mail}} to {{Code2|sys-whonix}}.

<pre>
qvm-prefs -s work-mail dispvm_netvm sys-whonix
</pre>
}}

= Issues =
== Serious ==
* Links clicked to open in DispVM will be opened in iceweasel rather than Tor Browser because of Qubes bug [https://github.com/QubesOS/qubes-issues/issues/1487 qvm-open-in-vm opens URLs in non-default browser].
* Open in DispVM does have sys-net rather than sys-whonix set as NetVM because of Qubes bug [https://github.com/QubesOS/qubes-issues/issues/1954 Whonix default VM settings fixes - salt management].

== Normal ==
* [https://github.com/QubesOS/qubes-issues/issues/1339 have DispVMs inherit launcher shortcuts like other TemplateBasedVMs]: would increase usability.
* [https://github.com/QubesOS/qubes-issues/issues/1334 manual DispVM startup fails if its configured ProxyVM is not yet started]
* [[#DispVMs_amnesic|not yet amnesic]] <ref name=amnesic />

== Solved in Whonix 13 ==
* [https://github.com/QubesOS/qubes-issues/issues/1328 /bin/sync hangs forever in whonix-ws-dvm]: This currently breaks whonixcheck probably among other things.

= Footnotes =
<references />

{{Footer}}
[[Category:Documentation]]
