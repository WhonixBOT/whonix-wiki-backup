<languages />
{{Header}}
{{Title|
title=Lantern - 翻墙软件
}}
{{#seo:
|description=翻墙软件. Lantern over Tor. 将 Whonix 与 Lantern 结合. 用 Lantern 作为Tor的前置代理 (用户 -> Lantern -> Tor -> 互联网 ). Tor网桥失效后的另一选择
}}

__forcetoc__

= Introduction =
Lantern是一款翻墙软件，可作为 Tor [[网桥]]的替代品。 

TODO: 待扩展

= 用 Lantern 作为Tor的前置代理 =
仅供实验者尝试!

用 Lantern 可以作为Tor的前置代理建立如下隧道:<br />
'''User -> Lantern -> Tor -> Internet'''

如果你想尝试，请跟随以下引导。

[[Qubes-Whonix]] only! [[Non-Qubes-Whonix]] 是 [[不支持的]].

如果你想尝试，推荐您先阅读如下相关Wiki: [[Tunnels/Introduction]]

对于现阶段存在的限制，请看博文/论坛讨论:<br />
https://www.whonix.org/blog/connecting-to-lantern-before-tor

创建一个新的独立的叫做 Lantern-Gateway 的ProxyVM ，其模板基于 Debian-8 template.

在 Lantern-Gateway ProxyVM中, {{卸载防火墙}}

在Lantern-Gateway ProxyVM 中， IP Forwarding 可以/应该被禁用，因为其是无必要的。

<pre>
sudo sysctl -w net.ipv4.ip_forward=0
</pre>

安装缺失的Lantern依赖模块。TODO<ref>
TODO

debian/control 应当声明一个依赖。 检查以下看看Lantern开发者是否意识到了这个问题，然后如果有必要的话报告一个bug.
</ref>

<pre>
sudo apt-get install libappindicator3-1
</pre>

检查一下可供下载的deb包是否还能凑合用。去 https://getlantern.org/ 下载之。

<pre>
curl {{Curl Secure}} https://s3.amazonaws.com/lantern/lantern-installer-beta-64-bit.deb --output ~/lantern-installer-beta-64-bit.deb
</pre>

安装 lantern。 TODO<ref>
TODO:

检查lantern开发中是否已经存在如下tickets。如果没有，请创建它们。如果已经存在，请将其链接到注脚这里。

* 向开发者请求一个 Debian 专用的deb包： https://github.com/getlantern/lantern/issues/4836
* 向lantern开发者请求Debian APT 软件库支持： https://github.com/getlantern/lantern/issues/4837
* 发布一个Debian版lantern [https://wiki.debian.org/RFP RFP (request for packaging)]
* 请求开发者将Lantern添加到Debian官方软件库中: https://github.com/getlantern/lantern/issues/4837
</ref>

<pre>
sudo dpkg -i ~/lantern-installer-beta-64-bit.deb
</pre>

让Lantern共享翻墙通道，以便sys-whonix使用.

<pre>
lantern -addr 0.0.0.0:8788
</pre>

<ref>
在Lantern-Gateway中, 检查lantern的 http 端口是否可用。

<pre>
curl --tlsv1 --proto =https --proxytunnel --proxy 127.0.0.1:8788 https://check.torproject.org
</pre>

在Lantern-Gateway中，检查 lantern的socks端口是否可用。

<pre>
curl {{Curl Secure}} --socks5-hostname socks5h://127.0.0.1:8788 https://check.torproject.org
</pre>
</ref>

关闭（正在运行的） sys-whonix。将 sys-whonix的 NetVM 设置为 Lantern-Gateway。重启 sys-whonix。

<ref>
在sys-whonix中，测试Tor是否可以使用Lantern共享的http代理。

<pre>
curl.anondist-orig --tlsv1 --proto =https --proxytunnel --proxy 10.137.11.1:8788 https://check.torproject.org
</pre>

在sys-whonix中，测试Tor是否可以使用Lantern共享的socks代理。

<pre>
curl.anondist-orig --tlsv1.2 --proto =https --socks5-hostname socks5h://10.137.11.1:8788 https://check.torproject.org
</pre>
</ref>

在 sys-whonix中 {{打开_/etc/tor/torrc}}

以下使用10.137.11.1仅是举一个例子。 你需要将 10.137.11.1 替换为你 Lantern-Gateway ProxyVM的IP。 你可以通过在sys-whonix中运行以下命令行来找到其IP。
<code>qubesdb-read /qubes-gateway</code>

<pre>
HTTPSProxy 10.137.11.1:8788
</pre>

TODO<ref>
TODO: 使其使用sock协议工作。 根据 https://github.com/getlantern/lantern/issues/2075 lantern 已经功能支持socks端口了。 Issues 已开启: https://github.com/getlantern/lantern/issues/4838

<pre>
Socks5Proxy 10.137.11.1:8788
</pre>
</ref>

{{Reload_Tor}}

大功告成。Tor现在已经使用Lantern作为前置代理。

= 注脚 =
<references/>

{{Footer}}

[[Category:Documentation]]
