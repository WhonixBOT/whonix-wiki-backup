{{Header}}
{{#seo:
|description={{project_name}} Release Notes, {{project_name}} 14 and earlier versions. {{project_name}} 14
|image=https://www.whonix.org/w/images/b/b5/Releasenots.png
}}
{{Contributor|
|status=stable
|about=About this {{Code2|{{PAGENAME}}}} Page
|difficulty=easy
|contributor=[https://forums.whonix.org/users/torjunkie torjunkie]
|support=[[Support]]
|image=https://www.whonix.org/w/images/thumb/c/c6/Oldstablewhonix.jpg/470px-Oldstablewhonix.jpg
}}

= {{project_name}} 13 Changelog =

{{project_name}} 13 was released on May 31, 2016. <ref>https://www.whonix.org/blog/whonix-13-released</ref> {{project_name}} 13 contains many small security and usability improvements, features and bug fixes. <ref>https://phabricator.whonix.org/maniphest/query/TfpGK0Sq8w1j/#R</ref> <ref>A handful of issues were fixed in both {{project_name}} 13 and {{project_name}} 14 and backported to both versions.</ref>

Descriptions of changes in [https://sourceforge.net/p/whonix/featureblog/2015/12/whonix-12-released/ {{project_name}} 12] and [https://sourceforge.net/p/whonix/featureblog/2015/06/testers-wanted-whonix-11--110030---release-candidate/ earlier versions] can be found on sourceforge.net. 

= All Platforms =

== AppArmor ==

* Fixed the Tor Browser AppArmor profile to allow correct functionality. <ref>https://phabricator.whonix.org/T672</ref>
* Resolved AppArmor conflicts affecting Pidgin, Chromium and Evince. <ref>https://phabricator.whonix.org/T314</ref>
* Merged AppArmor profiles for sdwdate, timesync and whonix-check into their corresponding packages and now install them by default. <ref>https://phabricator.whonix.org/T201</ref>

== Bug Fixes ==

* Fixed broken whonix-setup-wizard functionality. <ref>https://phabricator.whonix.org/T499</ref>

== Code ==

* Updated {{project_name}} code for Tor Browser tb-updater. <ref>https://phabricator.whonix.org/T666</ref>
* Refactored the {{project_name}} socks redirection firewall rules to reduce their size and use less script code. <ref>https://phabricator.whonix.org/T465</ref> <ref>The same firewall rules are still applied.</ref>
* Refactored {{project_name}} code so that scripts only use configuration files that end with the .conf extension. <ref>https://phabricator.whonix.org/T286</ref>

== Improved Functionality and Usability ==

* Modified whonixcheck to test for slow or fast system clocks which prevent Tor from properly connecting. <ref>https://phabricator.whonix.org/T482</ref>
* Implemented an explicit check for timekeeping watchdog kernel messages in whonixcheck, so users are warned about clock jumps which prevent / time-out Tor connections. <ref>https://phabricator.whonix.org/T480</ref>
* Enforced maximized terminal windows for xdg desktop users. <ref>https://phabricator.whonix.org/T451</ref> <ref>For instance, tor-arm, restart Tor and other terminal programs.</ref>
* Enabled Transparent Proxy Ports for {{gateway_product_name}} by default (except for {{project_name}}-Firewall). <ref>https://phabricator.whonix.org/T435</ref> <ref>This does not enable transparent proxying by default, but is required in Qubes so [https://phabricator.whonix.org/T434 tinyproxy traffic can be redirected] to 127.0.01 instead of to qubes-netvm-gateway.</ref>
* Configured {{project_name}} to use ''/etc/skel'' instead of writing to the home folder directly to maintain forward compatibility with Qubes. Further, this allows for proper error-handling where "user" is hardcoded in {{project_name}}, and a newly created account with a different name has been used. <ref>https://phabricator.whonix.org/T419</ref>
* Deprecated the timesync progress bar and replaced it with a tray icon using sdwdate-gui to improve usability and reduce confusion. <ref>https://phabricator.whonix.org/T300</ref>
* Created a stable-proposed-updates repository for users who want to help in testing {{project_name}} fixes, without resorting to the testers repository which comes with many more changes. <ref>https://phabricator.whonix.org/T200</ref>
* Moved the WhonixBackupScript to the usability-misc package to make it more accessible. <ref>https://phabricator.whonix.org/T159</ref>
* Replaced XChat with HexChat, since the former is no longer actively maintained, and created a new AppArmor profile to contain it. <ref>https://phabricator.whonix.org/T40</ref>
* Implemented a VPN_FIREWALL feature as part of whonix-ws-firewall. <ref>https://phabricator.whonix.org/T158</ref>

== Security Enhancements ==

* Created a security-misc package that turns off Nautilus and Dolphin file previews by default, since this poses security risks. <ref>https://phabricator.whonix.org/T418</ref>
* A known, good version of Tor is now maintained and uploaded to the {{project_name}} repository from deb.torproject.org <ref>https://phabricator.whonix.org/T472</ref>
* Uploaded the Tor 0.3.2.9 major (stable) release to the {{project_name}} repository to enable full v3 onion functionality for both hosting of onion services and access to v3 onion addresses in Tor Browser. <ref>https://phabricator.whonix.org/T764</ref>
* Extended the lifetime of the {{project_name}} signing key. <ref>https://phabricator.whonix.org/T497</ref>
* Sourced new onion services webservers for the sdwdate feature, which ensures the system's clock is correctly set for security, privacy and anonymity purposes. <ref>https://phabricator.whonix.org/T266</ref>

= {{q_project_name}} =

== Bug Fixes ==

* Fixed qubes-whonix-firewall systemd service start. <ref>https://phabricator.whonix.org/T528</ref> <ref>This fixes various bugs relating to Tor starting / failing multiple times and qubes-whonix-torified-updates-proxy sometimes failing.</ref>
* Resolved whonixcheck fixes for Qubes R4. <ref>https://phabricator.whonix.org/T724</ref>
* Corrected false positive failure messages for the updates proxy test in Qubes R4. <ref>https://phabricator.whonix.org/T723</ref> <ref>Qubes R4 RC1.</ref>
* Disabled qubes-SetDateTime / qubes.SyncNtpClock in {{q_project_name}} VMs since it interfered with timesync. <ref>https://phabricator.whonix.org/T384</ref>
* Resolved accumulation of old Tor Browser instances in ''/var/cache/tb-binary/.tb/'' which caused users to run into full disk error messages. <ref>https://phabricator.whonix.org/T671</ref>
* Resolved an occasional error message whereby {{project_name}} templates incorrectly reported they were not connected to the {{gateway_product_name}} ProxyVM. <ref>https://phabricator.whonix.org/T496</ref>
* Resolved the broken anon-ws-disable-stackedtor function in [[{{q_project_name_short}}|{{q_project_name}}]]. <ref>https://phabricator.whonix.org/T454</ref>
* Enforced the opening of all links from <code>sys-whonix</code>, <code>whonix-gw</code> and <code>whonix-ws</code> in the <code>anon-whonix</code> AppVM to prevent error messages. <ref>https://phabricator.whonix.org/T452</ref>

== Builds ==

* Corrected the build failure of {{workstation_product_name}} template in {{q_project_name}} R3.2 and added the qubes-template-whonix to continuous integration service TravisCI. <ref>https://phabricator.whonix.org/T527</ref>
* Resolved {{project_name}} template build failures in Qubes R4 related to Tor Browser downloads. <ref>https://phabricator.whonix.org/T710</ref>
* Changed the {{q_project_name}} build process to install {{project_name}} from the {{project_name}} binary APT repository. This simplifies code, results in faster builds, removes build dependencies inside the template, and reduces the overall template size. <ref>https://phabricator.whonix.org/T498</ref>
* Allowed the {{project_name}} build script to run as root and reworked user_name. <ref>https://phabricator.whonix.org/T416</ref>

== Code ==

* Removed fetching of {{project_name}} source code in qubes-template-whonix. <ref>https://phabricator.whonix.org/T507</ref>
* Removed the qubes-update-check system service from {{q_project_name}} TemplateVMs, since it was unnecessary. <ref>https://phabricator.whonix.org/T433</ref> <ref>The qubes-update-check.service already has improved upgrade notifications.</ref>
* Reworked / removed a number of installed packages in {{q_project_name}} which are only required for the [[{{non_q_project_name_short}}|{{non_q_project_name}}]] desktop. <ref>https://phabricator.whonix.org/T429</ref> <ref>For instance, plasma-widget-folderview, kde-kdm-autologin, split the anon-shared-desktop-kde package and so on.</ref>
* Removed the default username and password in the {{q_project_name}} terminal, because it is not required. <ref>https://phabricator.whonix.org/T428</ref>

== Improved Functionality and Usability ==

* Ported whonixcheck and tb-updater to Qubes' qrexec-based updates proxy, since TemplateVMs are non-networked by default in Qubes R4. <ref>https://phabricator.whonix.org/T491</ref>
* Changed the tb-updater configuration to use Qubes updates proxy, since Qubes R4 sets the NetVM of TemplateVMs to none by default. <ref>https://phabricator.whonix.org/T477</ref>
* Implemented the ability to install {{workstation_product_name}} and {{gateway_product_name}} from dom0 with a <code>sudo apt-get install whonix-(workstation|gateway)</code> feature. <ref>https://phabricator.whonix.org/T461</ref>
* Ported the bind-directories functionality upstream to Qubes. <ref>https://phabricator.whonix.org/T414</ref>
* Implemented the new bind-directories functionality in [[{{q_project_name_short}}|{{q_project_name}}]]. <ref>https://phabricator.whonix.org/T501</ref>
* Implemented a check for whether the <code>whonix-gw</code> ProxyVM (<code>sys-whonix</code>) has a NetVM which is set to "none", with a warning shown if this is the case. <ref>https://phabricator.whonix.org/T421</ref>
* Implemented a new feature so that following an update of the {{workstation_product_name}} TemplateVM, newly created AppVMs based on the updated TemplateVM come with an up-to-date version of Tor Browser. <ref>https://phabricator.whonix.org/T417</ref>
* Modified whonixcheck to check if: {{gateway_product_name}} is running in a NetVM or ProxyVM; {{workstation_product_name}} is running in an AppVM; and to skip the test if a TemplateVM is detected. <ref>https://phabricator.whonix.org/T406</ref>

== Security Enhancements ==

* Prevented ''/usr/lib/qubes/qubes-setup-dnat-to-ns'' from running in {{q_project_name}} to stop it from modifying firewall rules. <ref>https://phabricator.whonix.org/T502</ref>

= {{project_name}} 14 Changelog = 

{{project_name}} 14 was released on August 6, 2018. Significantly, {{project_name}} 14 is based on the Debian stretch (Debian 9) distribution which was released in mid-2017, instead of Debian jessie (Debian 8). <ref>https://www.debian.org/releases/stretch/</ref> Users now have access to numerous updated and new software packages, a more modern branch of GnuPG, and more. <ref>https://www.debian.org/News/2017/20170617</ref> <ref>https://www.debian.org/releases/stable/amd64/release-notes/</ref> <ref>https://www.debian.org/releases/stable/i386/release-notes/</ref>

= All Platforms =

== AppArmor ==

* Fixed the whonixcheck AppArmor profile to remove continuous denied messages relating to signal. <ref>https://forums.whonix.org/t/apparmor-and-kernel-4-14-18-1-creates-tons-of-kern-log-pop-ups/4811</ref>
* Fixed the AppArmor profile for obfs4proxy to enable correct functioning of Tor Bridges in {{gateway_product_name}}. <ref>https://phabricator.whonix.org/T676</ref>
* Fixed the Tor Browser AppArmor profile to allow correct functionality. <ref>https://phabricator.whonix.org/T672</ref>
* Corrected the tor-controlport-filter AppArmor profile to ensure correct functioning. <ref>https://phabricator.whonix.org/T587</ref>
* Removed the Pidgin AppArmor profile, since Pidgin is recommended against for security reasons. <ref>https://phabricator.whonix.org/T568</ref>
* Hardened the Control Port Filter AppArmor profile. <ref>https://phabricator.whonix.org/T532</ref>
* Disabled installation of apparmor-notify (AppArmor notifications) by default, thereby removing the reporting of mostly harmless denied messages. <ref>https://phabricator.whonix.org/T557</ref> <ref>The {{project_name}} documentation recommends that advanced users install apparmor-notify to investigate relevant warnings.</ref>

== Bug Fixes ==

* Corrected the broken whonix-setup-wizard autostart on {{gateway_product_name}}. <ref>https://phabricator.whonix.org/T640</ref>
* Fixed sdwdate-gui freezing when using right-click in the menu. <ref>https://phabricator.whonix.org/T626</ref>
* Fixed dependency issues which prevented the whonix-setup-wizard gui from starting. <ref>https://phabricator.whonix.org/T592</ref>
* Implemented the correct <code>Tor --verify</code> command for {{gateway_product_name}} torrc configuration checks to prevent the reporting of false positives. <ref>https://phabricator.whonix.org/T787</ref>
* Modified the uwt wrapper script to correctly handle symbolic links. <ref>https://phabricator.whonix.org/T797</ref>
* Changed the {{gateway_product_name}} firewall prerouting rules for socks ports so they do not interfere with trans port traffic. <ref>https://phabricator.whonix.org/T462</ref>
* Modified whonixcheck to first test if network interfaces are up to prevent the test from failing unnecessarily. <ref>https://phabricator.whonix.org/T490</ref>
* Fixed a whonixcheck whonix-firewall check race condition. <ref>https://phabricator.whonix.org/T675</ref>

== Builds ==

* Resolved genmkfile build dependencies for building {{workstation_product_name}} and {{gateway_product_name}}. <ref>https://phabricator.whonix.org/T700</ref>
* Confirmed the new and upgraded {{project_name}} 14 builds are identical. <ref>https://phabricator.whonix.org/T760</ref> <ref>https://phabricator.whonix.org/T761</ref>
* Fixed debian/control parsing with respect to make_deb_build_dependencies / make_deb_runtime_dependencies. <ref>https://phabricator.whonix.org/T643</ref>

== Code ==

* Updated {{project_name}} code for Tor Browser tb-updater. <ref> https://phabricator.whonix.org/T666</ref>
* Changed the bindp compile to postinstall to make it cross-platform (Qubes, 64-bit, 32-bit). <ref>https://phabricator.whonix.org/T688</ref>
* Rewrote sclockadj in C and updated the sdwdate package to compile sclockadj. <ref>https://phabricator.whonix.org/T686</ref> <ref>https://phabricator.whonix.org/T650</ref>
* Implemented symlinks for onion-grater profiles to maintain functionality following profile upgrades. <ref>https://phabricator.whonix.org/T768</ref>
* Enhanced onion checking in sdwdate to improve the unit test. <ref>https://phabricator.whonix.org/T648</ref>
* Ported msgcollector to python3 and python3-pyqt5. <ref>https://phabricator.whonix.org/T632</ref>
* Ported whonix-setup-wizard to python3. <ref>https://phabricator.whonix.org/T628</ref>
* Ported python-guimessages to python3. <ref>https://phabricator.whonix.org/T627</ref>
* Rewrote sdwdate to ensure python exceptions are written to the journal. <ref>https://phabricator.whonix.org/T608</ref>
* Rewrote control-port-filter-python to ensure exceptions are written to the journal. <ref>https://phabricator.whonix.org/T603</ref>
* Re-added some non-essential packages to {{project_name}} that were removed from Debian stretch. <ref>https://phabricator.whonix.org/T601</ref> <ref>gtk3-engines-oxygen.</ref>
* Ported helper-scripts so they instead use Tor authentication cookies. <ref>https://phabricator.whonix.org/T578</ref>
* Ported whonixcheck check_tor_socks_port_reachability.bsh to use the Tor unix domain socket socks file. <ref>https://phabricator.whonix.org/T548</ref>
* Ported anon-ws-disable-stacked-tor to systemd socket activation to remove unnecessary, idle socat listeners. <ref>https://phabricator.whonix.org/T623</ref> <ref>This also reduces the RAM load caused by too many socat instances.</ref>
* Removed auditd configuration folder parsing ''/etc/audit/rules.d/'' by default, since the feature has been implemented upstream.
* Implemented anonymous counting of {{project_name}} users via the whonixcheck {{project_name}} News function. <ref>https://phabricator.whonix.org/T689</ref> <ref>This measure takes place over Tor using a v3 onion. It does not include collection of IP addresses or unique identifiers of any kind, and can be [[{{project name short}}check_Hardening#Prevent_Downloading_{{project_name_short}}_News_and_{{project_name_short}}_User_Census_Counting|easily disabled]].</ref>
* Implemented, but did not activate changes to the {{project_name}} firewall so: sdwdate is stopped before suspend; timesync-fail-closed mode is set before suspend; sdwdate is restarted after resume; and {{project_name}} firewall enters full mode after resume following successful sdwdate activation. <ref>https://phabricator.whonix.org/T551</ref>
* Configured auditd to process the configuration folder ''/etc/audit/rules.d/'' by default to aid debugging. <ref>https://phabricator.whonix.org/T535</ref> <ref>https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=833474</ref>
* Implemented monitoring of changes to ''/var/lib/tor/lock'' access rights via auditd to aid debugging. <ref>https://phabricator.whonix.org/T537</ref>
* Modified anon-ws-disable-stacked-tor to maintain Tor Browser functionality with Unix domain socket files redirection and prevent Tor over Tor scenarios. <ref>https://phabricator.whonix.org/T192</ref>
* Configured whonixcheck to test for failed daemons. <ref>https://phabricator.whonix.org/T488</ref>
* Implemented a sdwdate sd_notify systemd watchdog. <ref>https://phabricator.whonix.org/T639</ref>
* Disabled systemd-resolved and instead implemented a ''/lib/systemd/system/systemd-resolved.service.d/'' drop-in. <ref>https://phabricator.whonix.org/T762</ref>
* Ported ''/usr/sbin/service'' to systemctl as the latter runs non-interactively. <ref>https://phabricator.whonix.org/T637</ref>
* Disabled timedatectl network time synchronization in Debian stretch to prevent conflicts with sdwdate. <ref>https://phabricator.whonix.org/T589</ref>
* Removed brltty, brltty-speechd and brltty-x11 since they create a local listener port which may conflict with onion-grater. <ref>https://phabricator.whonix.org/T563</ref>
* Modified anon-ws-disable-stacked-tor systemd-unit-files-generator so it is configurable. <ref>https://phabricator.whonix.org/T796</ref>
* Rewrote slockadj3 in C and determined how to prevent spamming of sclockadj3 time changes to logs. <ref>https://phabricator.whonix.org/T691</ref> <ref>https://github.com/systemd/systemd/issues/5207</ref> <ref>https://phabricator.whonix.org/T686</ref> <ref>https://phabricator.whonix.org/T50</ref>

== Improved Functionality and Usability ==

* Implemented the major new [[Anon_Connection_Wizard|Anon Connection Wizard]] feature to simplify connections to the Tor network via a Tor bridge and/or a proxy. <ref>https://phabricator.whonix.org/T699</ref>
* Integrated the Tor Pluggable Transport <code>meek_lite</code>. <ref>https://forums.whonix.org/t/censorship-circumvention-tor-pluggable-transports/2601</ref>
* Integrated anon-connection-wizard into whonix-setup-wizard, so that the latter can now start the former. <ref>https://phabricator.whonix.org/T716</ref>
* Removed the Control Port Filter Proxy script from anon-ws-disable-stacked-tor since it is no longer required for proper Tor connections or Tor Browser functions (its functionality is now replaced by [https://github.com/{{project_name_short}}/onion-grater onion-grater]). This means [[Next|Ricochet, Zeronet]] and [[Onionshare|OnionShare]] are now compatible with {{project_name}}. <ref>OnionShare is not installed by default in {{project_name}} 14 because it is not in the stretch repository, however it may be manually installed using the [[Onionshare#Install_OnionShare|available wiki instructions]].</ref> <ref>https://phabricator.whonix.org/T657</ref> <ref>[https://github.com/{{project_name_short}}/onion-grater onion-grater]: <blockquote>Filters out Tor control protocol commands that are dangerous for anonymity such as GETINFO ADDRESS using a whitelist. Acts as a proxy between the client application and Tor. <br /><br />
For example it allows using Tor Browser's New Identity feature on Anonymity Distribution Workstations, fixes Tor Browser's about:tor default homepage and Tor Button status indicator without exposing commands that are dangerous for anonymity.</blockquote></ref>
* Installed necessary dependencies for proper ZeroNet functionality. <ref>https://phabricator.whonix.org/T701</ref>
* Installed onioncircuits by default in {{gateway_product_name}}. <ref>https://forums.whonix.org/t/onioncircuits-viewing-the-status-and-circuits-of-tor/2539</ref>
* Added <code>--list-interface</code> to tor-controlport-filter, as it works better with dynamic IP addresses. <ref>https://phabricator.whonix.org/T579</ref>
* Added a ''/etc/tor-controlport-filter.d'' configuration extension feature. <ref>https://phabricator.whonix.org/T576</ref>
* Fixed the control-port-filer-python configuration to rewrite HS_DESC replies by Tor, so OnionShare is supported. <ref>https://phabricator.whonix.org/T574</ref>
* Merged the tor-controlport-filter by Tails for various enhancements. <ref>https://phabricator.whonix.org/T573</ref>
* Implemented more user-friendly error messages (instead of tb-starter error handlers) when non-{{project_name}} related Tor Browser issues cause start-tor-browser to fail and exit zero. <ref>https://phabricator.whonix.org/T510</ref>
* Implemented sane built-in defaults for whonix-gw-firewall, whonix-ws-firewall, whonixcheck, sdwdate, uwt, onion-grater, rads, open-link-confirmation, tb-starter and tb-updater, even if configuration files do not exist. <ref>https://phabricator.whonix.org/T503</ref>
* Changed uwt to set AllowOutboundLocalhost / AllowInbound which can help make servers utilizing Tor onion services work. <ref>https://phabricator.whonix.org/T357</ref>
* Implemented a sd_notify watchdog feature for onion-grater so the service is restarted if it appears to be running, but has became unresponsive. <ref>https://phabricator.whonix.org/T274</ref>
* Created a bindp {{project_name}} package to enable {{workstation_product_name}} applications that use Tor ephemeral onion services to bind on all interfaces as necessary. <ref>https://phabricator.whonix.org/T561</ref>
* Modified sdwdate to check if the clock is changed "behind the back" of the program and suggest a manual user fix. <ref>https://phabricator.whonix.org/T481</ref>
* Improved default torsocks information / warning messages when wrapped commands are invoked to reduce user confusion. <ref>https://phabricator.whonix.org/T73</ref>
* Both [[{{non_q_project_name_short}}|{{non_q_project_name}}]] and {{q_project_name}} are now compatible with the Tor Project's sandboxed Tor Browser. <ref>This is no longer recommended, since the The Tor Project has ceased development and [https://trac.torproject.org/projects/tor/ticket/25540 stopped building and distributing sandboxed-tor-browser binaries].</ref>

== Security Enhancements ==

* Confirmed functionality of the kloak anti-keystroke deanonymization tool in {{project_name}}. <ref>https://phabricator.whonix.org/T583</ref> <ref>By default, kloak is packaged in {{project_name}} 15 for the {{non q project name short}} platform. Unfortunately {{q project name short}} is unsupported (dysfunctional) due to the following Qubes issues: <br /> 
* https://github.com/QubesOS/qubes-issues/issues/2558
* https://github.com/QubesOS/qubes-issues/issues/1850</ref>
* Identified more reliable onion servers as appropriate time sources for sdwdate, which enables correct network time synchronization for anonymity-focused distributions.  <ref>https://phabricator.whonix.org/T647</ref>
* Implemented Tails' Control Port Filter Proxy in {{project_name}} and merged recent changes since it was forked. <ref>https://phabricator.whonix.org/T617</ref> <ref>https://phabricator.whonix.org/T612</ref>
* Fixed security and hardening (stack canary) issues with the bindp libindp.so package (which were merged upstream). <ref>https://phabricator.whonix.org/T599</ref>
* Uploaded Tor version 0.3.3.9 (stable) release to the {{project_name}} repository to enable full v3 onion functionality for both hosting of onion services and access to v3 onion addresses in Tor Browser. <ref>https://phabricator.whonix.org/T764</ref>
* Onion sources are now preferred for {{project_name}} updates/upgrades for greater security. Note: this change has been reverted due to the unreliable nature of onion connections at present - see footnote. <ref>Previously both clearnet and onion sources were in use and priority was given to the latter, with v3 onion connections being preferred (clearnet provided a fallback). Onions will not be set by default until [https://github.com/DonnchaC/onionbalance OnionBalance] is available for v3 onions, and the repositories can be reached reliably.</ref>
* Disabled the apt-timer in Debian stretch to prevent auto updates, thereby preventing the attendant security risks associated with background updates without user input. <ref>https://phabricator.whonix.org/T590</ref>
* Disabled nautilus previews by default due to the security risks. <ref>https://phabricator.whonix.org/T500</ref>
* Implemented uwt to set TORSOCKS_ISOLATE_PID in Debian Stretch so all uwt wrapped applications are stream isolated. <ref>https://phabricator.whonix.org/T356</ref>
* Implemented tor+http / apt-transport-tor rather than Acquire::BlockDotOnion "false" for better security and stream isolation. <ref>https://phabricator.whonix.org/T610</ref>
* Disabled the systemd DNS resolver feature in order to reduce the attack surface and to remove the potential for adverse anonymity impacts. <ref>https://phabricator.whonix.org/T471</ref>
* Established a dedicated {{project_name}}.org repository, with appropriate redirects from {{project_name}} mirrors. <ref>https://phabricator.whonix.org/T475</ref>
* Removed the DHCP client from {{gateway_product_name}} and switched to a static network configuration so the dhclient is no longer present on all interfaces, including the internal network. <ref>https://phabricator.whonix.org/T559</ref>
* Disabled VLC metadata collection by default. <ref>https://phabricator.whonix.org/T736</ref>
* Disabled "Obey DRM limitations" in Okular, <ref>The default {{project_name}} PDF reader.</ref> since Digital Rights Management (DRM) can be used as a tracking vector. <ref>https://www.locklizard.com/track-pdf-monitoring/</ref> <ref>https://phabricator.whonix.org/T776</ref>

= {{non_q_project_name_short}} =

{{mbox
| type      = notice
| image   = [[File:Ambox_notice.png|40px|alt=Info]]
| text    = Desktop shortcuts are no longer available in [[{{non_q_project_name_short}}|{{non_q_project_name}}]]. <ref>Until it is determined how to enable kde-folderview in Debian stretch.</ref>
}}

== Bug Fixes ==

* Increased the {{gateway_product_name}} VRAM in VirtualBox from 8 to 16 MB to avoid error messages and possible video problems when using full screen mode. <ref>https://phabricator.whonix.org/T680</ref>
* Corrected sdwdate-gui systray so it properly registers in kde systray and does not appear as a gap in the Entry column. <ref>https://phabricator.whonix.org/T638</ref>
* Corrected the sdwdate-gui tray icon so it is visible in Debian stretch. <ref>https://phabricator.whonix.org/T598</ref>
* Corrected the virtualization detection method to properly recognize KVM. <ref>https://github.com/{{project_name_short}}/shared-folder-help/commit/2130d872d4e346bc490e70fca79e572d1d1f86df</ref>

== Builds ==

* Reduced the size of the default, binary {{project_name}} images by approximately 50 per cent using zerofree. <ref>https://phabricator.whonix.org/T790</ref> <ref>http://forums.whonix.org/t/reducing-size-of-ova-images</ref> <ref>VirtualBox .ova and libvirt qcow2 raw images.</ref> <ref>The {{gateway_product_name}} is reduced from 1.7 GB to 850 MB, while the {{workstation_product_name}} is reduced from 2 GB to 1.1 GB.</ref>

== Code ==

* Removed kmix-disable-autostart since it is no longer required to make sure the clipboard history icon is loaded into the system tray. <ref>https://phabricator.whonix.org/T722</ref>

== Improved Functionality and Usability ==

* Created the <code>grub-live</code> package which can [[{{project name short}}_Live|run {{project_name}} as a live system]]. <ref>https://phabricator.whonix.org/T714</ref> <ref><code>grub-live</code> is not installed by default in {{project_name}} 14 and is an optional package only.</ref>
* Added Kscreen to {{project_name}} by default in order to allow DPI scaling and other basic desktop features of Plasma 5. <ref>https://phabricator.whonix.org/T703</ref>
* Removed the VirtualBox shared folder and confirmed automounting of shares is enabled in Debian stretch. <ref>https://phabricator.whonix.org/T702</ref>

== Security Enhancements ==

* Removed okular from anon-shared-applications-kde to anon-workstation-default-applications so it is not installed on {{gateway_product_name}}. <ref>https://github.com/{{project_name_short}}/anon-meta-packages/commit/a22b1807c79cb1d21447c83ed251c331cf6222f1</ref>
* Hide the CPUID in VirtualBox 5 by setting generic values via <code>HostCPUID</code>. <ref>https://phabricator.whonix.org/T408</ref>

= {{q_project_name}} =

== Bug Fixes ==

* Implemented whonixcheck fixes for Qubes R4. <ref>https://phabricator.whonix.org/T724</ref>
* Corrected false positive failure messages for the updates proxy test in Qubes R4. <ref>https://phabricator.whonix.org/T723</ref> <ref>Qubes R4 RC1.</ref>
* Resolved non-functionality of Tor Browser due to jemalloc corruption. <ref>https://phabricator.whonix.org/T651</ref>
* Resolved segfaults in Tor Browser caused by excessive string length in the XDG_CONFIG_DIRS environment variable. <ref>https://phabricator.whonix.org/T767</ref>
* Resolved accumulation of old Tor Browser instances in ''/var/cache/tb-binary/.tb/'' which caused users to run into full disk error messages. <ref>https://phabricator.whonix.org/T671</ref>
* Corrected dependencies in the qubes-whonix package to resolve issues when upgrading to Debian stretch. <ref>https://phabricator.whonix.org/T620</ref>
* Fixed a corridor lintian warning on Debian related to systemd documentation. <ref>https://phabricator.whonix.org/T607</ref>
* Resolved error messages associated with tput using an empty TERM environment variable. <ref>https://phabricator.whonix.org/T505</ref>
* Resolved the failure of tb-updater to copy Tor Browser into the user's home directory on first VM startup in Qubes R4. <ref>https://phabricator.whonix.org/T781</ref> <ref>https://github.com/{{project_name_short}}/tb-updater/issues/2</ref> <ref>https://phabricator.whonix.org/T789</ref>
* Implemented the correct appmenus for {{q_project_name}} 14 TemplateVMs and fixed missing appmenu entries. <ref>https://github.com/QubesOS/qubes-issues/issues/4033</ref> <ref>https://github.com/QubesOS/qubes-issues/issues/4093</ref>
* Resolved the false positive timedatectl error message when using whonixcheck. <ref>https://github.com/QubesOS/qubes-issues/issues/3469</ref>
* Corrected the absent 'Connected to Tor.' message, which arose due to a missing notification daemon. <ref>https://github.com/QubesOS/qubes-issues/issues/4098</ref>
* Resolved non-persistence of files in ''/usr/local'', such as the Tor configuration file. <ref>A persistent configuration now applies upon reboot.</ref> <ref>https://github.com/QubesOS/qubes-issues/issues/4095</ref>
* Implemented a qvm-features-request <code>whonix-ws=1</code>, so that newly created {{workstation_product_name}} AppVMs inherit the anon-vm tag. <ref>https://github.com/QubesOS/qubes-issues/issues/3595</ref> <ref>https://phabricator.whonix.org/T791</ref> <ref>The [https://whonix.org/wiki/Dev/Qubes#anon-vm_tag anon-vm tag] enforces selected settings from TemplateVMs to TemplateBasedVMs which are necessary for anonymity.</ref>
* Created qubes-core-admin-addon-whonix to enforce the anon-vm tag for newly created {{workstation_product_name}} AppVMs. <ref>https://phabricator.whonix.org/T792</ref>
* Removed redundant warning messages affecting {{workstation_product_name}} DisposableVMs that related to the first invocation of an open-link-confirmation. <ref>https://github.com/QubesOS/qubes-issues/issues/4113</ref>
* Fixed an apt-get package issue whereby some users were downgraded to a known vulnerable version. <ref>https://github.com/QubesOS/qubes-issues/issues/4055</ref> <ref>The bug caused a version downgrade to apt-get 1.0.9.8.4</ref>
* Corrected an aptitude update failure which affected all {{q_project_name}} VMs. <ref>https://github.com/QubesOS/qubes-issues/issues/3882</ref>
* Installed Tor Browser by default in {{workstation_product_name}}-DisposableVMs, as it was previously missing upon VM launch. <ref>https://github.com/QubesOS/qubes-issues/issues/3740</ref>
* Fixed the periodic failure of {{workstation_product_name}} AppVMs to start correctly, which prevented the launch of any user applications. <ref>https://github.com/QubesOS/qubes-issues/issues/2334</ref>
* Fixed an error which caused ''/etc'' in {{q_project_name}} templates to be owned by user:user <ref>https://github.com/QubesOS/qubes-issues/issues/1156</ref>

== Builds ==

* Corrected the build failure of the {{workstation_product_name}} template in {{q_project_name}} R3.2 and added qubes-template-whonix to the continuous integration service TravisCI. <ref> https://phabricator.whonix.org/T527</ref>
* Removed older unstable {{project_name}} 14 builds from Qubes' unstable repository. <ref>https://github.com/QubesOS/qubes-issues/issues/3766</ref>
* Resolved unexpected build failures. <ref>https://github.com/QubesOS/qubes-issues/issues/4063</ref>
* Removed {{project_name}} 14 templates from Qubes' unstable repository, since testing versions now reside in qubes-templates-community-testing. <ref>https://github.com/QubesOS/qubes-issues/issues/4086</ref>
* Backported versioning of {{project_name}} template names from Qubes R4 to Qubes R3.2 to simplify the installation procedure for users on the earlier platform. <ref>https://github.com/QubesOS/qubes-issues/issues/4130</ref>

== Code ==

* Removed cups and system-config-printer from {{workstation_product_name}}, since printing capabilities are better suited to alternate VMs and this also removes a local TCP listener that is otherwise created. <ref>https://phabricator.whonix.org/T619</ref>
* Corrected anon-meta-packages compatibility for Qubes R3.2 and R4. <ref>https://phabricator.whonix.org/T697</ref>
* Installed pulseaudio-qubes for audio support and removed pulseaudio and VLC from <code>sys-whonix</code>. <ref>https://phabricator.whonix.org/T641</ref>
* Created a qvm-features-request <code>whonix-gw=1</code> as a prerequisite for sdwdate-gui-qubes. <ref>https://github.com/QubesOS/qubes-issues/issues/4080</ref>

== Improved Functionality and Usability ==

* Confirmed full {{q_project_name}} compatibility with Qubes R4. <ref>https://phabricator.whonix.org/T698</ref>
* Confirmed Qubes-Whonix-Workstation has full DispVM support. <ref>https://phabricator.whonix.org/T463</ref>
* Created a tb-updater storage path for Qubes R4 so new AppVMs and DisposableVMs have a copy of the latest Tor Browser version. <ref>https://phabricator.whonix.org/T726</ref> <ref>https://forums.whonix.org/t/qubes-dispvm-technical-discussion/3232/58</ref>
* Created {{q_project_name}} 14 SaltStack state files with flexible versioning for future releases.  <ref>https://github.com/QubesOS/qubes-issues/issues/3765</ref> <ref>https://phabricator.whonix.org/T788</ref>
* Modified {{q_project_name}} Salt code so the repository is not hard-coded, allowing users to choose either the qubes-templates-community or qubes-templates-community-testing repository. <ref>https://github.com/QubesOS/qubes-issues/issues/4087</ref>

== Licensing ==

* Added a COPYING file to the {{q_project_name}} template repository to assure users they are covered by a free software license. <ref>https://phabricator.whonix.org/T810</ref> <ref>{{project_name}} is licensed under GPLv3. The repository in question can be found [https://github.com/whonix/qubes-template-whonix here].</ref>

== Security Enhancements ==

* Added {{q_project_name}} tags on domain-load rather than upon VM creation to avoid missing tags for users that upgrade. <ref>https://github.com/QubesOS/qubes-issues/issues/4094</ref>

-----

= {{project_name}} 14 Updates = 

As {{project_name}} is now a rolling distribution, users will benefit from regular small security and usability improvements, features and bug fixes as they enter the {{project_name}} stable repository. Those will be announced here.

== Documentation ==

* Simplified [[Documentation|{{project_name}} Documentation]].  <ref>https://phabricator.whonix.org/T521</ref> <ref>https://forums.whonix.org/t/splitting-whonix-documentation-into-a-short-and-long-edition-for-better-usability</ref>
* Documented multiple Qubes TemplateVMs. <ref>https://phabricator.whonix.org/T811</ref> <ref>For example this simplifies processes when installing additional software safely.</ref> <ref>https://www.whonix.org/wiki/Multiple_Whonix-Workstations#Multiple_Qubes-Whonix_TemplateVMs</ref>
* Documented a recovery procedure after a (suspected) compromise. <ref>https://phabricator.whonix.org/T580</ref> <ref>https://forums.whonix.org/t/document-recovery-procedure-after-compromise</ref>
* Created a systemd-socket-proxyd instructions template. <ref>https://phabricator.whonix.org/T544</ref> <ref>This template simplifies instructions for [[Onion Services]].</ref>
* Conducted research into Single Tor-Gateway with Multiple Workstations versus Multiple Tor-Gateways mapped 1:1 to Workstation VMs. <ref>https://phabricator.whonix.org/T567</ref> <ref>https://www.whonix.org/wiki/Multiple_Whonix-Workstation</ref>
* Documented identity correlation attacks and defenses / removing the Apache recommendation. <ref>https://phabricator.whonix.org/T523</ref> <ref> Apache has a large attack surface and some features erode privacy and leak information about a server's configuration.</ref> <ref>https://www.whonix.org/wiki/Hidden_Services#Hidden_Webserver</ref> <ref>https://forums.whonix.org/t/website-fingerprinting-defenses-at-the-application-layer?</ref>
* Created an apt-get Qubes template. <ref>https://phabricator.whonix.org/T545</ref> <ref>The template reminds Qubes users that newly installed packages must be installed in the TemplateVM to be persistent.</ref>
* Documented how to use [[SecBrowser]] and configured a secbrowser wrapper that disables Tor. <ref>The wrapper was integrated into tb-updater and tb-starter.</ref> <ref>https://forums.whonix.org/t/todo-research-and-document-how-to-use-tor-browser-for-security-not-anonymity-how-to-use-tbb-using-clearnet/3822</ref>
* Updated the [[Dev/Control_Port_Filter_Proxy|Control Port Filter Proxy]] wiki page. <ref>https://phabricator.whonix.org/T877</ref>
* Created documentation for [[ZeroNet]] support. <ref>https://phabricator.whonix.org/T597</ref> <ref>https://www.whonix.org/wiki/ZeroNet</ref>
* Finalized wiki edits for numerous, outstanding documentation fixes and additions. <ref>Including: 
* [[Multiple_Whonix-Workstation|Multiple Whonix-Workstations]] and [[Multiple_Whonix-Gateway|Gateways]]
* [[Onionizing_ Repositories|Onionizing Repositories]]
* [[Qubes/Disposable_VM|Qubes DisposableVMs]]
* [[SecBrowser]]
* [[System_Hardening_Checklist|Security Hardening Checklist]]
* As well as all entries in the first half of the main Table of Contents.</ref>

== Website Fixes and Outreach ==

* Website fixes: implemented the proposed download directory structure as well as download redirects, stable download links and permalinks. <ref>This greatly assists with documentation efforts, since documentation does not break and need updating based on a new point release being available.</ref>
* Implemented numerous mediawiki fixes for better website presentation. <ref>https://phabricator.whonix.org/T809</ref>
* Opened a Peertube video channel. <ref>https://phabricator.whonix.org/T870</ref> <ref>{{project_name}} already has a Youtube channel, but Peertube provides a further avenue for information on new/fresh projects.</ref>
* Updated [[Dev/Redistribution#Announcement|Release Announcements]] to collate all places where this should be posted. <ref>https://phabricator.whonix.org/T847</ref>
* Post Whonix release announcements in crypto currency Reddit forums. <ref>https://phabricator.whonix.org/T846</ref>
* Researched social media strategies to increase {{project_name}} awareness. <ref>https://phabricator.whonix.org/T836</ref>
* Established mirroring of all {{project_name}} announcements. <ref>https://phabricator.whonix.org/T830</ref>
* Bookmarked the outreach workboard. <ref>https://phabricator.whonix.org/T839</ref> <ref>https://phabricator.whonix.org/project/board/144/</ref>
* Signed the {{project_name}} developer team up to various developer mailing lists. <ref>https://phabricator.whonix.org/T840</ref>

= All Platforms =

== AppArmor ==

* Corrected the dnscrypt-proxy AppArmor profile for full functionality. <ref>https://forums.whonix.org/t/i-need-help-to-get-my-apparmor-profile-of-dnscrypt-proxy-to-run/7457</ref>
* Removed unnecessary and extensive capabilities from the Tor Browser AppArmor profile. <ref>https://forums.whonix.org/t/why-does-the-tor-browser-apparmor-profile-have-sys-admin-sys-chroot-and-ptrace-capabilties/7409</ref> <ref>https://github.com/Whonix/apparmor-profile-torbrowser/pull/6</ref> <ref><blockquote>The Tor Browser AppArmor profile has capability sys_admin, capability sys_chroot, and ptrace. This looks pretty insecure.

ptrace will allow the Tor Browser to modify and inspect other running processes.

sys_admin will allow the Tor Browser to do a whole load of things that it probably shouldn’t be able to.

sys_chroot will allow the Tor Browser to chroot which can make an attacker able to put a setuid program inside a chroot jail with a fake /etc/passwd and /etc/shadow which can fool it into giving it root access.</blockquote></ref>
* Amended the Tor Browser AppArmor profiles so 8.* versions correctly launch. <ref>https://forums.whonix.org/t/tor-browser-8-wont-launch/5863</ref> <ref>https://github.com/Whonix/apparmor-profile-torbrowser/commit/5b1550cc51d73652d63af1fd010d9beb34e2069e</ref>
* Added capability sys_module to whonixcheck because it is required for ifconfig. <ref>https://forums.whonix.org/t/whonix-apparmor-profiles-development-discussion/108/682</ref> <ref>https://github.com/Whonix/whonixcheck/commit/5873f4c3bb1665a6fb92224968805f561aca87e3</ref>
* Added a wildcard for non-Tor or modified Tor Browser Bundles. <ref>https://github.com/Whonix/apparmor-profile-torbrowser/pull/3</ref> <ref>This allows the same apparmor profile to be used for i2p browser (~/.i2pb/i2p-browser) or for a hypothetical ZeroNet browser (~/.zerob/zeronet-browser/) and so on.</ref>
* Deprecated /etc/apparmor.d/home.tor-browser.start-tor-browser due to broken functionality. <ref>https://github.com/Whonix/apparmor-profile-torbrowser/commit/21c36545df427bd8943a92279af78e53ea627056</ref>
* Added various permissions to the XChat AppArmor profile for greater functionality. <ref>https://github.com/Whonix/apparmor-profile-xchat/pull/2</ref>

== Bug Fixes ==

* Implemented an automated /var/lib/tor permission fix. <ref>https://phabricator.whonix.org/T855</ref> <ref>whonixcheck runs as user whonixcheck, so a wrapper might be needed which is called using sudo (with a sudoers.d exception for this test).</ref>
* Installed the missing pinentry-qt package so Enigmail decryption is functional. <ref>https://phabricator.whonix.org/T820</ref> <ref>https://forums.whonix.org/t/missing-pinentry-package-whonix-14/5630</ref>
* Fixed the Whonix custom firewall settings start menu entry in Whonix XFCE. <ref>https://github.com/Whonix/whonix-firewall/commit/8d9767a72fdbaac863f8e372a10dfa6f2779ce6f</ref>
* Fixed the false-positive "Tor Browser not installed" message in tb-starter. <ref>https://github.com/Whonix/tb-starter/commit/7f3ac3b6d7beb659333f39b0506cd32fb07dc1bb</ref>
* Onion-grater: fix Tor control auth cookie authentication even if HashedControlPassword is set. <ref>https://github.com/Whonix/onion-grater/commit/70e735dae1c15920c356b07fc6aaf4b9589b465a</ref>
* Fixed output when using open-link-confirmation. <ref>https://github.com/Whonix/open-link-confirmation/commit/30810e6fa96b80a749505ea60e9dfb0d915edf14</ref>
* Change etc/.skel to etc/skel/Downloads in all code. <ref>https://github.com/Whonix/usability-misc/commit/63c1ba7cae2914bd3bcfe5d7d2e5edf495a79c02</ref> <ref>https://forums.whonix.org/t/bug-not-all-files-form-etc-skel-are-copied-to-home-user/6778</ref>

== Builds ==

* Released new Whonix 14 builds to address the APT security update bug. <ref>See: [[Operating_System_Software_and_Updates#apt_security_update_-_DSA_4371-1|apt security update - DSA 4371-1]]</ref> <ref>https://forums.whonix.org/t/fixed-apt-rce-announced-new-whonix-images-needed-whonix-build-not-safe-at-the-moment/6715</ref>

== Code ==

* whonixcheck: grep journal for "fail", "error" and "denied". <ref>https://phabricator.whonix.org/T854</ref>
* Re-implemented Tor Browser local version number detection. <ref>https://phabricator.whonix.org/T400</ref>
* Decided against virtualizer configurations which attempt to hide the CPU model. <ref>Such as <code>--cpuid-portability-level</code> or <code>--cpuidremoveall</code> in VirtualBox, since the attempts have proven futile or even posed security risks.</ref> <ref>https://phabricator.whonix.org/T408</ref> <ref>https://phabricator.whonix.org/T881</ref>
* Moved kcalc, okular, gwenview, kgpg, libkf5kipi31.0.0 and libkf5kipi-data from hardened-desktop-applications-kde to non-qubes-whonix-workstation-kde and qubes-whonix-workstation. <ref>https://github.com/Whonix/anon-meta-packages/commit/04851c3ef4a5fa4e4e25917860392273b80a3ebb</ref>
* Simplified code by using apt-key rather than custom code when adding a gpg key. <ref>https://github.com/Whonix/whonix-repository/commit/24f6479ec1c7015aa50aa2caf1a6d66aec28f429</ref>
* Fixed the mime type in whonix-repository. <ref>https://github.com/Whonix/whonix-repository/commit/e6de603931735647aa69ab97202a8eb01589a42b</ref>
* Refactored the whonixcheck code and included an option to show "sudo apt-get-update-plus dist-upgrade" if it is available. <ref>https://github.com/Whonix/whonixcheck/commit/2dcc1257f728639772f66f055134ea6ed960012c</ref> <ref>https://github.com/Whonix/whonixcheck/commit/7f9d648909e790a8d188dda5f83622367fd432c3</ref>
* Ported the IP check in whonixcheck to https://check.torproject.org/api/ip <ref>https://github.com/Whonix/whonixcheck/commit/5111b2765e7e2d0b8d24cdfb5e7c6996da7a1e25</ref>
* sdwdate-gui: permission lockdown, fixed merge conflicts, avoidance of 'clock is fast' false positives and other miscellaneous fixes. <ref>https://github.com/Whonix/sdwdate-gui/commit/964fcb62d1961b52f4b126cc427d429cf2475ef4</ref> <ref>https://github.com/troubadoour/sdwdate-gui/commit/0b7d851476ac5c9d352de537f0ddfea8f1095b34</ref> <ref>https://github.com/Whonix/sdwdate-gui/commit/63b9a0b1c7f979362ec114aebed5d62d2138f63f</ref> <ref>https://github.com/Whonix/helper-scripts/commit/a87cd4fa6cadc541262a90f810a585fa4c4bdc0b</ref>
* anon-ws-disable-stacked-tor: set 'restart' rather than 'start' to  support running scripts. <ref>https://github.com/Whonix/anon-ws-disable-stacked-tor/commit/1f7bf8ff3af2548cb735ab9450c7395d9d4065cf</ref>
* Added a mechanism to add variables to Debian packaging maintainance scripts. <ref>So arbitrary packaging scripts can be avoided.</ref> <ref>https://github.com/Whonix/anon-base-files/commit/fe5433f52678597c4e26ca06ecfab4c3619e45de</ref>
* Thunderbird is no longer installed by default in {{project_name}}.  <ref>https://forums.whonix.org/t/thunderbird-no-longer-installed-by-default/6505</ref> <ref>Due to breakage that has been experienced; see [http://forums.whonix.org/t/thunderbird-enigmail-no-longer-installed-sudo-apt-get-dist-upgrade-the-following-packages-will-be-removed-enigmail/5968 here] for details.</ref>
* Beautified the Whonix landing page for Tor Browser v8.0+. <ref>https://github.com/Whonix/whonix-welcome-page/pull/5</ref> <ref>The landing page was otherwise stuck in the left corner and not centered.</ref>
* Implemented use of /usr/lib/helper-scripts/terminal-wrapper rather than hardcoding Konsole. <ref>This is useful if trying to avoid unnecessary package installation; for example just installing sdwdate on Debian.</ref> <ref>https://github.com/Whonix/sdwdate-gui/commit/f9a269b352eeb2965a352c91e0a033576c01f0e1</ref>  <ref>https://github.com/Whonix/helper-scripts/commit/bb3fab3b3de448ede51417f2b2b2e4760d9a467b</ref> <ref>https://forums.whonix.org/t/calling-1-package-from-whonix-repo-will-pull-all-the-packages/6182/7</ref>
* Deprecated anon-workstation-extra-applications, anon-workstation-langpack-common and anon-shared-desktop-langpack-kde. <ref>https://forums.whonix.org/t/whonix-langpacks-useful/5692</ref> <ref>https://github.com/Whonix/anon-meta-packages/commit/64db5cf89152d0114aaa331f8321fec061bea2c1</ref>

== Improved Functionality and Usability ==

* Changed (Qubes-)Whonix default applications from KDE to XFCE. <ref>
https://phabricator.whonix.org/T888</ref> <ref>Poll: https://forums.whonix.org/t/user-poll-xfce-vs-kde-kde-deprecation-considered/6235</ref> <ref>https://groups.google.com/forum/#!topic/qubes-devel/pkvvm1WNznY</ref>
* Installed magic-wormhole by default as an OnionShare alternative. <ref>https://phabricator.whonix.org/T771</ref> <ref>https://forums.whonix.org/t/onionshare-alternatives/4877/11</ref> <ref>This is because OnionShare is not in Debian stable. magic-wormhole is a great alternative to easily share data between two endpoints, although it requires a uwt wrapper to support stream isolation.</ref>
* Set mousepad as the default editor for sudoedit. <ref>https://github.com/Whonix/usability-misc/pull/7</ref> <ref>https://forums.whonix.org/t/use-sudoedit-in-whonix-documentation/7599</ref>
* Added support for XFCE, thunar and gksudo in Whonix-Gateway. <ref>https://github.com/Whonix/anon-gw-anonymizer-config/commit/252416d91a2158da3b07f1791416ecc8c261f18c</ref>
* Allow multiple flashproxy ports in Whonix firewall. <ref>One example implementation is to use iptables to force all traffic through those ports. This requires two flashproxy ports -- one for TCP traffic and one for DNS.</ref> <ref>https://github.com/Whonix/whonix-firewall/commit/5ffcbb5ad30b04a6c5ea57734a8907cdc08c9b9f</ref> <ref>https://github.com/Whonix/whonix-firewall/commit/6882aa9a449e0b6317f96f35d54ddcfcf56df858</ref> <ref>https://github.com/Whonix/whonix-firewall/commit/5cf35f4ffe9d2f7ff2d2f8200dd0f2ad82ea5f14</ref>
* Disabled {{project_name}} onion apt sources by default due to unreliability. <ref>https://forums.whonix.org/t/disable-onions-by-default-due-to-unreliability/6650</ref> <ref>https://github.com/Whonix/whonix-repository/commit/f04391c5ad438732c5a9ae886b926530e277e9cd</ref> <ref>https://github.com/Whonix/anon-apt-sources-list/commit/8846e18a3bae24ed64fb5e9351f2ef614eaf1566</ref>
* Added a new branch for compression/decompression tools. <ref>This includes small, efficient GUI decompression tools like xarchiver, unxz, unrar and p7zip.</ref> <ref>https://forums.whonix.org/t/archive-decompression-tools/6533</ref> <ref>https://github.com/Whonix/anon-meta-packages/pull/19</ref>
* Implemented support for the new Snowflake pluggable transport in Anon-Connection-Wizard. <ref>https://github.com/Whonix/anon-connection-wizard/pull/22</ref>
* Implemented the Tor Controller GUI in {{project_name}} with various fixes. <ref>https://forums.whonix.org/t/tor-controller-gui-tor-control-panel-testers-wanted/5444</ref>

== Security Enhancements ==

* Removed mapaddress entries in torrc for 1.1.1.1 and 2.2.2.2 due to the fingerprinting risk. <ref>https://phabricator.whonix.org/T878</ref> <ref>Otherwise this redirects and discloses the traffic to onion addresses.</ref>
* Run whonixcheck in Whonix-Workstation on first time boot. <ref>https://phabricator.whonix.org/T821</ref> <ref>whonixcheck will now always run and check for updates on first boot of Whonix-Workstation since numerous updates will likely be available, including kernel updates.</ref>
* Added a spectre/meltdown test to whonixcheck. <ref>https://github.com/Whonix/whonixcheck/commit/4d65231b87b1dbc7827cd47c86f1f4d5476bcda2</ref> <ref>https://github.com/Whonix/Whonix/commit/47d9bdde4f9985aa8b29d64c2bd81f17addf18b6</ref>
* Enforce connections to deb.debian.org instead of us.debian.org and now use https (SSL/TLS) by default, as well as fixing build --connection onion. <ref>https://phabricator.whonix.org/T721</ref> <ref>https://lists.debian.org/debian-security/2017/10/msg00006.html</ref>
* Implemented optional tb-updater onion mirrors download support. <ref>https://phabricator.whonix.org/T678</ref> <ref>The optional <code>--onion</code> parameter can also be set through an environment variable <code>export tb_onion=true</code> or in the /etc/torbrowser.d/50_user.conf config with the same syntax.</ref>
* Corrected systemd hardening for onion-grater. <ref>https://github.com/madaidan/onion-grater/commit/f0312d95bc721580088a10c4230ab10ff97f30f9</ref>
* Added systemd sandboxing for sdwdate. <ref>https://github.com/Whonix/sdwdate/pull/21</ref>
* Enforced <code>tor+http</code> in apt sources lists to make use of apt-transport-tor. <ref>apt-transport-tor (tor+http) is the default from {{project_name}} 14 onward because it provides better error handling and stream isolation.</ref> <ref>https://github.com/Whonix/whonix-repository/commit/8beb14f2782a2730c07a2b233f44b5ea5df021c2</ref> <ref>https://github.com/Whonix/anon-shared-build-apt-sources-tpo/commit/32d6efed5344aaac9de5c3dac04ba1a3d6236905</ref> <ref>https://github.com/Whonix/anon-apt-sources-list/commit/d74b8e8abd7832200d57aee8736e8f31084db964</ref>
* Disabled uncommon network protocols for improved security. <ref>Disables DCCP, SCTP, RDS and TIPC in case they have unknown vulnerabilities; serious problems were discovered in the past.</ref> <ref>https://github.com/Whonix/security-misc/pull/7</ref> <ref>https://forums.whonix.org/t/blacklist-uncommon-network-protocols/7391</ref>
* Added a Bitcoin Core onion-grater profile. <ref>https://forums.whonix.org/t/bitcoin-core-onion-grater-profile/6216</ref>  <ref>To allow the creation of a mainnet or testnet hidden service and discarding of the private key to keep services ephemeral.</ref> <ref>https://github.com/Whonix/onion-grater/pull/1</ref> <ref>https://github.com/Whonix/onion-grater/pull/2</ref>

= {{non_q_project_name_short}} =

== Bug Fixes ==

* Disabled KDE session restoration to prevent VirtualBox error notifications upon boot in either Whonix-Gateway or Whonix-Workstation. <ref>https://phabricator.whonix.org/T822</ref> <ref>https://forums.whonix.org/t/kdesudo-error-popup-window-sdwdate-gui</ref> <ref>https://github.com/Whonix/anon-apps-config/commit/008d206ec20c74e0d03926b939522b7036b8693b</ref>
* Start the KDE desktop session login with an empty session / resolve the kdesudo error popup window related to sdwdate-gui. <ref>https://phabricator.whonix.org/T737</ref>
* Fixed the Whonix-Gateway XFCE / CLI keyboard layout error. <ref>https://github.com/Whonix/usability-misc/commit/c2a0c84b4a12b5bebc241b65a932b96a33cacedb</ref>
* Fixed a lintian error for sdwdate-gui / missing xml files for specific desktop environments. <ref>https://github.com/Whonix/Whonix/commit/5760a2491cc42482945e3d50ed0ccb33d539d92d</ref> <ref>https://github.com/Whonix/Whonix/commit/98fd2361ec4e1ef73de3660ccb4c21e5ec86bf5f</ref> <ref>https://github.com/Whonix/Whonix/commit/8679c7f1b94e269b8f110743654c2431a0725cc2</ref>

== Code ==

* Closed all KDE-related requests and bug fixes following the shift to XFCE. <ref>https://forums.whonix.org/t/user-poll-xfce-vs-kde-kde-deprecation-considered/6235</ref> This includes:
** Change default application to not use kmail. <ref>https://phabricator.whonix.org/T738</ref>
** Change KDE theme and KDE mouse theme. <ref>https://phabricator.dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/T69</ref>
** Disable the Baloo file indexer. <ref>https://phabricator.whonix.org/T630</ref>
** Add /media to desktop icons. <ref>https://phabricator.whonix.org/T705</ref>
** Add /media to pinned places in Dolphin. <ref>https://phabricator.whonix.org/T706</ref>
** Disable/remove KDE system and network settings. <ref>https://phabricator.whonix.org/T733</ref>
** Disable web shortcuts. <ref>https://phabricator.whonix.org/T734</ref>
** settings-plasma search/configure search configurations from Whonix-Gateway. <ref>https://phabricator.whonix.org/T735</ref>
** Non-Qubes-Whonix KDE plasma 5 fixes. <ref>https://phabricator.whonix.org/T633</ref>
* Implemented numerous XFCE fixes: Whonix builds, desktop shortcuts, xfce4-terminal, related meta-packages and general fixes. <ref>https://github.com/Whonix/whonix-ws-desktop-shortcuts/pull/1</ref> <ref>https://github.com/Whonix/whonix-gw-desktop-shortcuts/pull/2</ref> <ref>https://github.com/Whonix/Whonix/pull/423/commits/bb87de2006d5ea6389480d4443b58ea82c11bef2</ref> <ref>https://github.com/Whonix/helper-scripts/pull/4</ref> <ref>https://github.com/Whonix/anon-meta-packages/pull/15</ref>
* Created a configuration file for Whonix XFCE Desktop. <ref>https://github.com/Whonix/whonix-xfce-desktop-config</ref>
* Updated the check for installed meta packages for Whonix XFCE and Whonix CLI. <ref>https://github.com/Whonix/whonixcheck/commit/7eec772015948573319e281da67b9b1ffb93e201</ref>
* Removed pulseaudio from hardened-desktop-applications-xfce. <ref>https://github.com/Whonix/anon-meta-packages/commit/fd2570327ea7a4da054c2d3825ff04debc70a557</ref>
* Removed Ristretto from hardened-desktop-applications-xfce. <ref>So it is not installed on Whonix-Gateway by default.</ref> <ref>https://github.com/Whonix/anon-meta-packages/commit/8bfca1d9a9c7a0e76bcd0222f9fd01dd72a0277b</ref>
* Deprecated non-qubes-vm-enhancements-gui. <ref>https://github.com/Whonix/anon-meta-packages/commit/1de173ad50669a575171200d76b0d3e4878fb78b</ref> <ref>https://github.com/Whonix/anon-meta-packages/commit/28582d8272a38b9d0ce7cd234f94a7b983358a64</ref>
* Merged whonix-shared-packages-recommended-cli into whonix-shared-packages-dependencies-cli. <ref>https://github.com/Whonix/anon-meta-packages/commit/eaac36060f9fea574c098967b85690d41f122562</ref>
* Port to and take ownership of /etc/xdg/xfce4/xfconf/xfce-perchannel-xml <ref>https://github.com/Whonix/security-misc/commit/137bc073c5d65988cce832336ebee5c47071e732</ref> <ref>https://github.com/Whonix/whonix-xfce-desktop-config/commit/c8959135d699bc3ce74b95f736cbfbbc8ff391d9</ref> <ref>https://github.com/Whonix/whonix-xfce-desktop-config/commit/0e9daa97e9f9e70120c969aa9c9d52cace46971a</ref>
* Modified whonix-firewall to remove the old IP 192.168.0.10 reference in non-qubes-whonix-gateway. <ref>https://github.com/Whonix/whonix-firewall/commit/c55b2652eecd214804afb32d89dc8fdf05e31221</ref>
* Minimized VirtualBox Whonix-Gateway CLI differences with non-qubes-whonix-workstation cli. <ref>To prevent broken functionality due to missing packages.</ref> <ref>https://forums.whonix.org/t/whonix-cli-development/6309</ref>

== Improved Functionality and Usability ==

* Implemented Whonix for arm64 / Raspberry Pi (RPi). <ref>https://forums.whonix.org/t/whonix-for-arm64-raspberry-pi-rpi/1788</ref>
* Implemented a unified Whonix download rather than separate Whonix-Gateway / Whonix-Workstation downloads. <ref>Virtual ovas and KVM libirt.xz files are both available as a single download containing both VMs.</ref> <ref>https://forums.whonix.org/t/unified-whonix-download-rather-than-separate-whonix-gateway-whonix-workstation-download/6851</ref> <ref>https://forums.whonix.org/t/whonix-virtualbox-14-0-1-4-4-unified-ova-downloads-testers-wanted/6979/2</ref>
* Re-enabled hidden files and volume management. <ref>https://github.com/Whonix/security-misc/pull/4</ref>
* Whonix Setup Wizard: added instructions on how to change keyboard layout in XFCE. <ref>https://github.com/Whonix/whonix-setup-wizard/commit/7fa64df04025d304fa97458a23f730bcc8aedbd8</ref>
* Added mupdf and Ristretto to non-qubes-whonix-workstation-xfce. <ref>https://github.com/Whonix/anon-meta-packages/commit/701edd4aa46d76b03fc84a482a9046834beb43ab</ref>
* Show the pulseaudio plugin by default. <ref>https://github.com/Whonix/whonix-xfce-desktop-config/commit/0aba7c2c3676469ea28f7949a5e58795cd529e34</ref>
* Increased Whonix-Workstation VRAM in Non-Qubes-Whonix to 2GB to improve performance. <ref>https://forums.whonix.org/research-disabling-tbb-e10-mutiprocess-for-performance-boost/6431</ref> <ref>https://github.com/Whonix/Whonix/commit/e75f61f32eee4d947bbeea61d898fcce815b57e5</ref>

== Security Enhancements ==

* Disabled maximizing of the Tor Browser window when moving to the top of the screen. <ref>https://phabricator.whonix.org/T880</ref> <ref>https://forums.whonix.org/t/whonix-xfce-14-0-0-9-6-for-virtualbox-released/6368/14</ref>
* Disabled previews / thumbnails in Thunar for better security. <ref>https://github.com/Whonix/security-misc/commit/008a97d9e7f891a706a277c8e9bb2e3a958d1e63</ref>

= {{q_project_name}} =

== Bug Fixes ==

* Corrected Tor Browser in whonix-ws-14 based VMs sometimes blocking JavaScript on first start. <ref>https://phabricator.whonix.org/T894</ref> <ref>https://forums.whonix.org/t/tor-browser-in-whonix-blocks-javascript-only-when-started-for-the-first-time-and-in-dispvms/6843</ref> <ref>This was reported to occur in approximately 50 percent of start up cases.</ref>
* Qubes templates: removed the broken graphical updater (Apper). <ref>Since it does not report upgrades, even when they are available.</ref> <ref>https://phabricator.whonix.org/T373</ref>
* Resolved the command failure when running <code>qubesctl state.sls qvm.anon-whonix</code>. <ref>Which failed with return code <code>1</code>.</ref> <ref>https://github.com/QubesOS/qubes-issues/issues/4154</ref>
* Added missing Whonix tags anon-vm / anon-gateway to user-created, Whonix-based VMs. <ref>https://github.com/QubesOS/qubes-issues/issues/4155</ref> <ref>https://github.com/QubesOS/qubes-core-admin-addon-whonix/pull/6</ref>
* Fixed failure of Whonix-Gateway to respond after an update. <ref>Related to the missing package python3-xcffib.</ref> <ref>https://github.com/QubesOS/qubes-issues/issues/4443#issuecomment-436484078</ref>
* Corrected an update error caused by an expired release file. <ref>https://github.com/QubesOS/qubes-issues/issues/3323</ref>
* Corrected a false whonixcheck notification about outdated packages after performing an in-place upgrade. <ref>https://github.com/QubesOS/qubes-issues/issues/4340</ref>

== Builds ==

* Amended builder.conf so template build commands are not ignored. <ref>https://github.com/QubesOS/qubes-issues/issues/4536</ref>
* Deprecated Whonix 13. <ref>https://github.com/QubesOS/qubes-builder/pull/81</ref>

== Code ==

* Set $tag:anon-vm $anyvm deny in template-whonix-ws.sls. <ref>https://github.com/QubesOS/qubes-core-admin/pull/221</ref>
* Removed the default installation of emacs and vim. <ref>https://github.com/QubesOS/qubes-issues/issues/4195</ref>
* Modified the Spectre / Meltdown check so it only runs in Qubes R4 and above. <ref>https://github.com/QubesOS/qubes-issues/issues/4295</ref>

== Security Enhancements ==

* Confirmed Qubes-Whonix TemplateMVs cannot upgrade in timesync-fail-closed mode. <ref>https://phabricator.whonix.org/T858</ref>
* Confirmed the efficacy of jitterentropy random number generation in Xen. <ref>https://github.com/QubesOS/qubes-issues/issues/4174</ref>

= Footnotes =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
