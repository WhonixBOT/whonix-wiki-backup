{{Header}}
{{#seo:
|description=How to Upgrade from Whonix 10.x to Whonix 11.x
}}

{{mbox
| type      = critical
| image   = [[File:Ambox_warning_pn.svg.png|40px|alt=warning]]
| text       = Unfinished! Don't use yet!
}}

= Before you start =
1. Backup your data. (Ideally have a copy of your VM, so you can try again.) <br />
2. Consider running the optional [[#Sanity Tests]]. <br />
3. Upgrade Whonix-Workstation. <br />
4. Power off Whonix-Workstation. <br />
5. Upgrade Whonix-Gatway. <br />
6. Restart Whonix-Gateway. <br />
7. Restart Whonix-Workstation <br />

= Sanity Tests =
<div class="toccolours mw-collapsible mw-collapsed" style="width:800px">
These are optional, but recommended. If you want to do them, please press on expand on the right.
<div class="mw-collapsible-content">
<pre>
sudo dpkg --audit ; echo $?
</pre>

Expected output.

<pre>
0
</pre>

<pre>
sudo dpkg --configure -a ; echo $?
</pre>

Expected output:

<pre>
0
</pre>

[[Security_Guide#Updates|Get package upgrades.]]

<pre>
sudo apt-get update
</pre>

<pre>
sudo apt-get dist-upgrade
</pre>

Test wise install python-qt4.

<pre>
sudo apt-get install python-qt4 ; echo $?
</pre>

<pre>
## ... successful installation of python-qt4 ...
0
</pre>
</div>
</div>

= Upgrading =
(Downloading a new Whonix-Gateway / Whonix-Workstation would be probably easier than applying the following instructions for upgrading, but this upgrade should be quite smooth.)

Backups are important as noted in above chapter [[#Before you start]].

Consider doing the [[#Sanity Tests]] described above. They'll check if your system is affected by obvious grave issues, that you must fix before attempting to upgrade. If your package manager is broken, for example because you mixed packages from Debian stable with packages from Debian testing, then the upgrade may fail in the middle leaving your system in a difficult to resolve situation.

Consider keeping the full terminal (Konsole) log. Even if everything apparently worked, there might be issues after reboot. In case of a bug report in the forums you would be asked to share the upgrading log so the issue can be investigated.

Become root.

<pre>
sudo su
</pre>

Do a usual [[Security_Guide#Updates|upgrade]] of your system's packages from Debian.

Enable extensive debugging so reporting eventual bugs becomes easier.

<pre>
export DEBDEBUG=1
</pre>

Update your package lists.

<pre>
apt-get update
</pre>

Upgrade.

<pre>
apt-get dist-upgrade
</pre>

It is recommended to have the Whonix-Gateway or Whonix-Workstation meta package installed to make sure nothing is broken. (If you like to uninstall it later as per [[Whonix Debian Packages]], you're free to do so. Still, it is recommended to re-install it before removal to make sure you're as close to official package selection as possible.)

<div class="toccolours mw-collapsible mw-collapsed" style="width:800px">
If you are upgrading [[Qubes-Whonix]], please press on expand on the right.
<div class="mw-collapsible-content">
If you are upgrading Whonix-Gateway...

<pre>
apt-get install qubes-whonix-gateway
apt-get purge whonix-gateway
</pre>

If you are upgrading Whonix-Workstation...

<pre>
apt-get install qubes-whonix-workstation
apt-get purge whonix-workstation
</pre>
</div>
</div>

<div class="toccolours mw-collapsible mw-collapsed" style="width:800px">
If you are upgrading [[Non-Qubes-Whonix]], please press on expand on the right.
<div class="mw-collapsible-content">
If you are upgrading Whonix-Gateway...

<pre>
apt-get install non-qubes-whonix-gateway
apt-get purge whonix-gateway
</pre>

If you are upgrading Whonix-Workstation...

<pre>
apt-get install non-qubes whonix-workstation
apt-get purge whonix-workstation
</pre>
</div>
</div>

Purge deprecated packages.

<pre>
apt-get purge anon-shared-build-apt-sources-tpo anon-shared-build-upgrade-torsocks timesync
</pre>

Get rid of old packages.

<pre>
apt-get autoremove
</pre>

Remember to store the terminal (Konsole) log. (File -> Save Output As)

Reboot required.

<pre>
reboot
</pre>

Done.

= Footnotes =
<references />

[[Category:Documentation]]

{{Footer}}
