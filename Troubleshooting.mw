{{Header}}
{{#seo:
|description=Troubleshooting Installation and Network Issues with Whonix
}}

== Introduction ==

The following steps summarize basic troubleshooting instructions, which are described in greater detail below. In basic terms:

# [[Non-Qubes-Whonix]] only: [[Verify_the_Whonix_images|Verify the Whonix virtual machine images]] if this has step has not previously been completed.
# Ensure the virtual machine images have been imported into a supported virtualizer.
# Check if [https://www.torproject.org/download/download-easy.html.en Tor Browser] works on the host.
# Check if other virtual machines have Internet connectivity, such as those from a different vendor or those already created by the user.

Information pertaining to these points should be included in any support request or bug report.

== General ==

It is recommended to first test if the host Internet connection is functional by using ping. <ref>For example, ping 8.8.8.8, ping google.com and so on.</ref> On the host, run.

{{CodeSelect|code=
ping google.com
}}

Check the date and time.

{{CodeSelect|code=
date
}}

The following command should not show any errors. <ref>This process can be lengthy.</ref>

{{CodeSelect|code=
sudo dpkg-reconfigure -a
}}

The following command should be silent and not show any errors or output at all. <ref>This process can be lengthy.</ref>

{{CodeSelect|code=
sudo dpkg --configure -a
}}

Next attempt to retrieve all available updates.

{{CodeSelect|code=
sudo apt-get update
}}
{{CodeSelect|code=
sudo apt-get dist-upgrade
}}

Download the Tor Browser Bundle from [https://www.torproject.org/download/download-easy.html.en torproject.org] and test if it is working on the host.

If the Tor Browser Bundle is not functional on the host, then Whonix is unlikely to work either. The [[Documentation]] recommends having a recent version of the Tor Browser Bundle installed at all times. This way users can test if they live in a censored area or not, and whether Tor is blocked by the ISP. Further, if (private) (obfuscated) bridges are necessary for Tor Browser Bundle functionality on the host, then Whonix will need them as well.

== No network inside Whonix? ==
# Please install some operating system in one of your own virtual machine or download a regular image without Tor enforcement elsewhere.
# Try if networking is functional in the freshly downloaded non-Whonix virtual machine.
# If it is not working: then Whonix won't work either. You need to sort that out first. Try re-installing your virtualizer. Reboot. Try again.
# If it is working: add this to your support request or bug report, that networking in other non-Whonix VMs is working.

== whonixcheck ==
Run [[whonixcheck]].

== Clock Fix ==
On the host.

Make sure your host clock is set to the correct time.

Find out the time in UTC. For example, run the following command on the host. (In Qubes terms: in dom0)

<pre>
date -u
</pre>

Should how something like the following.

<pre>
Mon Mar 14 17:48:38 UTC 2016
</pre>

In Whonix-Gateway.

Set the correct time in Whonix-Gateway. (You still need to adjust it.)

<pre>
sudo date --set "Mon Mar 14 17:48:38 UTC 2016"
</pre>

Tor should work now. You can test that using [[whonixcheck]].

Restart sdwdate.

<pre>
sudo service sdwdate restart
</pre>

If Tor does not work yet, try restarting Tor.

<pre>
sudo service tor restart
</pre>

== clearnet connectivity test ==
'''The following test might reveal, that you are a Whonix user. Omit them, if that is of concern for you.'''

Try if a non-torified, non-anonyomus, direct connection to check.torproject.org is possible. <ref>
Only uses TCP, no DNS.
</ref>

On Whonix-Gateway.

{{CodeSelect|code=
sudo -u clearnet {{Curl Plain}} {{Curl Secure}} -H 'Host: check.torproject.org' -k https://{{Check.torproject.org IP}} | grep IP
}}

== Qubes specific ==
=== Connectivity Issue ===
Shut down sys-whonix. Set sys-whonix NetVM setting from sys-firewall to sys-net. Restart sys-whonix. Perhaps that helps. This should not be considered a final solution. Contribute to the Qubes bug report: https://github.com/QubesOS/qubes-issues/issues/2141 

== Footnotes ==
<references />

{{Footer}}

[[Category:Documentation]]
