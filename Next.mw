{{Header}}
{{#seo:
|description=Documentation for the NEXT Whonix version! ONLY for developers! No guarantee it really makes into the next Whonix version.
}}

= Warning =
'''Documentation for the NEXT Whonix version! ONLY for developers! No guarantee it really makes into the next Whonix version.'''

= torsion =
'''Unfinished!''' Work in progress! See also: <br />
https://github.com/special/torsion/issues/30

Security implications not researched yet.

On Whonix-Gateway, Control Port Filter Proxy<ref>[[Dev/CPFP]]</ref> needs some adjustments.

Create a file {{Code|/etc/controlportfilt.d/50_controlportfilt_torsion}}.

<pre>
kdesudo kwrite /etc/controlportfilt.d/50_controlportfilt_torsion
</pre>

Add the following content.

<pre>
## Keep existing contents of variable CONTROL_PORT_FILTER_WHITELIST
## and extend it with control port commands required by torsion as per:
## "Documentation request for Whonix setup"
## https://github.com/special/torsion/issues/30
CONTROL_PORT_FILTER_WHITELIST=(
    "${CONTROL_PORT_FILTER_WHITELIST[@]}"
    "GETINFO status/circuit-established"
    "SETCONF HiddenServiceDir"
    "SETCONF HiddenServicePort"
    "SETEVENTS STATUS_CLIENT"
)
</pre>

Restart Control Port Filter Proxy.

<pre>
sudo service controlportfiltd restart
</pre>

= VPN on Whonix-Gateway =
Have a look at {{Code|/etc/whonix_firewall.d/30_default}}. To open.

<pre>
Start menu -> Applications -> System -> Whonix Default Firewall Settings
</pre>

It contains default settings, settings you can use as template (copy and paste) and an interesting comment.

<pre>
## Please use "/etc/whonix_firewall.d/50_user" for your custom configuration,
## which will override the defaults found here. When Whonix is updated, this
## file may be overwritten.
</pre>

Create a file  {{Code|/etc/whonix_firewall.d/50_user}}. If you are using a graphical Whonix-Gateway, use.

<pre>
Start menu -> Applications -> System -> Whonix User Firewall Settings
</pre>

If you are using a terminal-only Whonix-Gateway, use.

<pre>
sudo nano /etc/whonix_firewall.d/50_user
</pre>

Add the following settings. You can skip comments (starting with {{Code|#}}). Unless you are using {{Code|seattle.vpn.riseup.net}} as your VPN service, which we use as an example, you have to adjust the VPN_SERVERS variable in your config.

<pre>
###########################
## VPN-Firewall Settings ##
###########################

## IP address of the VPN server.
## Get the IP using: nslookup vpn-example-server.org
## Example: seattle.vpn.riseup.net
## Some providers provide multiple VPN servers.
## You can enter multiple IP addresses, separated by spaces
VPN_SERVERS="198.252.153.26"

## For OpenVPN.
VPN_INTERFACE=tun0

## Destinations you don not want routed through the VPN.
LOCAL_NET="192.168.1.0/24 192.168.0.0/24 127.0.0.0/8"
</pre>

= Footnotes =
<references/>

{{Footer}}

[[Category:Documentation]]
