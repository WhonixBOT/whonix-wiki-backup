{{Header}}
{{#seo:
|description=VirtualBox from Debian stable vs Debian backports vs Oracle repository
|image=https://www.whonix.org/w/images/2/24/Otherversions-1695760640.jpg
}}

==Introduction==
The [[Advanced_Security_Guide#Virtualization_Platform|virtualization platform is an essential component of a secure Whonix system]]. A vulnerable virtualizer may provide opportunities for attackers to perform a breakout from a virtual machine in order to undo the security by isolation features that Whonix provides. The decision to install an alternative virtualizer should not be taken lightly.

There are two methods that can be used to install VirtualBox and these are recommended over downloading, verifying, and installing binaries manually. The two repositories below are maintained by different teams, Debian and Virtualbox.org, respectively.

==Recommended Version==
=== Install VirtualBox from Debian Backports ===
1. On the host.

Package [https://packages.debian.org/stretch-backports/virtualbox <code>virtualbox</code>] should be installed from Debian backports. <ref>
This is non-ideal, see next footnote.
</ref> <ref name=prefer_stable_apt_sources>
{{Prefer stable APT}}
</ref>

2. Add the current Debian stable backports codename <code>{{Stable_Whonix_based_on_Debian_codename}}-backports</code> to Debian apt sources.

Note: this applies to Whonix {{VersionNew}}. Later Whonix versions may use a codename different to <code>{{Stable_Whonix_based_on_Debian_codename}}</code>. <ref>
Or alternatively use the <i>.onion</i> mirror. 

{{CodeSelect|code=
sudo su -c "echo -e 'deb tor+http://vwakviie2ienjx6t.onion/debian {{Stable_Whonix_based_on_Debian_codename}}-backports main' > /etc/apt/sources.list.d/backports.list"
}}
</ref>

{{CodeSelect|code=
sudo su -c "echo -e 'deb http://http.debian.net/debian {{Stable_Whonix_based_on_Debian_codename}}-backports main' > /etc/apt/sources.list.d/backports.list"
}}
3. [[Update#Updates|Update]] the package lists.

{{CodeSelect|code=
sudo apt-get update
}}

4. Install the selected software.

{{CodeSelect|code=
sudo apt-get install virtualbox/{{Stable_Whonix_based_on_Debian_codename}}-backports linux-headers-$(uname -r)
}}

The procedure is now complete.

5. Undo.

On occasion it is necessary to undo this configuration, for example when upgrading from Debian <code>{{Stable_Whonix_based_on_Debian_codename}}</code> to <code>{{Debian_Codename_Testing}}</code>. <ref>Most often this step applies before attempting major Whonix upgrades; upgrade instructions are also made available at that time (see [[Stay_Tuned|stay tuned]]).</ref> To proceed, run.

{{CodeSelect|code=
sudo rm /etc/apt/sources.list.d/backports.list
}}

==Newer Version==
===Install from Oracle Repository===
[https://www.virtualbox.org/wiki/Linux_Downloads Latest Oracle VirtualBox package information]

Warning: This is a [[Install_Software#Foreign_Sources|foreign source]].

Add oracle apt sources list.

(Change <code>{{Stable_Whonix_based_on_Debian_codename}}</code> to the current name of your stable distribution.)

{{CodeSelect|code=
sudo su -c "echo -e 'deb http://download.virtualbox.org/virtualbox/debian {{Stable_Whonix_based_on_Debian_codename}} contrib' > /etc/apt/sources.list.d/oracle.list"
}}

Add Oracle's signing key to apt-get keyring.

{{CodeSelect|code=
sudo apt-key --keyring /etc/apt/trusted.gpg.d/whonix.gpg adv --keyserver hkp://ipv4.pool.sks-keyservers.net:80 --recv-keys B9F8D658297AF3EFC18D5CDFA2F683C52980AECF
}}

{{Update}}

{{CodeSelect|code=
sudo apt-get update
}}

Install VirtualBox.

{{CodeSelect|code=
sudo apt-get install virtualbox-5.2 linux-headers-$(uname -r)
}}

[[VirtualBox/Guest Additions|VirtualBox Guest Additions]] ISO is included in the package. Mount ISO in guest virtual machine to install. [https://www.virtualbox.org/manual/ch04.html#idp46640732075968 Instructions]

{{Footer}}

[[Category:Documentation]]
