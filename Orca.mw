{{#seo:
|description=Using the Orca Screen Reader in {{project name}} Virtual Machines
}}
{{Header}}
{{Title|title=
Orca Screen Reader
}}

= Introduction =

{{mbox
| type    = notice
| image   = [[File:Ambox_notice.png|40px|alt=Info]]
| text    = [[{{non q project name short}}|{{non q project name}}]] instructions only.
}}

[https://github.com/GNOME/orca Orca] is: 

<blockquote>...a free, open source, flexible, and extensible screen reader that provides access to the graphical desktop via user-customizable combinations of speech and/or braille.

Orca works with applications and toolkits that support the assistive technology service provider interface (AT-SPI), which is the primary assistive technology infrastructure for the Solaris and Linux operating environments.</blockquote>

This documentation has been written by a sighted developer without the input of a blind person for testing purposes. Therefore some written advice might be incorrect, such as instructions concerning the use of <code>sudo</code> vs <code>dsudo</code>. <ref><code>dsudo</code> allows commands to be run as root without entering a password, so long as the default password has not been changed.</ref>

= Installation =

{{mbox
| type    = notice
| image   = [[File:Ambox_notice.png|40px|alt=Info]]
| text    = Testers only!
}}

At the time of writing (21 February 2021), the Orca screen reader is not installed in the {{project_name}} stable (default) release. Testers must install {{project name}} <code>15.0.1.6.4</code>: 

* https://download.whonix.org/ova/15.0.1.6.4/Whonix-XFCE-15.0.1.6.4.ova
* https://download.whonix.org/ova/15.0.1.6.4/Whonix-XFCE-15.0.1.6.4.ova.asc

= Initial Setup of Orca =
Prerequisites:

* The orca (or any other) screenreader needs to be already functional on the host operating system. This is unrelated to {{project name}} and outside the scope of this documentation. The user needs to be already comfortable with the host screenreader.
* It is recommended to learn the basics of using VirtualBox outside of any reference to {{project name}}. I.e using VirtualBox with operating systems other than {{project name}}. Being a blind first time user of VirtualBox and {{project name}} at the same time might be a challenging combination.
* If the VirtualBox host user interface itself is accessible has not been tested and is out of scope.

Notes:

* Orca integration in {{project name}} is was only recently added. Support for users intending to use both, orca in combination with Tor [[Bridges]] users support is not perfect yet. Please post a feature request if that is desired. Bridge users see footnote for workaround. <ref>
[[Bridges]] users workaround: Disable host internet connection. Follow instructions as below. Setup bridges. Reconnect host internet connection. Make sure host internet connection is functional. Restart Tor or reboot {{project name}} if not connected yet.
</ref>

Instructions:

'''1.''' Legal.

{{mbox
| image   = [[File:Ambox_warning_pn.svg.png|40px]]
| text    = <u>'''Acknowledge that you have read, understood and agreed to our [[Terms of Service|<span style="color:#FF1493;">Terms of Service</span>]] and [[License Agreement|<span style="color:#FF1493;">License Agreement</span>]].'''</u> 
}}

'''2.''' Start {{project name}} using the VirtualBox host user interface normally.

Note that depending on system performance that it could take up to three minutes or so until {{project name}} started. Usually however on fast machines it boots much faster. On a reasonable fast developer machine, booting either {{gateway product name}} or {{workstation product name}} took approximately 30 seconds. An issue is that there is no audio feedback when the boot process has been completed. That is an optimization problem. {{project name}} was originally designed with privacy in mind. Most users would not want to reveal that they are using {{project name}} or just have started any operating system through an audio notification which might be noisy depending on host audio settings.

'''3.''' Wait for the boot process to be completed.

'''4.''' Start the Xfce application finder.

Press the following keys.

<code>Alt</code> + <code>F2</code>

'''5.''' Use the <code>easo</code> utility.

<code>easo</code> is spelled <code>e</code>, <code>a</code>, <code>s</code>, <code>o</code>. An easy to type abbreviation for easyorca. <ref>
It could not be named easyorca for technical reasons. Avoiding letter y inside <code>easo</code> to avoid issues from English versus German keyboard layouts.

https://gitlab.gnome.org/GNOME/orca/-/issues/189
</ref>

Make sure you read, understood and agreed to [https://gitlab.com/{{Project name short lowercase}}/{{Project name short lowercase}}-base-files/-/raw/master/usr/share/{{Project name short lowercase}}/WHONIX_BINARY_LICENSE_AGREEMENT {{project name}} binary license agreement] and [https://gitlab.com/{{Project name short lowercase}}/{{Project name short lowercase}}-base-files/-/raw/master/usr/share/{{Project name short lowercase}}/WHONIX_DISCLAIMER {{project name}} disclaimer] before continuing.

The following use of the <code>easo</code> <ref>
* https://gitlab.com/whonix/setup-dist/-/blob/master/usr/bin/easo
* https://gitlab.com/whonix/setup-dist/-/blob/master/usr/sbin/easyorca-root
</ref> utility will effectively result in:

* '''A)''' Set volume inside virtual machine to 50%. <ref>
By running command <code>amixer set Master 50%</code>. <code>50%</code> was arbitrarily chosen. Hopefully that is not too quiet or too noisy and can be regulated using the host operating system or physical speaker volume control.
</ref>
* '''B)''' Start the orca screen reader.
* '''C)''' Legally accept [https://gitlab.com/{{Project name short lowercase}}/{{Project name short lowercase}}-base-files/-/raw/master/usr/share/{{Project name short lowercase}}/WHONIX_BINARY_LICENSE_AGREEMENT {{project name}} binary license agreement].
* '''D)''' Legally accept [https://gitlab.com/{{Project name short lowercase}}/{{Project name short lowercase}}-base-files/-/raw/master/usr/share/{{Project name short lowercase}}/WHONIX_DISCLAIMER {{project name}} disclaimer].
* '''E)''' Disable autostart of <code>setup-wizard-dist</code> GUI.
* '''F)''' Enable orca autostart. <ref>
https://gitlab.com/whonix/usability-misc/-/blob/master/usr/sbin/orca-enable-autostart
</ref>
* '''G)''' Enable the <code>orca-kill-at-shutdown.service</code> systemd service. <ref name=orca-kill-at-shutdown.service>
https://gitlab.com/whonix/usability-misc/-/blob/master/lib/systemd/system/orca-kill-at-shutdown.service
</ref>
* '''H)''' Start Tor connections which results in Tor connecting to the Tor public network. <ref>
Using <code>setup-dist</code>(<code>-noninteractive</code>)<code> 1</code>.

https://gitlab.com/whonix/setup-dist/-/blob/master/usr/sbin/setup-dist-noninteractive
</ref>

Type on the keyboard.

{{CodeSelect|code=
easo
}}

'''6.''' Press <code>Enter</code> key.

'''7.''' Wait 10 seconds.

For orca startup and initial orca setup to be completed.

'''8.''' Wait for notification.

There should a notification spoken by orca "screenreader on".

'''9.''' Done.

Initial setup of orca has been completed.

At this time, there is no need to re-run the <code>easo</code> utility after next boot. Orca will automatically start after next reboot. There will be a notification by orca "screenreader on".

'''10.''' systemcheck

Running <code>systemcheck</code> recommended. See [[whonixcheck]].

= Functional =
The orca screen reader is at least functional in the following applications (non-exhaustive list):

* Xfce start menu
* xfce4-terminal
* Xfce application finder
* [[Tor Browser]]

= Limitations =
* whonixsetup GUI does not work. Use whonixsetup CLI instead as [[#complete whonixsetup|documented above]].
* [[Anon Connection Wizard]] does not work. That should not be an issue for public Tor network users. Users that require the use of bridges could configure these on the command line as documented on the [[Bridges]] page.
* systemcheck GUI (previously called whonixcheck) does not work. Use systemcheck CLI on the command line. Start <code>systemcheck</code> on the command line instead. See also page [[whonixcheck]].
* Whonix Repository Wizard (GUI) does not work. If needed, use <code>whonix_repository</code> CLI instead as documented on page [[Project-APT-Repository]] in chapter Command Line Interface.

= Advanced =
== autostart orca ==
This chapter is usually not required. Already automated by <code>easyo</code>.

'''1.''' Start Xfce application finder.

<code>Alt</code> + <code>F2</code>

'''2.''' Type on the keyboard.

{{CodeSelect|code=
xfce4-terminal
}}

'''3.''' Run the following command.

That is type the following words and press enter.

{{CodeSelect|code=
dsudo orca-enable-autostart
}}

Above command uses <code>dsudo</code> instead of <code>sudo</code>. Not changing {{project name}} default password, i.e. keeping {{project name}} default password <code>changeme</code> as is and using <code>dsudo</code> instead of <code>sudo</code> might be simpler for blind users than using <code>sudo</code> and typing the password. Specifically during the initial setup. See also chapter [[Root#dsudo_-_default_password_sudo|dsudo]]. <ref>
[https://gitlab.com/whonix/usability-misc/blob/master/usr/sbin/orca-enable-autostart<code>orca-enable-autostart</code>]
</ref>

'''4.''' Done.

After reboot, orca should be automatically starting. Once the boot process has been completed and orca has been started there will be audio feedback by orca.

== complete setup-dist ==
This chapter is usually not required. Already automated by <code>easyo</code>.

<code>setup-dist-noninteractive</code> is a tool to non-interactively use <code>setup-dist</code>. Menu option <code>1</code> enables Tor which results in accessing the public Tor network unless the user previously manually configured [[Bridges]].

Only on both {{gateway product name}} and {{workstation product name}}.

{{CodeSelect|code=
dsudo setup-dist-noninteractive 1
}}

== Packages ==
List of packages which are installed and why.

* libatk-adaptor libgail-common - required for Xfce settings menu screen reader support
* non-qubes-audio - required to add audio support to {{gateway product name}}
* gstreamer1.0-plugins-good - [https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=931687 missing dependency in Debian buster]
* xbrlapi - <code>Recommends:</code> by <code>orca</code>
* python3-gst-1.0 - <code>Recommends:</code> by <code>orca</code>
* speech-dispatcher-espeak-ng - without it <code>spd-say test</code> fails
* sound-icons - might be optional

== Issues ==
* issues on Kicksecure host: https://gitlab.gnome.org/GNOME/orca/-/issues/176
* shutdown takes a long time with orca enabled: https://gitlab.gnome.org/GNOME/orca/-/issues/188#note_1027211 Worked around using <code>orca-kill-at-shutdown.service</code> systemd service. <ref name=orca-kill-at-shutdown.service/>
* https://gitlab.gnome.org/GNOME/orca/-/issues/189
* https://gitlab.gnome.org/GNOME/orca/-/issues/190
* https://gitlab.gnome.org/GNOME/orca/-/issues/191

= Footnotes =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
