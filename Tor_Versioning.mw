{{Header}}
{{#seo:
|description=Tor Versioning
|og:image=https://www.whonix.org/w/images/7/73/Torversioning243231.png
}}

= Newer Tor Versions from the Whonix Repository =

Newer Tor versions can be installed by [[Whonix-APT-Repository#Change_Whonix_APT_Repository|enabling the Whonix stable-proposed-updates repository]] in Whonix-Gateway (<code>whonix-gw</code>) and then [[Operating_System_Software_and_Updates#Updates|upgrading]] the system as usual. This is only recommended for testers.

= Even Newer Tor Versions from The Tor Project Repository =

{{mbox
| type      = notice
| image   = [[File:Ambox_notice.png|40px|alt=Info]]
| text       = Not fully documented. Testers only.
}}


Note: This action risks breaking connectivity, for instance if the latest Tor version from deb.torproject.org has not been fully tested by Whonix developers at a specific point in time. <ref>
This has happened in the past. For example, on one occasion Tor from deb.torproject.org came with AppArmor changes that were incompatible with [https://github.com/Whonix/anon-gw-anonymizer-config anon-gw-anonymizer-config]'s [https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/etc/apparmor.d/local/system_tor.anondist /etc/apparmor.d/local/system_tor.anondist] which resulted in Tor's systemd unit failing.
</ref>

To proceed despite the risk, install the even newer Tor version by enabling the deb.torproject.org repository. The [https://github.com/Whonix/anon-shared-build-apt-sources-tpo anon-shared-build-apt-sources-tpo] package must be installed. This enables The Tor Project's apt-get signing key and installs the apt source torproject.list. <ref>
Alternatively you can use [https://www.torproject.org/docs/debian The Tor Project's native instructions for Debian], but these manual steps are more difficult and involved. The verification of The Tor Project apt-get signing key is also harder. Since you already [[trust]] Whonix, the logical choice is to trust another Whonix package to install the right signing key.
</ref>

In Whonix-Gateway (<code>whonix-gw</code>), [[Operating_System_Software_and_Updates#Updates|update]] the package lists.

<pre>
sudo apt-get update
</pre>

Install anon-shared-build-apt-sources-tpo.

<pre>
sudo apt-get install anon-shared-build-apt-sources-tpo
</pre>

Refresh the package lists. <ref>
So the newly installed <i>/etc/apt/sources.list.d/torproject.list</i> takes effect.
</ref>

<pre>
sudo apt-get update
</pre>

Install the (potentially) newer version of the <code>tor</code> package (as well as install the <code>deb.torproject.org-keyring</code> package which keeps Tor Project repository apt key up to date). <ref>A later version of Tor will not always be installed. For example, at the time of writing the stretch repositories for both packages.debian.org and deb.torproject.org have identical Tor versions. As the Debian stable release ages, the likelihood of receiving a newer Tor version from deb.torproject.org increases.</ref>

<pre>
sudo apt-get install tor deb.torproject.org-keyring
</pre>

= Footnotes =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]
