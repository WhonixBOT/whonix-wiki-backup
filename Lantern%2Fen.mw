<languages />
{{Header}}
{{Title|
title=Lantern - 翻墙软件
}}
{{#seo:
|description=翻墙软件. Lantern over Tor. 将 Whonix 与 Lantern 结合. 用 Lantern 作为Tor的前置代理 (用户 -> Lantern -> Tor -> 互联网 ). Tor网桥失效后的另一选择
}}

__forcetoc__

= Introduction =
Lantern是一款翻墙软件，可作为 Tor [[网桥]]的替代品。 

TODO: expand

= 用 Lantern 作为Tor的前置代理 =
仅供实验者尝试!

用 Lantern 可以作为Tor的前置代理建立如下隧道:<br />
'''User -> Lantern -> Tor -> Internet'''

如果你想尝试，请跟随以下引导。

[[Qubes-Whonix]] only! [[Non-Qubes-Whonix]] 是 [[不支持的]].

如果你想尝试，推荐您先阅读如下相关Wiki: [[Tunnels/Introduction]]

对于现阶段存在的限制，请看博文/论坛讨论:<br />
https://www.whonix.org/blog/connecting-to-lantern-before-tor

创建一个新的独立的叫做 Lantern-Gateway 的ProxyVM ，其模板基于 Debian-8 template.

在 Lantern-Gateway ProxyVM中, {{卸载防火墙}}

在Lantern-Gateway ProxyVM 中， IP Forwarding 可以/应该被禁用，因为其是无必要的。

<pre>
sudo sysctl -w net.ipv4.ip_forward=0
</pre>

安装缺失的Lantern依赖模块。TODO<ref>
TODO

debian/control 应当声明一个依赖。 检查以下看看Lantern开发者是否意识到了这个问题，然后如果有必要的话报告一个bug.
</ref>

<pre>
sudo apt-get install libappindicator3-1
</pre>

检查一下可供下载的deb包是否还能凑合用。去 https://getlantern.org/ 下载之。

<pre>
curl --tlsv1.2 --proto =https https://s3.amazonaws.com/lantern/lantern-installer-beta-64-bit.deb --output ~/lantern-installer-beta-64-bit.deb
</pre>

安装 lantern。 TODO<ref>
TODO:

Check if there are lantern development tickets for the following tasks. If not, create them. If these exist, link them from the footnote here.

* ask lantern developers for a proper Debian deb package: https://github.com/getlantern/lantern/issues/4836
* ask lantern developers for a Debian APT repository with lantern: https://github.com/getlantern/lantern/issues/4837
* post a Debian lantern [https://wiki.debian.org/RFP RFP (request for packaging)]
* ask lantern developers to add lantern to official Debian repositories: https://github.com/getlantern/lantern/issues/4837
</ref>

<pre>
sudo dpkg -i ~/lantern-installer-beta-64-bit.deb
</pre>

让Lantern共享翻墙通道，以便sys-whonix使用.

<pre>
lantern -addr 0.0.0.0:8788
</pre>

<ref>
在Lantern-Gateway中, 检查lantern的 http 端口是否可用。

<pre>
curl --tlsv1 --proto =https --proxytunnel --proxy 127.0.0.1:8788 https://check.torproject.org
</pre>

In Lantern-Gateway, check if lantern's socks port is functional.

<pre>
curl --tlsv1.2 --proto =https --socks5-hostname socks5h://127.0.0.1:8788 https://check.torproject.org
</pre>
</ref>

Shut down sys-whonix if running. Set sys-whonix NetVM to Lantern-Gateway. Restart sys-whonix.

<ref>
In sys-whonix, test if Tor is able to the http proxy that Lantern is providing.

<pre>
curl.anondist-orig --tlsv1 --proto =https --proxytunnel --proxy 10.137.11.1:8788 https://check.torproject.org
</pre>

In sys-whonix, test if Tor is able to the socks proxy that Lantern is providing.

<pre>
curl.anondist-orig --tlsv1.2 --proto =https --socks5-hostname socks5h://10.137.11.1:8788 https://check.torproject.org
</pre>
</ref>

In sys-whonix. {{Open_/etc/tor/torrc}}

Add the following. 10.137.11.1 is just an example. You need to replace 10.137.11.1 with the IP of your Lantern-Gateway ProxyVM. You could run the following command within sys-whonix to find out the IP of your Lantern-Gateway ProxyVM.
<code>qubesdb-read /qubes-gateway</code>

<pre>
HTTPSProxy 10.137.11.1:8788
</pre>

TODO<ref>
TODO: make it work with socks. According to https://github.com/getlantern/lantern/issues/2075 lantern already does have socks support. Issues opened: https://github.com/getlantern/lantern/issues/4838

<pre>
Socks5Proxy 10.137.11.1:8788
</pre>
</ref>

{{Reload_Tor}}

Done. Tor will use Lantern as proxy.

= Footnotes =
<references/>

{{Footer}}

[[Category:Documentation]]
