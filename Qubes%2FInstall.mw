{{Title|
title=HowTo: Install the Stable Version of Qubes-Whonix {{VersionShort}}
}}
{{Header}}
{{#seo:
|description=How to Install Qubes-Whonix {{VersionShort}}
|image=https://www.whonix.org/w/images/5/55/Qubes-logo-icon.png
}}
__NOTOC__
== Introduction ==
{{Qubes Install Introduction}}

== Remove Old Versions ==
{{Qubes Remove Old Versions}}

== Update dom0 ==
=== All Qubes Versions ===
{{Qubes_upgrade_dom0}}

== Download Whonix Templates and Configure sys-whonix and anon-whonix ==
{{Qubes Download Install}}

== Qubes R4 Only: Optional Whonix DVM Template VM ==

In Qubes R4 and above, users can choose to set up a <code>{{whonix-ws}}-dvm</code> DVM Template as a base for [[Qubes/Disposable_VM|Disposable VMs]]. <ref>https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/blob/master/qvm/{{whonix-ws}}-dvm.sls
</ref>

In dom0, run.

{{CodeSelect|code=
sudo qubesctl state.sls qvm.{{whonix-ws}}-dvm
}}

== Optional: Updates over Tor ==

=== TemplateVMs ===

To force all TemplateVM updates over Tor: <ref>https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/blob/master/qvm/updates-via-whonix.sls
</ref>

* '''R3.2:''' For each template, manually open VM settings and set NetVM to <code>sys-whonix</code>.
* '''R4:''' Use salt in dom0:
** {{CodeSelect|code=
sudo qubesctl state.sls qvm.updates-via-whonix
}}

In Qubes R4, this setting can be undone by modifying ''/etc/qubes-rpc/policy/qubes.UpdatesProxy'' <ref>https://groups.google.com/forum/?_escaped_fragment_=topic/qubes-users/_jI2uWPPMMA#!topic/qubes-users/_jI2uWPPMMA</ref>

=== dom0 ===

To force dom0 updates over Tor, set Qubes dom0 UpdateVM to <code>sys-whonix</code>.

{{CodeSelect|code=
qubes-prefs updatevm sys-whonix
}}

To revert this change, run.

{{CodeSelect|code=
qubes-prefs updatevm sys-firewall
}}

== Optional: Enable AppArmor ==
{{Qubes_AppArmor}}

== Update and Launch Applications ==
 
Before starting applications in the Whonix-Workstation AppVM, [[Qubes/Update|update both Whonix-Gateway and Whonix-Workstation TemplateVMs]]. 

To launch an application like [[Tor Browser|Tor Browser]]:

<code>Qubes App Launcher (blue/grey "Q")</code> -> <code>{{Code2|Domain: anon-whonix}}</code> -> <code>Tor Browser (AnonDist)</code>

To learn about known bugs affecting this release, see [[Known_Issues#Qubes-Whonix|here]].

== Additional Information ==  
<div class="toccolours mw-collapsible mw-collapsed">
If you are interested, click on Expand on the right.
<div class="mw-collapsible-content">
* {{Post Install Advice}}
* [[#Stay tuned|Stay tuned]]!

== Known Bugs ==
{{Known_bugs}}

==  Stay Tuned ==
{{Stay_tuned}}
</div>
</div>
== Footnotes ==
{{reflist|close=1}}
{{Footer}}
[[Category:Documentation]]
