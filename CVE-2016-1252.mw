{{Header}}
{{#seo:
|description=workaround for the apt-get verification bypass security issue
}}

__FORCETOC__
__TOC__

----

=== Debian i386 / [[Non-Qubes-Whonix]] ===
{{CVE-2016-1252
|download_line=Get:1 http://security.debian.org/ jessie/updates/main apt i386 1.0.9.8.4
|sha256sum=31305b54003fd5f66db43b91f571821ebd82085cda76e10a9ea6b8f50372eeda  apt_1.0.9.8.4_i386.deb
2b0eba0a79bc23b546838f1dd8094ca656fc3512b202f58579c2d499209f4920  apt-transport-https_1.0.9.8.4_i386.deb
dee84ddde453a3c5ec950c5160b050e4de1ae07901b8792d4f59ab4b45cc8a2d  apt-utils_1.0.9.8.4_i386.deb
c494df2adaef819822e0bdd193f9b247a6fda56f5ba9ff3cd901791a4ffe9692  libapt-inst1.5_1.0.9.8.4_i386.deb
bb80257da752fb5a7f1dd25a14c43c0f17fd0cbbbc9bf5acdea66dc7377a06b2  libapt-pkg4.12_1.0.9.8.4_i386.deb
|platform=i386
|
}}
----
= Alternative Check =
TODO: don't rely on this yet. Needs review first!

From Marek's git commit
https://github.com/marmarek/qubes-builder-debian/commit/d755d2dba79ca96187a30e1c34918c8a042c4b04 we can conclude.

If you apt version is <code>1.0.9.8.3</code> or lower, you should upgrade using the following method. If you are already using apt version <code>1.0.9.8.4</code> or higher, you can just do a regular [[Update|upgrade]].

To find our your current apt version.

{{CodeSelect|code=
dpkg-query --show apt
}}

Should show something like this.

<code>
apt     1.0.9.8.3
</code>

Update your package lists.

{{CodeSelect|code=
sudo apt-get update
}}

Enable pipefail.

{{CodeSelect|code=
set -o pipefail
}}

Check InRelease files for excessive line lengths. <ref>
Alternatively you could also run the following command.

{{CodeSelect|code=
wc -L "/var/lib/apt/lists/"*InRelease
}}

Then look at the line lengths. No line should exceed a line length of 1024 characters.
</ref>

<!--
EDITORS NOTE:
CodeSelect unfortunately does not support pipes '|'.
-->
<pre>
wc -L "/var/lib/apt/lists/"*InRelease | awk '$1 > 1024 {print; exit 1}' ; echo $?
</pre>

Should show exactly. <ref>
<code>0</code> is the exit code and in bash shell that means success.
</ref>

<code>
0
</code>

Done.

forum discussion:

* [https://forums.whonix.org/t/how-to-upgrade-debian-whonix-etc-without-being-compromised-by-cve-2016-1252 users]
* [https://forums.whonix.org/t/apt-get-upgrading-security-issue-cve-2016-1252 technical]

----

= Footnotes =
<references />

{{Footer}}
[[Category:Documentation]]
