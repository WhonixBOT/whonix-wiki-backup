<translate>

{{Header}}
{{Title|
title=Connecting to SSH before Tor
}}
{{#seo:
|description=Instructions on how to connect to SSH before Tor (User -> SSH -> Tor -> Internet)
|image=https://www.whonix.org/w/images/2/25/Norman-79860640.jpg
}}

{{Tunnels_Introduction}}
{{Stub}}
<br />
'''<code>User</code> -> <code>SSH</code> -> <code>Tor</code> -> <code>Internet</code>'''

The SSH tunnel be configured on the host or inside Whonix-Gateway.

=== Install SSH Client ===
{{CodeSelect2|code=
sudo apt-get update
}}

{{CodeSelect2|code=
sudo apt-get install ssh
}}

===  Test Connection ===
{{CodeSelect2|code=
ssh yourusername@your.ssh.server
}}

* TODO: Public key authentication steps

{{CodeSelect2|code=
apt-get install lynx
}}

{{CodeSelect2|code=
lynx check.torproject.org
}}

{{CodeSelect2|code=
exit
}}

=== Configure Local Server ===

{{CodeSelect2|code=
ssh -D 1080 your.ssh.server
}}

* TODO: Run in background on each start up before Tor.
* TODO: Public Key authentication steps

=== Configure torrc ===

==== Option 1: Use {{Code2|Anon Connection Wizard}} ====

Beginning with Whonix 14, a prefixed proxy can be configured easily using [[Anon_Connection_Wizard|Anon Connection Wizard]].
<div class="toccolours mw-collapsible mw-collapsed">
<div class="mw-collapsible-content">
===== Step 1: Start Anon Connection Wizard =====
{{Start_Anon_Connection_Wizard}}

===== Step 2: Use Proxy Configuration Page =====
{{Anon_Connection_Wizard_Use_Proxy}}
</div>
</div>

==== Option 2: Manually Configure Proxy ====

<div class="toccolours mw-collapsible mw-collapsed">
<div class="mw-collapsible-content">

{{Open /etc/tor/torrc}}

* If SSH tunnel was setup from Whonix-Gateway:
{{CodeSelect2|code=
Socks5Proxy 127.0.0.1:1080
}}

* If SSH tunnel was setup from host operating system, change IP:PORT as needed:
{{CodeSelect2|code=
Socks5Proxy IP:PORT
}}

</div>
</div>


* TODO: if running inside Whonix-Gateway, new firewall rules are probably required.

= Footnotes =
<references />

{{Footer}}

[[Category:Documentation]]
</translate>
